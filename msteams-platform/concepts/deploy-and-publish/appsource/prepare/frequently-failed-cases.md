---
title: アプリの申請のヒントとよく失敗するケース
description: Teams ストアの申請が成功した場合のヒントと、申請が失敗する一般的な理由について説明します。
ms.topic: reference
ms.author: lajanuar
keywords: アプリの申請に関するヒントよく失敗するケースの検証ガイドライン
ms.openlocfilehash: 5bca17b3fd59700c30b068486843e13e28407461
ms.sourcegitcommit: fa64b83c0b534bf7a89f256880d5b5ca193e4b04
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/28/2021
ms.locfileid: "50037016"
---
# <a name="tips-for-a-successful-microsoft-teams-app-submission"></a>Microsoft Teams アプリの申請を成功するためのヒント

この記事では、提出されたアプリが検証に失敗する一般的な理由について説明します。 アプリに関して発生する可能性のあるすべての問題を網羅した一覧を提供することを目的としているのではありませんが、このガイドに従って、アプリの申請が初めて合格する可能性が高まれます。 広範 [な検証ポリシーの一覧については、](/legal/marketplace/certification-policies) 商用マーケットプレース認定ポリシーを参照してください。

>[!NOTE]
>**[セクション 1140](/legal/marketplace/certification-policies#1140-teams)** は Microsoft Teams に固有であり、セクション **[1140.4](https://docs.microsoft.com/legal/marketplace/certification-policies#11404-functionality)** では Teams アプリの機能要件について説明します。

## <a name="validation-guidelines--most-failed-test-cases"></a>ほとんどのテスト ケース&検証ガイドライン

### <a name="9989-general-considerations"></a>&#9989;一般的な考慮事項

セクション[100](/legal/marketplace/certification-policies#100-general)も参照 — 全般

* [Microsoft Teams SDK](https://www.npmjs.com/package/@microsoft/teams-js)のバージョン 1.4.1 以降を使用してください。
* 検証プロセスの進行中にアプリを変更しません。 これを行う場合は、アプリの完全な再評価が必要です。
* アプリは、応答を停止したり、予想外に終了したり、プログラミング エラーを含んだりしてはなりません。 問題が発生した場合、アプリは失敗し、ユーザーに転送するための有効な情報を提供する必要があります。
* アプリは、ユーザー環境で実行可能コードを自動的にダウンロード、インストール、または起動しなけれな。 すべてのダウンロードは、ユーザーから明示的なアクセス許可を求める必要があります。
* 説明やサポート ドキュメントなど、エクスペリエンスに関連付ける資料は正確である必要があります。 説明と資料では、正しいスペル、大文字と小文字の区別、句読点、および文法を使用してください。
* ヘルプとサポート情報を提供します。 初回実行時のユーザー エクスペリエンスに関するヘルプまたは FAQ リンクをアプリに含めるのを強くお勧めします。 すべての個人用アプリについて、ユーザー エクスペリエンスを向上するために、ヘルプ ページを個人用タブとして提供することをお勧めします。
* すべてのアプリには、アプリの機能と次の場所での必要な統合について説明する構成画面の [ツアーに参加] や [アプリ ガイド] などのビジュアル ツアーが必要です。
    * ストア登録情報ページ (詳細な説明)。
    * タブ構成画面。
    * ボットのウェルカム メッセージ。
    * アプリ ソースのメタデータ。
    * コネクタの構成画面。

* ビジュアル ツアーには、ビデオ、スクリーンショット、静的タブへのリンクとアプリの詳細があります。 これらすべての参照は、Teams 環境内に含まれる必要があります。

    ![サンプル アプリ 1 ](../../../../assets/images/faq/Sampleapp1.png) ![ サンプル アプリ 2](../../../../assets/images/faq/Sampleapp2.png)

* 申請にマニフェストを変更する場合は、マニフェストでアプリのバージョン番号を増やします。
* アプリは、主要なユーザー シナリオのためにユーザーを Teams から削除しなけれ。 アプリ内のリンク ターゲットは、外部ブラウザーにリンクしなけける必要があります。 リンク ターゲットは、タスク モジュールやタブなど、Teams に含まれる div 要素にリンクする必要があります。 
* タスク モジュールまたはタブを使用して、Teams 内のユーザーに情報を表示できます。
* 次の場合を除き、すべてのコア シナリオとコア以外のシナリオを Teams 環境内で完了する必要があります。
  * プライバシー ポリシー
  * 利用規約 (TOU)
  * Web サイトのリンク
  * サインアップ プロセス

* 個人用アプリを使用すると、ユーザーは個人のアプリ エクスペリエンスのコンテンツを他のチーム メンバーと共有できます。

### <a name="9989-provide-a-clear-and-simple-sign-in-sign-out-and-sign-up-experience"></a>&#9989;、明確でシンプルなサインイン、サインアウト、サインアップエクスペリエンスを提供する

セクション [1100.5 - 顧客管理も参照](/legal/marketplace/certification-policies#11005-customer-control)

* アプリまたはアドインが外部アカウントまたはサービスに依存している場合は、サインイン、サインアウト、サインアップのエクスペリエンスが明らかで、アプリのすべての機能に到達できる必要があります。
* ユーザーに明示的なサインイン オプションが提供されている場合は、対応するサインアウト オプションが必要です (アプリがサイレント認証を使用している [場合でも](../../../../tabs/how-to/authentication/auth-silent-aad.md))。
* サインアウト オプションでは、ユーザーをアプリの機能からサインアウトする必要があります。Teams クライアントからサインアウトする必要はありません。
* 少なくとも、サインアウト オプションでは、サインイン オプションでアクセスした機能と同じ機能からユーザーをサインアウトする必要があります。 たとえば、サインイン オプションにメッセージング拡張機能とタブの両方が含まれる場合、サインアウト オプションにはメッセージング拡張機能とタブの両方を含める必要があります。

* 次のような動作を取り消す方法が常に備えてください。
  * サインイン =>サインアウト。
  * アカウント/サービスをリンクする =>サービスのリンクを解除します。
  * アカウント/サービスを接続する =>サービスを切断する。
  * アカウント/サービスを承認 =>/サービスの承認/拒否を行います。
  * アカウント/サービスを登録 = 登録>登録解除/登録解除を行います。
* アプリにアカウントまたはサービスが必要な場合は、ユーザーがサインアップまたはサインアップ要求を作成する方法を提供する必要があります。 アプリで使用するライセンスが必要な場合は、例外が付与される場合があります。 このようなシナリオでは、新しいユーザーがサインアップする明確な手順を提供します。
* アプリ サービスを使用するためにサインアップする方法について、新しいユーザーに転送する方法について明確なガイダンスを提供します。 準備完了のサインアップ リンクが利用できない場合は、次の分野で正確なガイダンスを提供してください。

> [!div class="checklist"]
>
> * をクリックします。
> * アプリのウェルカム メッセージに表示されます。
> * がアプリのヘルプ メッセージに表示されます。
> * をクリックします。

* 簡単なサインアップ フローのないアプリには、ヘルプ タブや Web ページへのリンクも含める必要があります。このページでは、新しいユーザーが Teams アプリの構成に関する詳細なガイダンスを確認できます。 アプリを初めて試す際に新しいユーザーがブロックされていないことを確認するための詳細情報を提供します。
* サインインとサインアウトの機能は、モバイル クライアントで機能する必要があります。 Microsoft Teams [SDK バージョン](https://www.npmjs.com/package/@microsoft/teams-js) 1.4.1 以降を使用してください。

認証の詳細については、以下を参照してください。

* [認証に関するドキュメント](../../../authentication/authentication.md)
* [ノードのボット認証サンプル](https://github.com/OfficeDev/microsoft-teams-sample-auth-node)
* [Node のタブ認証のサンプル](https://github.com/OfficeDev/microsoft-teams-sample-complete-node)
* [C#/.NET でのタブ/ボット認証](https://github.com/OfficeDev/microsoft-teams-sample-complete-csharp)

### <a name="9989-response-times-must-be-reasonable"></a>&#9989;時間が妥当である必要がある場合

* **タブ 。** アクションへの応答に 3 秒以上かかる場合は、読み込み中のメッセージまたは警告を指定する必要があります。
* **ボット**。 ユーザー コマンドへの応答は、2 分以内に行う必要があります。 より長い処理が必要な場合は、アプリで入力インジケーターを表示する必要があります。
* **作成拡張機能**。 ユーザー コマンドに対する応答は、5 分以内に行う必要があります。

> [!TIP]
> アプリの応答に予想より時間がかかる場合は、アプリに読み込みインジケーターまたは何らかの警告が表示されます。

### <a name="9989-tab-content-must-not-have-excessive-chrome-or-layered-navigation"></a>&#9989;コンテンツに過剰なクロムやレイヤー化されたナビゲーションを含めなければならない

* タブはフォーカスされたコンテンツを提供し、不要な UI 要素を避ける必要があります。 通常、これは、不要な入れ子になったナビゲーションやレイヤー化されたナビゲーション、コンテンツの横にある不要なまたは無関係な UI、またはユーザーを無関係なコンテンツに移動するリンクを指します。 たとえば、次のタブ ビューではナビゲーション メニューが省略され、メイン コンテンツだけが表示されます。

![SharePoint Web ビュー](../../../../assets/images/faq/web-sp.png)  
![SharePoint タブ ビュー](../../../../assets/images/faq/tab-sp.png)

* タブは、複雑なナビゲーションを含めず、自然に明るいものにする必要があります。
* アプリ内で複雑な編集機能を備えるチャネル タブは、タブではなくマルチウィンドウでエディター ビューを開く必要があります。
* [チャネル] タブでは、メインの Teams ナビゲーションと競合するアイコンが左側のレールに表示されるアプリ バーを提供しなけずにしてください。
* タブには、メインの Teams ナビゲーションと競合するアイコンが左側のレールに表示されるアプリ バーを表示しなけずにしてください。
* アプリ内で複雑な編集機能を備えるタブは、タブではなくマルチ ウィンドウでエディター ビューを開く必要があります。
* 複数の表示オプションがある場合は、ユーザーが選択できるタブ構成メニューを使用します。 たとえば、メニューをタブ内に埋め込む代わりに、実際のタブ ビューがクリーンでフォーカスを持つ構成ページにメニューを表示します。
* アプリを構成 *、* サインアップ、使用する方法をユーザーに伝え、静的タブとして [ヘルプ] タブを含めることができます。
* アプリ ヘッダーから *利用* できる [設定] タブを含める必要があります。

![幅広いアイデア構成ページ](../../../../assets/images/faq/wideidea.png)

### <a name="9989-tab-configuration-must-happen-in-the-configuration-screen"></a>&#9989;タブ構成が構成画面に表示される必要があります。

* 構成画面では、エクスペリエンスの価値とタブの構成方法を明確に説明する必要があります。
* 構成プロセスでは、ユーザーエクスペリエンスを終了する方法ではなく、常にユーザーが続行する方法を提供する必要があります。 たとえば、ユーザーがタブを構成した後に空のボードを表示することはできません。
* ユーザー サインイン プロセスは、構成プロセスの一部である必要があります。 必ずタブ UI で完了してください。 ユーザーが構成を完了してタブを読み込んだ後は、それ以上の操作は必要ありません。
* サインイン構成ポップアップ ウィンドウ内に Web ページ全体を表示しない。
* ユーザーは、探しているコンテンツがすぐに見つからなくても、常に構成エクスペリエンスを完了できる必要があります。
* 構成エクスペリエンスでは、ユーザーが自分のコンテンツを検索したり、URL をピン留めしたり、存在しない場合は新しいコンテンツを作成したりするためのオプションを提供する必要があります。
* 構成エクスペリエンスは Teams コンテキスト内に残る必要があります。 ユーザーは、コンテンツを作成し、Teams に戻ってコンテンツをピン留めするために、構成エクスペリエンスから離れる必要が生じてはならない。
* 利用可能なビューポート領域を効率的に使用します。 構成ポップアップ内で大きなロゴを使用する場合に無駄に使う必要があります。

![OneNote では、メモが見つからない場合に OneNote リンクを貼り付ける](../../../../assets/images/faq/tab-onenote-config.png)

![ユーザーは、既存のプランがない場合に限り、いつでも planner で新しいプランを作成できます。](../../../../assets/images/faq/tab-planner-config.png)

![SharePoint では、ユーザーが SharePoint リンクを直接貼り付けすることもできます。](../../../../assets/images/faq/tab-sp-config.png)

### <a name="9989-tabs-in-channel---member-access"></a>&#9989;タブ - メンバー アクセス

* チャネル スコープのメンバーによって構成されたタブは、そのタブを構成したメンバーからアクセス許可を求めることなく、他のメンバーがアクセスできる必要があります。
* アプリは、タブがプライベートまたは制限された使用を対象にしている場合、またはタブを構成したメンバーからのアクセス許可が必要な場合は、アクセス許可管理オプションを前もって提供する必要があります。

### <a name="9989-bots-must-always-be-responsive-and-fail-gracefully"></a>&#9989;ボットは常に応答性が高く、正常に失敗する必要があります。

ボットは、ユーザーのデッド エンドではなく、任意のコマンドに応答する必要があります。 ボットがユーザーにインテリジェントに対応するのに役立つヒントを次に示します。

* **コマンド リストを使用します**。 ユーザー入力の分析やユーザーの意図の予測は難しい。 ボットが実行できる操作をユーザーが推測する代わりに、ボットが理解するコマンドの一覧を提供します。

![Flow コマンド リスト](../../../../assets/images/faq/flow-bot.png)

* **ヘルプ コマンドを含める**。 ユーザーは、紛失した場合やボットが期待通り応答しない場合に、「ヘルプ」と入力する可能性があります。 すべての有効なコマンドと共に、アプリの値がどのように表示されるのかについて説明するヘルプ コマンドを含める。

![Flow ヘルプ コマンド](../../../../assets/images/faq/flow-help.png)

* **ボットが紛失した場合のヘルプ コンテンツやガイダンスを含める**。 ボットがユーザー入力を理解できない場合は、代替アクションを提案する必要があります。 たとえば、" *申し訳ございません。分かります。詳細については、「help」と入力してください。* エラー メッセージや単純に "理解できない" で応答 *しない。*

### <a name="9989-help-command-response"></a>&#9989;コマンドの応答

* ヘルプ コマンドは正確である必要があります。また、アプリの応答は、少なくとも 6 つのコマンドの操作可能なコンテンツを含むアダプティブ カード形式である必要があります。
* アプリのコマンドが 6 つ未満の場合は、すべてのコマンドがアダプティブ カードに存在しないか確認します。

  ![ヘルプ コマンドのサンプル](../../../../assets/images/faq/helpcommand.png)

* **アダプティブ カードとタスク モジュールを使用して、ボットの応答を明確で操作可能にする** 
[タスク モジュールを呼び出すボタンを](/task-modules-and-cards/task-modules/task-modules-bots)含むアダプティブ カードは、ボットのユーザー エクスペリエンスを向上します。 これらのカードとボタンは、ユーザーがコマンドを入力するのとは対照的に、モバイル デバイスで使用する方が簡単です。 また、ボットの応答は、長いテキストを含むテキストである必要があります。 ボットは、会話チャット ベースのユーザー インターフェイスや長いテキスト応答の代わりに、アダプティブ カードとタスク モジュールを使用する必要があります。

* **すべてのスコープについて考えてみる**。 チャネルや個人の会話で、ボットが () 言及した場合 `@*botname*` に適切な応答を提供します。 ボットが個人またはチームの範囲内で意味のあるコンテキストを提供しない場合は、マニフェストを使用してそのスコープを無効にします。 (Microsoft `bots` Teams マニフェスト スキーマ リファレンスのブロック [を参照してください](../../../../resources/schema/manifest-schema.md#bots))。

* **チーム、グループ チャット、または 1 対 1 の会話を含める**。 ボット通知には、チーム、グループ チャット、または対象ユーザーに関連するコンテンツを含む 1 対 1 の会話を含める必要があります。

* **機密性の高いデータをプッシュしません**。 ボットは、機密データをチーム、グループ チャット、または 1 対 1 の会話にプッシュし、そのデータを表示しなきがちな対象ユーザーがいます。

* **ウェルカム メッセージを入力します**。 ボットは、エンゲージメントを促進するために、カルーセル カードを含む対話型のチュートリアルや "試してみる" ボタンを含む FRE ウェルカム メッセージを提供する必要があります。

### <a name="9989-personal-bots-must-always-send-a-welcome-message-on-first-launch"></a>&#9989;ボットは初回起動時に常にウェルカム メッセージを送信する必要がある

ウェルカム メッセージは、個人用チャット ボットのトーンを設定する最適な方法です。 これは、ユーザーがボットと最初にやり取りする操作です。 良い歓迎メッセージは、ユーザーがアプリを探索し続けるのを促す可能性があります。 ウェルカム メッセージまたは入門メッセージがわかりにくい場合や不明瞭な場合、ユーザーはアプリの価値をすぐには確認できないので、興味を失います。
ウェルカム メッセージの要件については、次のセクションを参照してください。

> [!Note]
> チャネル ボットのウェルカム メッセージは省略可能です。

### <a name="welcome-message-requirements"></a>ウェルカム メッセージの要件

* ウェルカム ツアーに価値提案を含める。
* アプリを使用するための簡単なガイダンスを提供します。
* アプリにサインアップして構成する方法に関するガイダンスを含める。
* 読みやすいテキストと簡単な会話を表示します。できれば、タスク モジュールを読み込む操作可能なウェルカム ツアー ボタンを備えたカードです。
* ボタンやカードを使用してシンプルで使い分け可能な状態に保ち、長いテキストやチャットの会話を避ける。
* アダプティブ カードとボタンを含め、ウェルカム メッセージを使い分け可能にします。
* 2 つ以上の同時 ping ではなく、1 つの ping でウェルカム メッセージを呼び出します。
* ウェルカム メッセージは、アプリを構成したユーザーにのみ表示する必要があります (1 対 1 の個人用チャットが望ましい)。
* 個人用アプリは、常にユーザーにウェルカム メッセージを提供する必要があります。
* チームのすべてのメンバーに個人用チャットを送信しない。スパムと見なされます。
* ウェルカム メッセージを 2 回送信しない。 同じウェルカム メッセージを一定の間隔で繰り返す操作は許可されていないので、spamming と見なされます。

#### <a name="avoid-welcome-message-spamming"></a>ウェルカム メッセージの spamming を回避する

* **ボット別チャネル メッセージ**。 別の新しいチャット投稿を作成して、ユーザーに迷惑メールを送信しない。 同じスレッドに返信を含む単一のスレッド投稿を作成します。
* **ボットによる個人用チャット**。 複数のメッセージを送信しません。 完全な情報を含む 1 つのメッセージを送信します。 同じウェルカム メッセージを一定の間隔で繰り返す操作は許可されていないので、spamming と見なされます。

#### <a name="notification-only-bot-welcome-messages"></a>通知専用ボットのウェルカム メッセージ

通知専用ボットは *、"I am a notification-only bot and will* not be able to reply to your chats" というメッセージを含むウェルカム メッセージを送信する必要があります。

#### <a name="welcome-messages-in-the-personal-scope"></a>個人用範囲内のウェルカム メッセージ

   * **簡潔で有益なメッセージを作成します**。 ユーザー エクスペリエンスとアプリの知識は異なります。 ユーザーが別のプラットフォームでアプリを使用した場合や、アプリについて何も知らない場合があります。 すべての対象ユーザーに合わせてメッセージを調整し、いくつかの文でボットの機能と操作方法について説明します。 また、アプリの価値と、ユーザーがアプリを使用するメリットについて説明する必要があります。
![パンとディナーボット](../../../../assets/images/faq/cafe-bot.png)

* **メッセージを操作可能にする**。 アプリのインストール後にユーザーに最初に行って欲しい操作について考えてみください。 試してみる必要がある、かっこいいコマンドはありますか? 知っている必要がある別のオンボーディング エクスペリエンスはありますか? サインインする必要がありますか? アダプティブ カードにアクションを追加したり *、"Try asking...."*(確認してみてください)、"This *is what i can do..."* などの具体的な例を提供できます。

#### <a name="welcome-messages-in-the-team-or-channel--scope"></a>チームスコープまたはチャネル スコープのウェルカム メッセージ

ボットが最初にチャネルに追加される場合、機能は少し異なります。 通常、チームの全員に 1 対 1 のメッセージを送信する必要がありますが、ボットはチャネルでウェルカム メッセージを送信できます。

### <a name="9989-mobile-responsiveness-no-direct-upsell-or-payment"></a>&#9989;の応答性、アップセルや支払いなし

* タブ、アダプティブ カード、ボット メッセージ、タスク モジュール内のコンテンツは、さまざまなモバイル デバイス画面サイズに対応している必要があります。
* iOS をサポートするアプリは、最新バージョンの iOS を使用して最新の iPad デバイスで完全に機能する必要があります。
* ユーザーがモバイル OS (Android、iOS) で Teams アプリから他のコンテンツ、アプリ、アドインを購入または取得できるオンライン ストアへのリンクは、アプリ内購入、試用版、有料版のプラン、またはオンライン ストアへのリンクを含めずにしてください。
* アドインの iOS バージョンまたは Android バージョンでは、UI や言語を表示したり、ユーザーに支払いを求めるその他のアプリ、アドイン、または Web サイトへのリンクを表示したりしなけずにしてください。
* 関連するプライバシー ポリシーと使用条件のページには、商取引 UI やストアへのリンクも含めずに含めなければならない。

### <a name="9989-do-not-post-sensitive-data-to-an-audience-not-intended-to-view-the-data"></a>&#9989;データを表示することを意図していない対象ユーザーに機密データを投稿しない

Teams アプリでは、クレジット カードや金融支払い方法、暗証番号 (PIN)、正常性、連絡先のトレース情報などの機密データを、そのデータを表示することを意図していない対象ユーザーに投稿しなけける必要があります。

### <a name="9989-do-not-transmit-financial-payment-details-or-complete-financial-transactions-via-your-teams-app"></a>&#9989; Teams アプリを介して財務支払いの詳細を送信したり、金融取引を完了したりしない

* Teams アプリでは、Teams インターフェイス内で直接支払いを行う必要があります。
* アプリは、アプリ インターフェイスでユーザーを通じて金融取引の詳細を送信できない場合があります。 アプリは、ユーザーがアプリの使用に同意する前に、アプリの使用条件、プライバシー ポリシー、およびアプリのプロファイル ページまたは Web サイトで公開されている場合にのみ、セキュリティで保護された支払いサービスへのリンクをユーザーに送信できます。

### <a name="9989-clear-warning-before-downloading-any-files-or-executable-exe-into-a-users-environment"></a>&#9989; () をユーザーの環境にダウンロードする前に警告 `.exe` をクリアする

アプリがファイルまたは実行可能ファイル ( )をユーザーのコンピューターまたは環境にダウンロードする前に、ユーザー `.exe`  に警告してください。

### <a name="9989-messaging-extensions-must-provide-help-text-and-be-easy-to-read"></a>&#9989;メッセージング拡張機能は、ヘルプ テキストを提供し、読みやすくする必要があります。

* 検索ベースのメッセージング拡張機能は、効果的に検索する方法に関するヘルプ テキストを提供する必要があります (入力例の表示など)。
* タスク モジュールには、アプリに含まれているか、アプリから作成されたアイコンと短い名前を含める必要があります。
* メッセージ拡張機能の `@mention` 実行可能ファイルは、明確で、理解しやすい、読みやすくする必要があります。
![メッセージの拡張子](../../../../assets/images/faq/message-extension.png)

## <a name="m365-publisher-attestation"></a>M365 Publisher の構成証明

### <a name="9989-complete-the-publisher-attestation-in-partner-center"></a>&#9989; センターで発行元の構成証明を完了する

* 詳細については、 [完全な発行元構成証明プログラム](/microsoft-365-app-certification/docs/attestation) のドキュメントを参照してください。
* 発行元の構成証明のワークフロー [セクション](/microsoft-365-app-certification/docs/userguide#3publisher-attestation-workflow) の手順に従って、発行元の構成証明プロセスを完了します。 質問については、appcert@microsoft.comに書き込む必要があります。
* 詳細については、 [トラブルシューティング ガイド](/azure/active-directory/develop/troubleshoot-publisher-verification) を参照してください。
* パートナー センターから自己構成証明を完了します。 アプリのコンプライアンスSelf-Assessmentアンケート **に記入します**。

> [!div class="nextstepaction"]
> [Teams アプリ承認ポリシーの詳細](/legal/marketplace/certification-policies#1140-teams)
