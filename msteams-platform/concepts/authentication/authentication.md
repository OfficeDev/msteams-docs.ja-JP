---
title: Teams でユーザーを認証する
description: Teams での認証とアプリでの使用方法について説明します。
keywords: teams 認証 OAuth SSO AAD
ms.openlocfilehash: d3ae57d9937c6794fb743b44ca8210a5afd181bf
ms.sourcegitcommit: 4329a94918263c85d6c65ff401f571556b80307b
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/01/2020
ms.locfileid: "41674743"
---
# <a name="authentication-in-teams"></a><span data-ttu-id="7d71f-104">Teams での認証</span><span class="sxs-lookup"><span data-stu-id="7d71f-104">Authentication in Teams</span></span>

> [!Note]
> <span data-ttu-id="7d71f-105">モバイルクライアントでの Web ベース認証には、Teams JavaScript SDK のバージョン1.4.1 以降が必要です。</span><span class="sxs-lookup"><span data-stu-id="7d71f-105">Web-based authentication on mobile clients requires version 1.4.1 or later of the Teams JavaScript SDK.</span></span>

<span data-ttu-id="7d71f-106">アプリが Azure Active Directory によって保護されたユーザー情報にアクセスしたり、Facebook や Twitter などの他のサービスからデータにアクセスしたりするには、アプリがこれらのプロバイダーとの信頼された接続を確立する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7d71f-106">In order for your app to access user information protected by Azure Active Directory, as well as access data from other services like Facebook and Twitter, your app will have to establish a trusted connection with those providers.</span></span> <span data-ttu-id="7d71f-107">アプリでユーザースコープで Microsoft Graph Api を使用する必要がある場合は、ユーザーを認証して、適切な認証トークンを取得する必要もあります。</span><span class="sxs-lookup"><span data-stu-id="7d71f-107">If your app needs to use Microsoft Graph APIs in the user scope, you'll also need to authenticate the user to retrieve the appropriate authentication tokens.</span></span>

<span data-ttu-id="7d71f-108">Microsoft Teams では、アプリに対して2つの異なる認証フローがあり、を利用できます。</span><span class="sxs-lookup"><span data-stu-id="7d71f-108">In Microsoft Teams there are two different authentication flows for your app to take advantage of.</span></span> <span data-ttu-id="7d71f-109">タブ、構成ページ、またはタスクモジュールに埋め込まれた[コンテンツページ](~/tabs/how-to/create-tab-pages/content-page.md)で従来の web ベースの認証フローを実行することができます。</span><span class="sxs-lookup"><span data-stu-id="7d71f-109">You can perform a traditional web-based authentication flow in a [content page](~/tabs/how-to/create-tab-pages/content-page.md) embedded in a tab, a configuration page, or a task module.</span></span> <span data-ttu-id="7d71f-110">アプリに会話の bot が含まれている場合は、OAuthPrompt フロー (およびオプションで Azure Bot フレームワークのトークンサービス) を使用して、会話の一部としてユーザーを認証できます。</span><span class="sxs-lookup"><span data-stu-id="7d71f-110">If your app contains a conversational bot you can use the OAuthPrompt flow (and optionally the Azure Bot Framework's token service) to authenticate a user as part of a conversation.</span></span>

## <a name="web-based-authentication-flow"></a><span data-ttu-id="7d71f-111">Web ベースの認証フロー</span><span class="sxs-lookup"><span data-stu-id="7d71f-111">Web-based authentication flow</span></span>

<span data-ttu-id="7d71f-112">[タブ](~/tabs/what-are-tabs.md)では、web ベースの認証フローを使用し、[会話 bot](~/bots/what-are-bots.md)または[メッセージング拡張機能](~/messaging-extensions/what-are-messaging-extensions.md)で使用するかどうかを選択することができます。</span><span class="sxs-lookup"><span data-stu-id="7d71f-112">You'll need to use the web-based authentication flow for [tabs](~/tabs/what-are-tabs.md), and can choose to use it with [conversational bots](~/bots/what-are-bots.md) or [messaging extensions](~/messaging-extensions/what-are-messaging-extensions.md).</span></span> <span data-ttu-id="7d71f-113">Web コンテンツページの[Microsoft Teams JavaScript クライアント SDK](/javascript/api/overview/msteams-client)を使用して認証を有効にし、そのコンテンツページをタブ、構成ページ、またはタスクモジュールに埋め込むことができます。</span><span class="sxs-lookup"><span data-stu-id="7d71f-113">You'll use the [Microsoft Teams JavaScript client SDK](/javascript/api/overview/msteams-client) in a web content page to enable authentication, then embed that content page in a tab, a configuration page, or a task module.</span></span> <span data-ttu-id="7d71f-114">話し言葉の bot で web ベースの認証フローを使用する場合は、[ボット付きのタスクモジュールを使用](~/task-modules-and-cards/task-modules/task-modules-bots.md)する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7d71f-114">If you want to use the web-based authentication flow with a conversational bot, you'll need to [use a task module with a bot](~/task-modules-and-cards/task-modules/task-modules-bots.md).</span></span>

* <span data-ttu-id="7d71f-115">[タブの認証フロー](~/tabs/how-to/authentication/auth-flow-tab.md) Teams でのタブ認証のしくみについて説明します。</span><span class="sxs-lookup"><span data-stu-id="7d71f-115">[Authentication flow in tabs](~/tabs/how-to/authentication/auth-flow-tab.md) describes how tab authentication works in Teams.</span></span> <span data-ttu-id="7d71f-116">これは、タブで使用される一般的な web ベースの認証フローを示しています。</span><span class="sxs-lookup"><span data-stu-id="7d71f-116">This shows a typical web based authentication flow used for tabs.</span></span>
* <span data-ttu-id="7d71f-117">[タブの AZURE AD 認証](~/tabs/how-to/authentication/auth-tab-AAD.md)Teams のアプリのタブ内から Azure Active Directory に接続する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="7d71f-117">[Azure AD authentication in tabs](~/tabs/how-to/authentication/auth-tab-AAD.md) describes how to connect to Azure Active Directory from within a tab in your app in Teams.</span></span>
* <span data-ttu-id="7d71f-118">[サイレント認証 (AZURE AD)](~/tabs/how-to/authentication/auth-silent-AAD.md) Azure Active Directory を使用してアプリでのサインイン/同意プロンプトを減らす方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="7d71f-118">[Silent authentication (Azure AD)](~/tabs/how-to/authentication/auth-silent-AAD.md) describes how to reduce sign-in/consent prompts in your app using Azure Active Directory.</span></span>
* <span data-ttu-id="7d71f-119">[Dotnet/C#](https://github.com/OfficeDev/microsoft-teams-sample-complete-csharp)または[JavaScript/node.js](https://github.com/OfficeDev/microsoft-teams-sample-complete-node)での Web ベース認証</span><span class="sxs-lookup"><span data-stu-id="7d71f-119">Web-based authentication in [dotnet/C#](https://github.com/OfficeDev/microsoft-teams-sample-complete-csharp) or [JavaScript/Node.js](https://github.com/OfficeDev/microsoft-teams-sample-complete-node)</span></span>

## <a name="the-oauthprompt-flow-for-conversational-bots"></a><span data-ttu-id="7d71f-120">会話の bot の OAuthPrompt フロー</span><span class="sxs-lookup"><span data-stu-id="7d71f-120">The OAuthPrompt flow for conversational bots</span></span>

<span data-ttu-id="7d71f-121">Azure Bot フレームワークの OAuthPrompt を使用すると、会話のボットを使用するアプリの認証が容易になります。</span><span class="sxs-lookup"><span data-stu-id="7d71f-121">The Azure Bot Framework’s OAuthPrompt makes authentication easier for apps using conversational bots.</span></span> <span data-ttu-id="7d71f-122">Azure Bot フレームワークのトークンサービスを活用して、トークンキャッシュもサポートすることができます。</span><span class="sxs-lookup"><span data-stu-id="7d71f-122">You can take advantage of Azure Bot Framework's token service to assist with token caching as well.</span></span>

<span data-ttu-id="7d71f-123">OAuthPrompt の使用の詳細については、次を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7d71f-123">For more information on using the OAuthPrompt see:</span></span>

* <span data-ttu-id="7d71f-124">[Bot 認証フローの概要](~/bots/how-to/authentication/auth-flow-bot.md)アプリ内で Teams 内で認証が機能する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="7d71f-124">[Bot authentication flow overview](~/bots/how-to/authentication/auth-flow-bot.md) describes how authentication works within a bot in your app in Teams.</span></span> <span data-ttu-id="7d71f-125">これは、すべてのバージョンの Teams (web、デスクトップアプリ、モバイルアプリ) で bot に対して使用されている web ベース以外の認証フローを示しています。</span><span class="sxs-lookup"><span data-stu-id="7d71f-125">This shows a non-web based authentication flow used for bots on all versions of Teams (web, desktop app, and mobile apps)</span></span>
* [<span data-ttu-id="7d71f-126">Bot 認証</span><span class="sxs-lookup"><span data-stu-id="7d71f-126">Bot authentication</span></span>](~/bots/how-to/authentication/add-authentication.md)
* <span data-ttu-id="7d71f-127">[Dotnet/C#](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/46.teams-auth)または[JavaScript/node.js](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/46.teams-auth)の BOT 認証 (v3 SDK) のサンプル</span><span class="sxs-lookup"><span data-stu-id="7d71f-127">Bot authentication (v3 SDK) sample in [dotnet/C#](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/46.teams-auth) or [JavaScript/Node.js](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/46.teams-auth)</span></span>

## <a name="configure-your-identity-provider"></a><span data-ttu-id="7d71f-128">Id プロバイダーを構成する</span><span class="sxs-lookup"><span data-stu-id="7d71f-128">Configure your identity provider</span></span>

<span data-ttu-id="7d71f-129">アプリケーションが使用している認証フロー (両方を使用している場合もあります) に関係なく、Teams アプリと通信するように id プロバイダーを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7d71f-129">Regardless of which authentication flow your app is using (you might even be using both), you'll need to configure your identity provider to communicate with your Teams app.</span></span> <span data-ttu-id="7d71f-130">ここに記載されているサンプルとチュートリアルの大部分は、主に、id プロバイダーとして Azure Active Directory を使用することで対処できます。</span><span class="sxs-lookup"><span data-stu-id="7d71f-130">The majority of the samples and walkthroughs you'll find here will deal primarily with using Azure Active Directory as your identity provider.</span></span> <span data-ttu-id="7d71f-131">ただし、この概念は、どの id プロバイダーを使用するかに関係なく適用されます。</span><span class="sxs-lookup"><span data-stu-id="7d71f-131">The concepts however apply regardless of which identity provider you'll use.</span></span>

<span data-ttu-id="7d71f-132">詳細について[は、「id プロバイダーを構成](~/concepts/authentication/configure-identity-provider.md)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7d71f-132">For more information see [configuring an identity provider](~/concepts/authentication/configure-identity-provider.md)</span></span>
