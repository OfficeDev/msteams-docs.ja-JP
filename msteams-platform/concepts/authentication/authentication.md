---
title: アプリ ユーザーの認証
description: アプリでの認証Teamsおよびアプリで使用する方法について説明します。
ms.topic: conceptual
localization_priority: Normal
keywords: Teams 認証 OAuth SSO AAD
ms.openlocfilehash: 6511b1223e70d09ed2d158f6649a391999553ed1
ms.sourcegitcommit: 85a52119df6c4cb4536572e6d2e7407f0e5e8a23
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/29/2021
ms.locfileid: "53179889"
---
# <a name="authenticate-users-in-microsoft-teams"></a><span data-ttu-id="b3d9a-104">ユーザーを認証Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="b3d9a-104">Authenticate users in Microsoft Teams</span></span>

> [!Note]
> <span data-ttu-id="b3d9a-105">モバイル クライアントでの Web ベース認証には、JavaScript クライアント SDK のバージョン 1.4.1 以降Teams必要です。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-105">Web-based authentication on mobile clients requires version 1.4.1 or later of the Teams JavaScript client SDK.</span></span>

<span data-ttu-id="b3d9a-106">Azure Active Directory (AAD) で保護されたユーザー情報にアクセスし、Facebook や Twitter のようなサービスからデータにアクセスするために、アプリはそれらのプロバイダーとの信頼できる接続を確立します。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-106">To access user information protected by Azure Active Directory (AAD) and to access data from services like Facebook and Twitter, the app establishes a trusted connection with those providers.</span></span> <span data-ttu-id="b3d9a-107">アプリがユーザー スコープで Microsoft Graph API を使用する場合は、適切な認証トークンを取得するためにユーザーを認証します。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-107">If the app uses Microsoft Graph APIs in the user scope, authenticate the user to retrieve the appropriate authentication tokens.</span></span>

<span data-ttu-id="b3d9a-108">このTeams、アプリには 2 つの異なる認証フローがあります。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-108">In Teams, there are two different authentication flows for the app.</span></span> <span data-ttu-id="b3d9a-109">タブ、構成ページ、またはタスク モジュールに[](~/tabs/how-to/create-tab-pages/content-page.md)埋め込まれたコンテンツ ページで、従来の Web ベース認証フローを実行します。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-109">Perform a traditional web-based authentication flow in a [content page](~/tabs/how-to/create-tab-pages/content-page.md) embedded in a tab, a configuration page, or a task module.</span></span> <span data-ttu-id="b3d9a-110">アプリに会話ボットが含まれている場合、OAuthPrompt フロー (およびオプションの Azure Bot Framework のトークン サービス) を使用して、会話の一部としてユーザーを認証することができます。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-110">If the app contains a conversational bot, use the OAuthPrompt flow and optionally the Azure Bot Framework's token service to authenticate a user as part of a conversation.</span></span>

## <a name="web-based-authentication-flow"></a><span data-ttu-id="b3d9a-111">Web ベースの認証フロー</span><span class="sxs-lookup"><span data-stu-id="b3d9a-111">Web-based authentication flow</span></span>

<span data-ttu-id="b3d9a-112">タブに Web ベースの認証[](~/tabs/what-are-tabs.md)フローを使用し、会話型[](~/bots/what-are-bots.md)ボットまたはメッセージング拡張機能で使用[するように選択します](~/messaging-extensions/what-are-messaging-extensions.md)。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-112">Use the web-based authentication flow for [tabs](~/tabs/what-are-tabs.md) and choose to use it with [conversational bots](~/bots/what-are-bots.md) or [messaging extensions](~/messaging-extensions/what-are-messaging-extensions.md).</span></span> <span data-ttu-id="b3d9a-113">Web コンテンツ[ページMicrosoft Teams JavaScript クライアント SDK](/javascript/api/overview/msteams-client)を使用して認証を有効にします。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-113">Use the [Microsoft Teams JavaScript client SDK](/javascript/api/overview/msteams-client) in a web content page to enable authentication.</span></span> <span data-ttu-id="b3d9a-114">認証を有効にした後、コンテンツ ページをタブ、構成ページ、またはタスク モジュールに埋め込みます。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-114">After enabling authentication, embed the content page in a tab, a configuration page, or a task module.</span></span> <span data-ttu-id="b3d9a-115">Web ベース認証フローの詳細については、以下を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-115">For more information on web-based authentication flow, see:</span></span>

* <span data-ttu-id="b3d9a-116">[スレッド ボットに認証Teams、](~/bots/how-to/authentication/add-authentication.md)会話型ボットで Web ベースの認証フローを使用する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-116">[Add authentication to the Teams bot](~/bots/how-to/authentication/add-authentication.md) describes how to use web-based authentication flow with a conversational bot.</span></span>
* <span data-ttu-id="b3d9a-117">[タブでの認証フロー](~/tabs/how-to/authentication/auth-flow-tab.md)では、Teams でのタブ認証の仕組みを説明しています。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-117">[Authentication flow in tabs](~/tabs/how-to/authentication/auth-flow-tab.md) describes how tab authentication works in Teams.</span></span> <span data-ttu-id="b3d9a-118">これは、タブに使用される一般的な Web ベース認証フローを示しています。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-118">This shows a typical web-based authentication flow used for tabs.</span></span>
* <span data-ttu-id="b3d9a-119">[タブ内の AAD 認証では](~/tabs/how-to/authentication/auth-tab-AAD.md)、アプリ内のタブ内から AAD に接続するTeams。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-119">[AAD authentication in tabs](~/tabs/how-to/authentication/auth-tab-AAD.md) describes how to connect to AAD from within a tab in the app in Teams.</span></span>
* <span data-ttu-id="b3d9a-120">[サイレント認証 AAD は、AAD](~/tabs/how-to/authentication/auth-silent-AAD.md) を使用してアプリのサインインまたは同意のプロンプトを減らす方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-120">[Silent authentication AAD](~/tabs/how-to/authentication/auth-silent-AAD.md) describes how to reduce sign-in or consent prompts in the app using AAD.</span></span>
* <span data-ttu-id="b3d9a-121">[.Net または C#](https://github.com/OfficeDev/microsoft-teams-sample-complete-csharp) [JavaScript または ](https://github.com/OfficeDev/microsoft-teams-sample-complete-node) Node.jsは、Web ベース認証のサンプルを提供します。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-121">[.Net or C#](https://github.com/OfficeDev/microsoft-teams-sample-complete-csharp) or [JavaScript or Node.js](https://github.com/OfficeDev/microsoft-teams-sample-complete-node) provides samples for web-based authentication.</span></span>

## <a name="the-oauthprompt-flow-for-conversational-bots"></a><span data-ttu-id="b3d9a-122">会話ボットの OAuthPrompt フロー</span><span class="sxs-lookup"><span data-stu-id="b3d9a-122">The OAuthPrompt flow for conversational bots</span></span>

<span data-ttu-id="b3d9a-123">Azure Bot Framework の OAuthPrompt で、会話ボットを使用したアプリの認証が簡単になります。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-123">The Azure Bot Framework’s OAuthPrompt makes authentication easier for apps using conversational bots.</span></span> <span data-ttu-id="b3d9a-124">Azure Bot Framework のトークン サービスを利用して、トークン キャッシュをアシストします。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-124">Use Azure Bot Framework's token service to assist with token caching.</span></span>

<span data-ttu-id="b3d9a-125">OAuthPrompt の使用の詳細については、以下を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-125">For more information on using OAuthPrompt, see:</span></span>

* <span data-ttu-id="b3d9a-126">[ボット認証フローの概要では](~/bots/how-to/authentication/auth-flow-bot.md)、アプリ内のボット内で認証がどのように機能Teams。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-126">[Bot authentication flow overview](~/bots/how-to/authentication/auth-flow-bot.md) describes how authentication works within a bot in the app in Teams.</span></span> <span data-ttu-id="b3d9a-127">これは、Web、デスクトップ アプリ、モバイル アプリのボットに使用Teams Web ベース以外の認証フローを示しています。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-127">This shows a non-web-based authentication flow used for bots on Teams web, desktop app, and mobile apps.</span></span>
* <span data-ttu-id="b3d9a-128">[ボット認証では](~/bots/how-to/authentication/add-authentication.md)、OAuth 認証をボットに追加するTeams説明します。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-128">[Bot authentication](~/bots/how-to/authentication/add-authentication.md) describes how to add OAuth authentication to the Teams bot.</span></span>

## <a name="code-sample"></a><span data-ttu-id="b3d9a-129">コード サンプル</span><span class="sxs-lookup"><span data-stu-id="b3d9a-129">Code sample</span></span>

<span data-ttu-id="b3d9a-130">ボット認証 v3 SDK サンプルを提供します。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-130">provides Bot authentication v3 SDK sample.</span></span>

| <span data-ttu-id="b3d9a-131">**サンプル名**</span><span class="sxs-lookup"><span data-stu-id="b3d9a-131">**Sample name**</span></span> | <span data-ttu-id="b3d9a-132">**説明**</span><span class="sxs-lookup"><span data-stu-id="b3d9a-132">**Description**</span></span> | <span data-ttu-id="b3d9a-133">**.NET**</span><span class="sxs-lookup"><span data-stu-id="b3d9a-133">**.NET**</span></span> | <span data-ttu-id="b3d9a-134">**Node.js**</span><span class="sxs-lookup"><span data-stu-id="b3d9a-134">**Node.js**</span></span> | <span data-ttu-id="b3d9a-135">**Python**</span><span class="sxs-lookup"><span data-stu-id="b3d9a-135">**Python**</span></span> |
|---------------|------------|------------|-------------|---------------|
| <span data-ttu-id="b3d9a-136">ボット認証</span><span class="sxs-lookup"><span data-stu-id="b3d9a-136">Bot authentication</span></span> | <span data-ttu-id="b3d9a-137">このサンプルは、ボットで認証を開始する方法を示Microsoft Teams。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-137">This sample shows how to get started with authentication in a bot for Microsoft Teams.</span></span> | [<span data-ttu-id="b3d9a-138">View</span><span class="sxs-lookup"><span data-stu-id="b3d9a-138">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/46.teams-auth) | [<span data-ttu-id="b3d9a-139">View</span><span class="sxs-lookup"><span data-stu-id="b3d9a-139">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/46.teams-auth) | [<span data-ttu-id="b3d9a-140">View</span><span class="sxs-lookup"><span data-stu-id="b3d9a-140">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/main/samples/python/46.teams-auth) |
| <span data-ttu-id="b3d9a-141">タブ、ボット、メッセージング拡張機能 (ME) SSO</span><span class="sxs-lookup"><span data-stu-id="b3d9a-141">Tab, Bot and Messaging Extension (ME) SSO</span></span> | <span data-ttu-id="b3d9a-142">このサンプルでは、Tab、Bot、ME - 検索、アクション、linkunfurl の SSO を示します。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-142">This sample shows SSO for Tab, Bot and ME - search, action, linkunfurl.</span></span> | <span data-ttu-id="b3d9a-143">利用不可</span><span class="sxs-lookup"><span data-stu-id="b3d9a-143">Not available</span></span> | [<span data-ttu-id="b3d9a-144">View</span><span class="sxs-lookup"><span data-stu-id="b3d9a-144">View</span></span>](https://github.com/OfficeDev/Microsoft-Teams-Samples/tree/main/samples/app-sso/nodejs) | <span data-ttu-id="b3d9a-145">利用不可</span><span class="sxs-lookup"><span data-stu-id="b3d9a-145">Not available</span></span> |


## <a name="configure-the-identity-provider"></a><span data-ttu-id="b3d9a-146">ID プロバイダーを構成する</span><span class="sxs-lookup"><span data-stu-id="b3d9a-146">Configure the identity provider</span></span>

<span data-ttu-id="b3d9a-147">アプリの認証フローに関係なく、ID プロバイダーがアプリと通信Teamsします。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-147">Regardless of the app's authentication flow, configure the identity provider to communicate with the Teams app.</span></span> <span data-ttu-id="b3d9a-148">ほとんどのサンプルとチュートリアルでは、主に ID プロバイダーとして AAD を使用します。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-148">Most samples and walkthroughs primarily deal with using AAD as the identity provider.</span></span> <span data-ttu-id="b3d9a-149">ただし、概念は ID プロバイダーに関係なく適用されます。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-149">The concepts however, apply regardless of the identity provider.</span></span>

<span data-ttu-id="b3d9a-150">詳細については、「ID プロバイダー [の構成」を参照してください](~/concepts/authentication/configure-identity-provider.md)。</span><span class="sxs-lookup"><span data-stu-id="b3d9a-150">For more information, see [configuring an identity provider](~/concepts/authentication/configure-identity-provider.md).</span></span>
