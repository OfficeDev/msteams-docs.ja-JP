---
title: アプリ ユーザーの認証
description: Teams での認証と、アプリでの認証の使用方法について説明します
ms.topic: conceptual
keywords: Teams 認証 OAuth SSO AAD
ms.openlocfilehash: 6ddcd8a9e847d9216b7e2dcc12733a6cd413b48e
ms.sourcegitcommit: 976e870cc925f61b76c3830ec04ba6e4bdfde32f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/27/2021
ms.locfileid: "50014293"
---
# <a name="authenticating-users-in-microsoft-teams"></a><span data-ttu-id="df51c-104">Microsoft Teams でのユーザーの認証</span><span class="sxs-lookup"><span data-stu-id="df51c-104">Authenticating users in Microsoft Teams</span></span>

> [!Note]
> <span data-ttu-id="df51c-105">モバイル クライアントでの Web ベースの認証には、Teams JavaScript SDK のバージョン 1.4.1 以降が必要です。</span><span class="sxs-lookup"><span data-stu-id="df51c-105">Web-based authentication on mobile clients requires version 1.4.1 or later of the Teams JavaScript SDK.</span></span>

<span data-ttu-id="df51c-106">アプリが Azure Active Directory で保護されたユーザー情報にアクセスしたり、Facebook や Twitter などの他のサービスからデータにアクセスしたりするには、アプリがそれらのプロバイダーとの間に信頼された接続を確立する必要があります。</span><span class="sxs-lookup"><span data-stu-id="df51c-106">In order for your app to access user information protected by Azure Active Directory, as well as access data from other services like Facebook and Twitter, your app will have to establish a trusted connection with those providers.</span></span> <span data-ttu-id="df51c-107">アプリがユーザーのスコープ内で Microsoft Graph API を使用する必要がある場合、適切な認証トークンを取得するためにユーザーを認証する必要もあります。</span><span class="sxs-lookup"><span data-stu-id="df51c-107">If your app needs to use Microsoft Graph APIs in the user scope, you'll also need to authenticate the user to retrieve the appropriate authentication tokens.</span></span>

<span data-ttu-id="df51c-108">Microsoft Teams には、アプリが利用できる 2 つの異なる認証フローがあります。</span><span class="sxs-lookup"><span data-stu-id="df51c-108">In Microsoft Teams there are two different authentication flows for your app to take advantage of.</span></span> <span data-ttu-id="df51c-109">タブ、構成ページ、タスク モジュールに埋め込まれた[コンテンツ ページ](~/tabs/how-to/create-tab-pages/content-page.md)で、従来の Web ベースの認証フローを実行できます。</span><span class="sxs-lookup"><span data-stu-id="df51c-109">You can perform a traditional web-based authentication flow in a [content page](~/tabs/how-to/create-tab-pages/content-page.md) embedded in a tab, a configuration page, or a task module.</span></span> <span data-ttu-id="df51c-110">アプリに会話ボットが含まれている場合、OAuthPrompt フロー (およびオプションの Azure Bot Framework のトークン サービス) を使用して、会話の一部としてユーザーを認証することができます。</span><span class="sxs-lookup"><span data-stu-id="df51c-110">If your app contains a conversational bot you can use the OAuthPrompt flow (and optionally the Azure Bot Framework's token service) to authenticate a user as part of a conversation.</span></span>

## <a name="web-based-authentication-flow"></a><span data-ttu-id="df51c-111">Web ベースの認証フロー</span><span class="sxs-lookup"><span data-stu-id="df51c-111">Web-based authentication flow</span></span>

<span data-ttu-id="df51c-112">[タブ](~/tabs/what-are-tabs.md)には Web ベースの認証フローを使用する必要がありますが、[会話ボット](~/bots/what-are-bots.md)や[メッセージング拡張機能](~/messaging-extensions/what-are-messaging-extensions.md)との併用を選択することもできます。</span><span class="sxs-lookup"><span data-stu-id="df51c-112">You'll need to use the web-based authentication flow for [tabs](~/tabs/what-are-tabs.md), and can choose to use it with [conversational bots](~/bots/what-are-bots.md) or [messaging extensions](~/messaging-extensions/what-are-messaging-extensions.md).</span></span> <span data-ttu-id="df51c-113">[Microsoft Teams JavaScript クライアント SDK](/javascript/api/overview/msteams-client) を Web コンテンツ ページで使用して認証を有効にし、次にそのコンテンツ ページを、タブ、構成ページ、タスク モジュールに埋め込みます。</span><span class="sxs-lookup"><span data-stu-id="df51c-113">You'll use the [Microsoft Teams JavaScript client SDK](/javascript/api/overview/msteams-client) in a web content page to enable authentication, then embed that content page in a tab, a configuration page, or a task module.</span></span> <span data-ttu-id="df51c-114">Web ベースの認証フローと会話ボットを併用する場合には、[タスク モジュールとボットを併用する](~/task-modules-and-cards/task-modules/task-modules-bots.md)必要があります。</span><span class="sxs-lookup"><span data-stu-id="df51c-114">If you want to use the web-based authentication flow with a conversational bot, you'll need to [use a task module with a bot](~/task-modules-and-cards/task-modules/task-modules-bots.md).</span></span>

* <span data-ttu-id="df51c-115">[タブでの認証フロー](~/tabs/how-to/authentication/auth-flow-tab.md)では、Teams でのタブ認証の仕組みを説明しています。</span><span class="sxs-lookup"><span data-stu-id="df51c-115">[Authentication flow in tabs](~/tabs/how-to/authentication/auth-flow-tab.md) describes how tab authentication works in Teams.</span></span> <span data-ttu-id="df51c-116">ここでは、タブに使用される一般的な Web ベースの認証フローを示しています。</span><span class="sxs-lookup"><span data-stu-id="df51c-116">This shows a typical web based authentication flow used for tabs.</span></span>
* <span data-ttu-id="df51c-117">[タブでの Azure AD 認証](~/tabs/how-to/authentication/auth-tab-AAD.md)では、Teams のアプリ内のタブから Azure Active Directory に接続する方法を説明しています。</span><span class="sxs-lookup"><span data-stu-id="df51c-117">[Azure AD authentication in tabs](~/tabs/how-to/authentication/auth-tab-AAD.md) describes how to connect to Azure Active Directory from within a tab in your app in Teams.</span></span>
* <span data-ttu-id="df51c-118">[サイレント認証 (Azure AD)](~/tabs/how-to/authentication/auth-silent-AAD.md) では、アプリ内でのサインイン/同意プロンプトを Azure Active Directory を使用して減らす方法を説明しています。</span><span class="sxs-lookup"><span data-stu-id="df51c-118">[Silent authentication (Azure AD)](~/tabs/how-to/authentication/auth-silent-AAD.md) describes how to reduce sign-in/consent prompts in your app using Azure Active Directory.</span></span>
* <span data-ttu-id="df51c-119">[dotnet/C#](https://github.com/OfficeDev/microsoft-teams-sample-complete-csharp) または [JavaScript/Node.js](https://github.com/OfficeDev/microsoft-teams-sample-complete-node) での Web ベースの認証</span><span class="sxs-lookup"><span data-stu-id="df51c-119">Web-based authentication in [dotnet/C#](https://github.com/OfficeDev/microsoft-teams-sample-complete-csharp) or [JavaScript/Node.js](https://github.com/OfficeDev/microsoft-teams-sample-complete-node)</span></span>

## <a name="the-oauthprompt-flow-for-conversational-bots"></a><span data-ttu-id="df51c-120">会話ボットの OAuthPrompt フロー</span><span class="sxs-lookup"><span data-stu-id="df51c-120">The OAuthPrompt flow for conversational bots</span></span>

<span data-ttu-id="df51c-121">Azure Bot Framework の OAuthPrompt で、会話ボットを使用したアプリの認証が簡単になります。</span><span class="sxs-lookup"><span data-stu-id="df51c-121">The Azure Bot Framework’s OAuthPrompt makes authentication easier for apps using conversational bots.</span></span> <span data-ttu-id="df51c-122">Azure Bot Framework のトークン サービスを利用して、トークン キャッシュをアシストすることもできます。</span><span class="sxs-lookup"><span data-stu-id="df51c-122">You can take advantage of Azure Bot Framework's token service to assist with token caching as well.</span></span>

<span data-ttu-id="df51c-123">OAuthPrompt の使用の詳細については、次を参照してください。</span><span class="sxs-lookup"><span data-stu-id="df51c-123">For more information on using the OAuthPrompt see:</span></span>

* <span data-ttu-id="df51c-124">[ボット認証フローの概要](~/bots/how-to/authentication/auth-flow-bot.md)では、Teams のアプリ内のボットでの認証の仕組みを説明しています。</span><span class="sxs-lookup"><span data-stu-id="df51c-124">[Bot authentication flow overview](~/bots/how-to/authentication/auth-flow-bot.md) describes how authentication works within a bot in your app in Teams.</span></span> <span data-ttu-id="df51c-125">ここでは、Teams のすべてのバージョン (Web、デスクトップ アプリ、モバイル アプリ) でボットに使用される非 Web ベースの認証フローを示しています。</span><span class="sxs-lookup"><span data-stu-id="df51c-125">This shows a non-web based authentication flow used for bots on all versions of Teams (web, desktop app, and mobile apps)</span></span>
* [<span data-ttu-id="df51c-126">ボット認証</span><span class="sxs-lookup"><span data-stu-id="df51c-126">Bot authentication</span></span>](~/bots/how-to/authentication/add-authentication.md)
* <span data-ttu-id="df51c-127">[dotnet/C#](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/46.teams-auth) または [JavaScript/Node.js](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/46.teams-auth) でのボット認証 (v3 SDK) のサンプル</span><span class="sxs-lookup"><span data-stu-id="df51c-127">Bot authentication (v3 SDK) sample in [dotnet/C#](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/46.teams-auth) or [JavaScript/Node.js](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/46.teams-auth)</span></span>

## <a name="configure-your-identity-provider"></a><span data-ttu-id="df51c-128">ID プロバイダーを構成する</span><span class="sxs-lookup"><span data-stu-id="df51c-128">Configure your identity provider</span></span>

<span data-ttu-id="df51c-129">アプリがどちらの認証フローを使用しているかにかかわらず (両方を使用している可能性もあります)、Teams アプリと通信を行うには ID プロバイダーを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="df51c-129">Regardless of which authentication flow your app is using (you might even be using both), you'll need to configure your identity provider to communicate with your Teams app.</span></span> <span data-ttu-id="df51c-130">ここで紹介するサンプルやチュートリアルの大半では、主に Azure Active Directory を ID プロバイダーとして使用しています。</span><span class="sxs-lookup"><span data-stu-id="df51c-130">The majority of the samples and walkthroughs you'll find here will deal primarily with using Azure Active Directory as your identity provider.</span></span> <span data-ttu-id="df51c-131">ただし、この概念は、どの ID プロバイダーを使用するかにかかわらず適用されます。</span><span class="sxs-lookup"><span data-stu-id="df51c-131">The concepts however apply regardless of which identity provider you'll use.</span></span>

<span data-ttu-id="df51c-132">詳細については、「[configuring an identity provider (ID プロバイダーの構成)](~/concepts/authentication/configure-identity-provider.md)」を参照してください</span><span class="sxs-lookup"><span data-stu-id="df51c-132">For more information see [configuring an identity provider](~/concepts/authentication/configure-identity-provider.md)</span></span>
