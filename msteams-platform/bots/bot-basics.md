---
title: ボット アクティビティ ハンドラー
author: clearab
description: Teams のボット アクティビティ ハンドラーについて説明します。
ms.topic: conceptual
ms.author: anclear
ms.openlocfilehash: 22f4c3f3addcf87b3fb34a1b7b3d40d2092b8a44
ms.sourcegitcommit: 79e6bccfb513d4c16a58ffc03521edcf134fa518
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/13/2021
ms.locfileid: "51696431"
---
# <a name="bot-activity-handlers"></a><span data-ttu-id="18c5e-103">ボット アクティビティ ハンドラー</span><span class="sxs-lookup"><span data-stu-id="18c5e-103">Bot activity handlers</span></span>

<span data-ttu-id="18c5e-104">このドキュメントでは、ボットの動作に[](https://aka.ms/how-bots-work)関する記事を基に、ボット フレームワークのコア[ドキュメントを参照してください](https://aka.ms/azure-bot-service-docs)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-104">This document builds on the article on [how bots work](https://aka.ms/how-bots-work) in the core [Bot Framework documentation](https://aka.ms/azure-bot-service-docs).</span></span> <span data-ttu-id="18c5e-105">Microsoft Teams 用に開発されたボットとコア ボット フレームワークの主な違いは、Teams で提供される機能です。</span><span class="sxs-lookup"><span data-stu-id="18c5e-105">The primary difference between bots developed for Microsoft Teams and the core Bot Framework is in the features provided in Teams.</span></span>

<span data-ttu-id="18c5e-106">ボットの会話ロジックを整理するには、アクティビティ ハンドラーが使用されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-106">To organize the conversational logic for your bot, an activity handler is used.</span></span> <span data-ttu-id="18c5e-107">アクティビティは、Teams アクティビティ ハンドラーとボット ロジックを使用して 2 つの方法で処理されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-107">Activities are handled in two ways using Teams activity handlers and bot logic.</span></span> <span data-ttu-id="18c5e-108">Teams アクティビティ ハンドラーは、Microsoft Teams 固有のイベントと対話のサポートを追加します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-108">The Teams activity handler adds support for Microsoft Teams-specific events and interactions.</span></span> <span data-ttu-id="18c5e-109">ボット オブジェクトには、ターンの会話的な理由またはロジックが含まれています。ターン ハンドラーが公開されます。これは、ボット アダプターからの受信アクティビティを受け入れ可能なメソッドです。</span><span class="sxs-lookup"><span data-stu-id="18c5e-109">The bot object contains the conversational reasoning or logic for a turn and exposes a turn handler, which is the method that can accept incoming activities from the bot adapter.</span></span>

## <a name="teams-activity-handlers"></a><span data-ttu-id="18c5e-110">Teams アクティビティ ハンドラー</span><span class="sxs-lookup"><span data-stu-id="18c5e-110">Teams activity handlers</span></span>

<span data-ttu-id="18c5e-111">Teams アクティビティ ハンドラーは、Microsoft Bot Framework のアクティビティ ハンドラーから派生します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-111">Teams activity handler is derived from Microsoft Bot Framework's activity handler.</span></span> <span data-ttu-id="18c5e-112">Teams 以外のアクティビティの処理を許可する前に、すべての Teams アクティビティをルーティングします。</span><span class="sxs-lookup"><span data-stu-id="18c5e-112">It routes all Teams activities before allowing any non-Teams specific activities to be handled.</span></span>

<span data-ttu-id="18c5e-113">Teams のボットがアクティビティを受信すると、アクティビティ ハンドラーにルーティングされます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-113">When a bot for Teams receives an activity, it is routed to the activity handlers.</span></span> <span data-ttu-id="18c5e-114">すべてのアクティビティは、ターン ハンドラーと呼ばれる 1 つの基本ハンドラーを介してルーティングされます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-114">All activities are routed through one base handler called the turn handler.</span></span> <span data-ttu-id="18c5e-115">ターン ハンドラーは、受信したアクティビティを管理するために必要なアクティビティ ハンドラーを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-115">The turn handler calls the required activity handler to manage any activity received.</span></span> <span data-ttu-id="18c5e-116">Teams ボットは、ボット フレームワークのクラスから派生したクラス `TeamsActivityHandler` から派生 `ActivityHandler` します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-116">The Teams bot is derived from `TeamsActivityHandler` class, which is derived from the Bot Framework's `ActivityHandler` class.</span></span>

# <a name="c"></a>[<span data-ttu-id="18c5e-117">C#</span><span class="sxs-lookup"><span data-stu-id="18c5e-117">C#</span></span>](#tab/csharp)

<span data-ttu-id="18c5e-118">ボットは、ボット フレームワークを使用して作成されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-118">Bots are created using the Bot Framework.</span></span> <span data-ttu-id="18c5e-119">ボットがメッセージ アクティビティを受信すると、ターン ハンドラーはその受信アクティビティの通知を受け取ります。</span><span class="sxs-lookup"><span data-stu-id="18c5e-119">If the bots receive a message activity, then the turn handler receives a notification of that incoming activity.</span></span> <span data-ttu-id="18c5e-120">ターン ハンドラーは、受信アクティビティをアクティビティ ハンドラーに `OnMessageActivityAsync` 送信します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-120">The turn handler then sends the incoming activity to the `OnMessageActivityAsync` activity handler.</span></span> <span data-ttu-id="18c5e-121">Teams では、この機能は変わりません。</span><span class="sxs-lookup"><span data-stu-id="18c5e-121">In Teams, this functionality remains the same.</span></span> <span data-ttu-id="18c5e-122">ボットが会話更新アクティビティを受け取った場合、ターン ハンドラーはその受信アクティビティの通知を受け取り、受信アクティビティをに送信します `OnConversationUpdateActivityAsync` 。</span><span class="sxs-lookup"><span data-stu-id="18c5e-122">If the bot receives a conversation update activity, then the turn handler receives a notification of that incoming activity and sends the incoming activity to `OnConversationUpdateActivityAsync`.</span></span> <span data-ttu-id="18c5e-123">Teams アクティビティ ハンドラーは、まず Teams 固有のイベントをチェックします。</span><span class="sxs-lookup"><span data-stu-id="18c5e-123">The Teams activity handler first checks for any Teams specific events.</span></span> <span data-ttu-id="18c5e-124">イベントが見つからない場合は、それらをボット フレームワークのアクティビティ ハンドラーに渡します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-124">If no events are found, it then passes them along to the Bot Framework's activity handler.</span></span>

<span data-ttu-id="18c5e-125">Teams アクティビティ ハンドラー クラスには、2 つの主要な Teams アクティビティ ハンドラーがあります `OnConversationUpdateActivityAsync` `OnInvokeActivityAsync` 。</span><span class="sxs-lookup"><span data-stu-id="18c5e-125">In the Teams activity handler class, there are two primary Teams activity handlers, `OnConversationUpdateActivityAsync` and `OnInvokeActivityAsync`.</span></span> <span data-ttu-id="18c5e-126">`OnConversationUpdateActivityAsync` すべての会話更新アクティビティをルーティングし、 `OnInvokeActivityAsync` すべての Teams 呼び出しアクティビティをルーティングします。</span><span class="sxs-lookup"><span data-stu-id="18c5e-126">`OnConversationUpdateActivityAsync` routes all conversation update activities and `OnInvokeActivityAsync` routes all Teams invoke activities.</span></span>

<span data-ttu-id="18c5e-127">Teams 固有のアクティビティ ハンドラーのロジックを実装するには、ボット ロジック セクションに示すように、ボット内のメソッドをオーバーライド [する必要](#bot-logic) があります。</span><span class="sxs-lookup"><span data-stu-id="18c5e-127">To implement your logic for Teams specific activity handlers, you must override the methods in your bot as shown in the [bot logic](#bot-logic) section.</span></span> <span data-ttu-id="18c5e-128">これらのハンドラーの基本実装はありません。そのため、オーバーライドに必要なロジックを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="18c5e-128">There is no base implementation for these handlers, therefore, you must add the logic that you want in your override.</span></span>

# <a name="javascript"></a>[<span data-ttu-id="18c5e-129">JavaScript</span><span class="sxs-lookup"><span data-stu-id="18c5e-129">JavaScript</span></span>](#tab/javascript)

<span data-ttu-id="18c5e-130">ボットは、ボット フレームワークを使用して作成されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-130">Bots are created using the Bot Framework.</span></span> <span data-ttu-id="18c5e-131">ボットがメッセージ アクティビティを受信すると、ターン ハンドラーはその受信アクティビティの通知を受け取ります。</span><span class="sxs-lookup"><span data-stu-id="18c5e-131">If the bots receive a message activity, then the turn handler receives a notification of that incoming activity.</span></span> <span data-ttu-id="18c5e-132">ターン ハンドラーは、受信アクティビティをアクティビティ ハンドラーに `onMessage` 送信します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-132">The turn handler then sends the incoming activity to the `onMessage` activity handler.</span></span> <span data-ttu-id="18c5e-133">Teams では、この機能は変わりません。</span><span class="sxs-lookup"><span data-stu-id="18c5e-133">In Teams, this functionality remains the same.</span></span> <span data-ttu-id="18c5e-134">ボットが会話更新アクティビティを受け取った場合、ターン ハンドラーはその受信アクティビティの通知を受け取り、受信アクティビティをに送信します `dispatchConversationUpdateActivity` 。</span><span class="sxs-lookup"><span data-stu-id="18c5e-134">If the bot receives a conversation update activity, then the turn handler receives a notification of that incoming activity and sends the incoming activity to `dispatchConversationUpdateActivity`.</span></span> <span data-ttu-id="18c5e-135">Teams アクティビティ ハンドラーは、まず Teams 固有のイベントをチェックします。</span><span class="sxs-lookup"><span data-stu-id="18c5e-135">The Teams activity handler first checks for any Teams specific events.</span></span> <span data-ttu-id="18c5e-136">イベントが見つからない場合は、それらをボット フレームワークのアクティビティ ハンドラーに渡します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-136">If no events are found, it then passes them along to the Bot Framework's activity handler.</span></span>

<span data-ttu-id="18c5e-137">Teams アクティビティ ハンドラー クラスには、2 つの主要な Teams アクティビティ ハンドラーがあります `dispatchConversationUpdateActivity` `onInvokeActivity` 。</span><span class="sxs-lookup"><span data-stu-id="18c5e-137">In the Teams activity handler class, there are two primary Teams activity handlers, `dispatchConversationUpdateActivity` and `onInvokeActivity`.</span></span> <span data-ttu-id="18c5e-138">`dispatchConversationUpdateActivity` すべての会話更新アクティビティをルーティングし、 `onInvokeActivity` すべての Teams 呼び出しアクティビティをルーティングします。</span><span class="sxs-lookup"><span data-stu-id="18c5e-138">`dispatchConversationUpdateActivity` routes all conversation update activities and `onInvokeActivity` routes all Teams invoke activities.</span></span>

<span data-ttu-id="18c5e-139">Teams 固有のアクティビティ ハンドラーのロジックを実装するには、ボット ロジック セクションに示すように、ボット内のメソッドをオーバーライド [する必要](#bot-logic) があります。</span><span class="sxs-lookup"><span data-stu-id="18c5e-139">To implement your logic for Teams specific activity handlers, you must override the methods in your bot as shown in the [bot logic](#bot-logic) section.</span></span> <span data-ttu-id="18c5e-140">これらのハンドラーのボット ロジックを定義し、最後に必ず `next()` 呼び出します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-140">Define your bot logic for these handlers, then be sure to call `next()` at the end.</span></span> <span data-ttu-id="18c5e-141">呼び出 `next()` しによって、次のハンドラーが実行されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-141">By calling `next()` you ensure that the next handler runs.</span></span>

# <a name="python"></a>[<span data-ttu-id="18c5e-142">Python</span><span class="sxs-lookup"><span data-stu-id="18c5e-142">Python</span></span>](#tab/python)

<span data-ttu-id="18c5e-143">ボットは、ボット フレームワークを使用して作成されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-143">Bots are created using the Bot Framework.</span></span> <span data-ttu-id="18c5e-144">ボットがメッセージ アクティビティを受信すると、ターン ハンドラーはその受信アクティビティの通知を受け取ります。</span><span class="sxs-lookup"><span data-stu-id="18c5e-144">If the bots receive a message activity, then the turn handler receives a notification of that incoming activity.</span></span> <span data-ttu-id="18c5e-145">ターン ハンドラーは、受信アクティビティをアクティビティ ハンドラーに `on_message_activity` 送信します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-145">The turn handler then sends the incoming activity to the `on_message_activity` activity handler.</span></span> <span data-ttu-id="18c5e-146">Teams では、この機能は変わりません。</span><span class="sxs-lookup"><span data-stu-id="18c5e-146">In Teams, this functionality remains the same.</span></span> <span data-ttu-id="18c5e-147">ボットが会話更新アクティビティを受け取った場合、ターン ハンドラーはその受信アクティビティの通知を受け取り、受信アクティビティをに送信します `on_conversation_update_activity` 。</span><span class="sxs-lookup"><span data-stu-id="18c5e-147">If the bot receives a conversation update activity, then the turn handler receives a notification of that incoming activity and sends the incoming activity to `on_conversation_update_activity`.</span></span> <span data-ttu-id="18c5e-148">Teams アクティビティ ハンドラーは、まず Teams 固有のイベントをチェックします。</span><span class="sxs-lookup"><span data-stu-id="18c5e-148">The Teams activity handler first checks for any Teams specific events.</span></span> <span data-ttu-id="18c5e-149">イベントが見つからない場合は、それらをボット フレームワークのアクティビティ ハンドラーに渡します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-149">If no events are found, it then passes them along to the Bot Framework's activity handler.</span></span>

<span data-ttu-id="18c5e-150">Teams アクティビティ ハンドラー クラスには、2 つの主要な Teams アクティビティ ハンドラーがあります `on_conversation_update_activity` `on_invoke_activity` 。</span><span class="sxs-lookup"><span data-stu-id="18c5e-150">In the Teams activity handler class, there are two primary Teams activity handlers, `on_conversation_update_activity` and `on_invoke_activity`.</span></span> <span data-ttu-id="18c5e-151">`on_conversation_update_activity` すべての会話更新アクティビティをルーティングし、 `on_invoke_activity` すべての Teams 呼び出しアクティビティをルーティングします。</span><span class="sxs-lookup"><span data-stu-id="18c5e-151">`on_conversation_update_activity` routes all conversation update activities and `on_invoke_activity` routes all Teams invoke activities.</span></span>

<span data-ttu-id="18c5e-152">Teams 固有のアクティビティ ハンドラーのロジックを実装するには、ボット ロジック セクションに示すように、ボット内のメソッドをオーバーライド [する必要](#bot-logic) があります。</span><span class="sxs-lookup"><span data-stu-id="18c5e-152">To implement your logic for Teams specific activity handlers, you must override the methods in your bot as shown in the [bot logic](#bot-logic) section.</span></span> <span data-ttu-id="18c5e-153">これらのハンドラーの基本実装はありません。そのため、オーバーライドに必要なロジックを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="18c5e-153">There is no base implementation for these handlers, therefore, you must add the logic that you want in your override.</span></span>

---

## <a name="bot-logic"></a><span data-ttu-id="18c5e-154">ボット ロジック</span><span class="sxs-lookup"><span data-stu-id="18c5e-154">Bot logic</span></span>

<span data-ttu-id="18c5e-155">ボット ロジックは、1 つ以上のボット チャネルからの受信アクティビティを処理し、応答して送信アクティビティを生成します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-155">The bot logic processes incoming activities from one or more of your bot channels and in response generates outgoing activities.</span></span> <span data-ttu-id="18c5e-156">これは、Teams アクティビティ ハンドラー クラスから派生したボットに対して引き続き当てはめ、最初に Teams アクティビティをチェックします。</span><span class="sxs-lookup"><span data-stu-id="18c5e-156">This is still true of bots derived from the Teams activity handler class, which first checks for Teams activities.</span></span> <span data-ttu-id="18c5e-157">Teams アクティビティを確認した後、他のすべてのアクティビティをボット フレームワークのアクティビティ ハンドラーに渡します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-157">After checking for Teams activities, it passes all other activities to the Bot Framework's activity handler.</span></span>

# <a name="c"></a>[<span data-ttu-id="18c5e-158">C#</span><span class="sxs-lookup"><span data-stu-id="18c5e-158">C#</span></span>](#tab/csharp)

#### <a name="core-bot-framework-handlers"></a><span data-ttu-id="18c5e-159">Core Bot Framework ハンドラー</span><span class="sxs-lookup"><span data-stu-id="18c5e-159">Core Bot Framework handlers</span></span>

>[!NOTE]
> <span data-ttu-id="18c5e-160">追加および削除 **されたメンバー** の **アクティビティ** を除き、このセクションで説明するアクティビティ ハンドラーはすべて、Teams 以外のボットと同様に機能し続ける。</span><span class="sxs-lookup"><span data-stu-id="18c5e-160">Except for the **added** and **removed** members' activities, all the activity handlers described in this section continue to work as they do with a non-Teams bot.</span></span>

<span data-ttu-id="18c5e-161">アクティビティ ハンドラーは、メッセージ スレッドの代わりに新しいメンバーがチームに追加されるチームのコンテキストでは異なります。</span><span class="sxs-lookup"><span data-stu-id="18c5e-161">Activity handlers are different in context of a team, where a new member is added to the team instead of a message thread.</span></span>

<span data-ttu-id="18c5e-162">定義されているハンドラーの一覧には `ActivityHandler` 、次のものが含まれます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-162">The list of handlers defined in `ActivityHandler` include the following:</span></span>

| <span data-ttu-id="18c5e-163">イベント</span><span class="sxs-lookup"><span data-stu-id="18c5e-163">Event</span></span> | <span data-ttu-id="18c5e-164">ハンドラー</span><span class="sxs-lookup"><span data-stu-id="18c5e-164">Handler</span></span> | <span data-ttu-id="18c5e-165">説明</span><span class="sxs-lookup"><span data-stu-id="18c5e-165">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="18c5e-166">受信したアクティビティの種類</span><span class="sxs-lookup"><span data-stu-id="18c5e-166">Any activity type received</span></span> | `OnTurnAsync` | <span data-ttu-id="18c5e-167">このメソッドは、受信したアクティビティの種類に基づいて、他のハンドラーのいずれかを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-167">This method calls one of the other handlers, based on the type of activity received.</span></span> |
| <span data-ttu-id="18c5e-168">受信したメッセージ アクティビティ</span><span class="sxs-lookup"><span data-stu-id="18c5e-168">Message activity received</span></span> | `OnMessageActivityAsync` | <span data-ttu-id="18c5e-169">このメソッドは、アクティビティを処理するためにオーバーライド `Message` できます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-169">This method can be overridden to handle a `Message` activity.</span></span> |
| <span data-ttu-id="18c5e-170">会話の更新アクティビティの受信</span><span class="sxs-lookup"><span data-stu-id="18c5e-170">Conversation update activity received</span></span> | `OnConversationUpdateActivityAsync` | <span data-ttu-id="18c5e-171">このメソッドは、ボット以外のメンバーがアクティビティで会話に参加または離された場合にハンドラーを呼び出 `ConversationUpdate` します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-171">This method calls a handler if members other than the bot joined or left the conversation, on a `ConversationUpdate` activity.</span></span> |
| <span data-ttu-id="18c5e-172">ボット以外のメンバーが会話に参加しました</span><span class="sxs-lookup"><span data-stu-id="18c5e-172">Non-bot members joined the conversation</span></span> | `OnMembersAddedAsync` | <span data-ttu-id="18c5e-173">このメソッドは、会話に参加するメンバーを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-173">This method can be overridden to handle members joining a conversation.</span></span> |
| <span data-ttu-id="18c5e-174">ボット以外のメンバーが会話を離した</span><span class="sxs-lookup"><span data-stu-id="18c5e-174">Non-bot members left the conversation</span></span> | `OnMembersRemovedAsync` | <span data-ttu-id="18c5e-175">このメソッドは、会話を離れるメンバーを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-175">This method can be overridden to handle members leaving a conversation.</span></span> |
| <span data-ttu-id="18c5e-176">受信したイベント アクティビティ</span><span class="sxs-lookup"><span data-stu-id="18c5e-176">Event activity received</span></span> | `OnEventActivityAsync` | <span data-ttu-id="18c5e-177">このメソッドは、アクティビティのイベントの種類に固有のハンドラーを呼び出 `Event` します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-177">This method calls a handler specific to the event type, on an `Event` activity.</span></span> |
| <span data-ttu-id="18c5e-178">受信したトークン応答イベント アクティビティ</span><span class="sxs-lookup"><span data-stu-id="18c5e-178">Token-response event activity received</span></span> | `OnTokenResponseEventAsync` | <span data-ttu-id="18c5e-179">このメソッドは、トークン応答イベントを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-179">This method can be overridden to handle token response events.</span></span> |
| <span data-ttu-id="18c5e-180">トークン以外の応答イベント アクティビティの受信</span><span class="sxs-lookup"><span data-stu-id="18c5e-180">Non-token-response event activity received</span></span> | `OnEventAsync` | <span data-ttu-id="18c5e-181">このメソッドは、他の種類のイベントを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-181">This method can be overridden to handle other types of events.</span></span> |
| <span data-ttu-id="18c5e-182">受信したその他のアクティビティの種類</span><span class="sxs-lookup"><span data-stu-id="18c5e-182">Other activity type received</span></span> | `OnUnrecognizedActivityTypeAsync` | <span data-ttu-id="18c5e-183">このメソッドは、それ以外の場合は未処理のアクティビティの種類を処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-183">This method can be overridden to handle any activity type otherwise unhandled.</span></span> |

#### <a name="teams-specific-activity-handlers"></a><span data-ttu-id="18c5e-184">Teams 固有のアクティビティ ハンドラー</span><span class="sxs-lookup"><span data-stu-id="18c5e-184">Teams specific activity handlers</span></span>

<span data-ttu-id="18c5e-185">コア Bot Framework ハンドラー セクションのハンドラーの一覧を拡張して `TeamsActivityHandler` 、次の項目を含める。</span><span class="sxs-lookup"><span data-stu-id="18c5e-185">The `TeamsActivityHandler` extends the list of handlers in the core Bot Framework handlers section to include the following:</span></span>

| <span data-ttu-id="18c5e-186">イベント</span><span class="sxs-lookup"><span data-stu-id="18c5e-186">Event</span></span> | <span data-ttu-id="18c5e-187">ハンドラー</span><span class="sxs-lookup"><span data-stu-id="18c5e-187">Handler</span></span> | <span data-ttu-id="18c5e-188">説明</span><span class="sxs-lookup"><span data-stu-id="18c5e-188">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="18c5e-189">channelCreated</span><span class="sxs-lookup"><span data-stu-id="18c5e-189">channelCreated</span></span> | `OnTeamsChannelCreatedAsync` | <span data-ttu-id="18c5e-190">このメソッドは、作成中の Teams チャネルを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-190">This method can be overridden to handle a Teams channel being created.</span></span> <span data-ttu-id="18c5e-191">詳細については、「会話更新イベント[で作成されたチャネル](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created)[」を参照してください](https://aka.ms/azure-bot-subscribe-to-conversation-events)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-191">For more information, see [channel created](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="18c5e-192">channelDeleted</span><span class="sxs-lookup"><span data-stu-id="18c5e-192">channelDeleted</span></span> | `OnTeamsChannelDeletedAsync` | <span data-ttu-id="18c5e-193">このメソッドは、削除する Teams チャネルを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-193">This method can be overridden to handle a Teams channel being deleted.</span></span> <span data-ttu-id="18c5e-194">詳細については、「会話更新イベント[で削除されたチャネル](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted)[」を参照してください](https://aka.ms/azure-bot-subscribe-to-conversation-events)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-194">For more information, see [channel deleted](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="18c5e-195">channelRenamed</span><span class="sxs-lookup"><span data-stu-id="18c5e-195">channelRenamed</span></span> | `OnTeamsChannelRenamedAsync` | <span data-ttu-id="18c5e-196">このメソッドは、名前を変更する Teams チャネルを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-196">This method can be overridden to handle a Teams channel being renamed.</span></span> <span data-ttu-id="18c5e-197">詳細については、「会話の更新イベント[でチャネルの名前が変更](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed)[された」を参照してください](https://aka.ms/azure-bot-subscribe-to-conversation-events)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-197">For more information, see [channel renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="18c5e-198">teamRenamed</span><span class="sxs-lookup"><span data-stu-id="18c5e-198">teamRenamed</span></span> | `OnTeamsTeamRenamedAsync` | <span data-ttu-id="18c5e-199">`return Task.CompletedTask;` このメソッドは、名前を変更する Teams チームを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-199">`return Task.CompletedTask;` This method can be overridden to handle a Teams team being renamed.</span></span> <span data-ttu-id="18c5e-200">詳細については、「会話の更新イベント [でチームの名前を](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) 変更 [する」を参照してください](https://aka.ms/azure-bot-subscribe-to-conversation-events)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-200">For more information, see [team renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="18c5e-201">MembersAdded</span><span class="sxs-lookup"><span data-stu-id="18c5e-201">MembersAdded</span></span> | `OnTeamsMembersAddedAsync` | <span data-ttu-id="18c5e-202">このメソッドは、 で `OnMembersAddedAsync` メソッドを呼び出します `ActivityHandler` 。</span><span class="sxs-lookup"><span data-stu-id="18c5e-202">This method calls the `OnMembersAddedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="18c5e-203">このメソッドは、チームに参加しているメンバーを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-203">The method can be overridden to handle members joining a team.</span></span> <span data-ttu-id="18c5e-204">詳細については、「会話の更新 [イベントに追加されたチーム メンバー](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-added) [」を参照してください](https://aka.ms/azure-bot-subscribe-to-conversation-events)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-204">For more information, see [team members added](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-added) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="18c5e-205">MembersRemoved</span><span class="sxs-lookup"><span data-stu-id="18c5e-205">MembersRemoved</span></span> | `OnTeamsMembersRemovedAsync` | <span data-ttu-id="18c5e-206">このメソッドは、 で `OnMembersRemovedAsync` メソッドを呼び出します `ActivityHandler` 。</span><span class="sxs-lookup"><span data-stu-id="18c5e-206">This method calls the `OnMembersRemovedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="18c5e-207">このメソッドは、チームを離れるメンバーを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-207">The method can be overridden to handle members leaving a team.</span></span> <span data-ttu-id="18c5e-208">詳細については、「会話更新イベント [で削除されたチーム メンバー](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-removed) [」を参照してください](https://aka.ms/azure-bot-subscribe-to-conversation-events)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-208">For more information, see [team members removed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-removed) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|

#### <a name="teams-invoke-activities"></a><span data-ttu-id="18c5e-209">Teams がアクティビティを呼び出す</span><span class="sxs-lookup"><span data-stu-id="18c5e-209">Teams invoke activities</span></span>

<span data-ttu-id="18c5e-210">Teams アクティビティ ハンドラーから呼び出される Teams アクティビティ ハンドラーの `OnInvokeActivityAsync` 一覧には、次のものが含まれます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-210">The list of Teams activity handlers called from the `OnInvokeActivityAsync` Teams activity handler include the following:</span></span>

| <span data-ttu-id="18c5e-211">呼び出しの種類</span><span class="sxs-lookup"><span data-stu-id="18c5e-211">Invoke types</span></span>                    | <span data-ttu-id="18c5e-212">ハンドラー</span><span class="sxs-lookup"><span data-stu-id="18c5e-212">Handler</span></span>                              | <span data-ttu-id="18c5e-213">説明</span><span class="sxs-lookup"><span data-stu-id="18c5e-213">Description</span></span>                                                  |
| :-----------------------------  | :----------------------------------- | :----------------------------------------------------------- |
| <span data-ttu-id="18c5e-214">CardAction.Invoke</span><span class="sxs-lookup"><span data-stu-id="18c5e-214">CardAction.Invoke</span></span>               | `OnTeamsCardActionInvokeAsync`       | <span data-ttu-id="18c5e-215">このメソッドは、カード アクションの呼び出しアクティビティがコネクタから受信されると呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-215">This method is invoked when a card action invoke activity is received from the connector.</span></span> |
| <span data-ttu-id="18c5e-216">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="18c5e-216">fileConsent/invoke</span></span>              | `OnTeamsFileConsentAcceptAsync`      | <span data-ttu-id="18c5e-217">このメソッドは、ユーザーがファイル同意カードを受け入れるときに呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-217">This method is invoked when a file consent card is accepted by the user.</span></span> |
| <span data-ttu-id="18c5e-218">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="18c5e-218">fileConsent/invoke</span></span>              | `OnTeamsFileConsentAsync`            | <span data-ttu-id="18c5e-219">このメソッドは、ファイル同意カードのアクティビティがコネクタから受信されると呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-219">This method is invoked when a file consent card activity is received from the connector.</span></span> |
| <span data-ttu-id="18c5e-220">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="18c5e-220">fileConsent/invoke</span></span>              | `OnTeamsFileConsentDeclineAsync`     | <span data-ttu-id="18c5e-221">このメソッドは、ファイル同意カードがユーザーによって拒否された場合に呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-221">This method is invoked when a file consent card is declined by the user.</span></span> |
| <span data-ttu-id="18c5e-222">actionableMessage/executeAction</span><span class="sxs-lookup"><span data-stu-id="18c5e-222">actionableMessage/executeAction</span></span> | `OnTeamsO365ConnectorCardActionAsync` | <span data-ttu-id="18c5e-223">このメソッドは、O365 コネクタ カードのアクション アクティビティがコネクタから受信されると呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-223">This method is invoked when a O365 connector card action activity is received from the connector.</span></span> |
| <span data-ttu-id="18c5e-224">signin/verifyState</span><span class="sxs-lookup"><span data-stu-id="18c5e-224">signin/verifyState</span></span>              | `OnTeamsSigninVerifyStateAsync`      | <span data-ttu-id="18c5e-225">このメソッドは、signIn verify state activity がコネクタから受信されると呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-225">This method is invoked when a signIn verify state activity is received from the connector.</span></span> |
| <span data-ttu-id="18c5e-226">task/fetch</span><span class="sxs-lookup"><span data-stu-id="18c5e-226">task/fetch</span></span>                      | `OnTeamsTaskModuleFetchAsync`        | <span data-ttu-id="18c5e-227">このメソッドは、派生クラスでオーバーライドして、タスク モジュールのフェッチ時にロジックを提供できます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-227">This method can be overridden in a derived class to provide logic when a task module is fetched.</span></span> |
| <span data-ttu-id="18c5e-228">task/submit</span><span class="sxs-lookup"><span data-stu-id="18c5e-228">task/submit</span></span>                     | `OnTeamsTaskModuleSubmitAsync`       | <span data-ttu-id="18c5e-229">このメソッドは、タスク モジュールの送信時にロジックを提供するために派生クラスでオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-229">This method can be overridden in a derived class to provide logic when a task module is submitted.</span></span> |

<span data-ttu-id="18c5e-230">このセクションに記載されている呼び出しアクティビティは、Teams の会話型ボット用です。</span><span class="sxs-lookup"><span data-stu-id="18c5e-230">The invoke activities listed in this section are for conversational bots in Teams.</span></span> <span data-ttu-id="18c5e-231">ボット フレームワーク SDK では、メッセージング拡張機能に固有の呼び出しアクティビティもサポートしています。</span><span class="sxs-lookup"><span data-stu-id="18c5e-231">The Bot Framework SDK also supports invoke activities specific to messaging extensions.</span></span> <span data-ttu-id="18c5e-232">詳細については、「メッセージング拡張機能 [について」を参照してください](https://aka.ms/azure-bot-what-are-messaging-extensions)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-232">For more information, see [what are messaging extensions](https://aka.ms/azure-bot-what-are-messaging-extensions).</span></span>

# <a name="javascript"></a>[<span data-ttu-id="18c5e-233">JavaScript</span><span class="sxs-lookup"><span data-stu-id="18c5e-233">JavaScript</span></span>](#tab/javascript)

#### <a name="core-bot-framework-handlers"></a><span data-ttu-id="18c5e-234">Core Bot Framework ハンドラー</span><span class="sxs-lookup"><span data-stu-id="18c5e-234">Core Bot Framework handlers</span></span>

>[!NOTE]
> <span data-ttu-id="18c5e-235">追加および削除 **されたメンバー** の **アクティビティ** を除き、このセクションで説明するアクティビティ ハンドラーはすべて、Teams 以外のボットと同様に機能し続ける。</span><span class="sxs-lookup"><span data-stu-id="18c5e-235">Except for the **added** and **removed** members' activities, all the activity handlers described in this section continue to work as they do with a non-Teams bot.</span></span>

<span data-ttu-id="18c5e-236">アクティビティ ハンドラーは、メッセージ スレッドの代わりに新しいメンバーがチームに追加されるチームのコンテキストでは異なります。</span><span class="sxs-lookup"><span data-stu-id="18c5e-236">Activity handlers are different in context of a team, where the new member is added to the team instead of a message thread.</span></span>

<span data-ttu-id="18c5e-237">定義されているハンドラーの一覧には `ActivityHandler` 、次のものが含まれます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-237">The list of handlers defined in `ActivityHandler` include the following:</span></span>

| <span data-ttu-id="18c5e-238">イベント</span><span class="sxs-lookup"><span data-stu-id="18c5e-238">Event</span></span> | <span data-ttu-id="18c5e-239">ハンドラー</span><span class="sxs-lookup"><span data-stu-id="18c5e-239">Handler</span></span> | <span data-ttu-id="18c5e-240">説明</span><span class="sxs-lookup"><span data-stu-id="18c5e-240">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="18c5e-241">受信したアクティビティの種類</span><span class="sxs-lookup"><span data-stu-id="18c5e-241">Any activity type received</span></span> | `onTurn` | <span data-ttu-id="18c5e-242">このメソッドは、受信したアクティビティの種類に基づいて、他のハンドラーのいずれかを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-242">This method calls one of the other handlers, based on the type of activity received.</span></span> |
| <span data-ttu-id="18c5e-243">受信したメッセージ アクティビティ</span><span class="sxs-lookup"><span data-stu-id="18c5e-243">Message activity received</span></span> | `onMessage` | <span data-ttu-id="18c5e-244">このメソッドは、アクティビティの処理に役立 `Message` ちます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-244">This method helps to handle a `Message` activity.</span></span> |
| <span data-ttu-id="18c5e-245">会話の更新アクティビティの受信</span><span class="sxs-lookup"><span data-stu-id="18c5e-245">Conversation update activity received</span></span> | `onConversationUpdate` | <span data-ttu-id="18c5e-246">このメソッドは、ボット以外のメンバーがアクティビティで会話に参加または離された場合にハンドラーを呼び出 `ConversationUpdate` します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-246">This method calls a handler if members other than the bot joined or left the conversation, on a `ConversationUpdate` activity.</span></span> |
| <span data-ttu-id="18c5e-247">ボット以外のメンバーが会話に参加しました</span><span class="sxs-lookup"><span data-stu-id="18c5e-247">Non-bot members joined the conversation</span></span> | `onMembersAdded` | <span data-ttu-id="18c5e-248">このメソッドは、会話に参加するメンバーを処理するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-248">This method helps to handle members joining a conversation.</span></span> |
| <span data-ttu-id="18c5e-249">ボット以外のメンバーが会話を離した</span><span class="sxs-lookup"><span data-stu-id="18c5e-249">Non-bot members left the conversation</span></span> | `onMembersRemoved` | <span data-ttu-id="18c5e-250">このメソッドは、会話を離れるメンバーを処理するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-250">This method helps to handle members leaving a conversation.</span></span> |
| <span data-ttu-id="18c5e-251">受信したイベント アクティビティ</span><span class="sxs-lookup"><span data-stu-id="18c5e-251">Event activity received</span></span> | `onEvent` | <span data-ttu-id="18c5e-252">このメソッドは、アクティビティのイベントの種類に固有のハンドラーを呼び出 `Event` します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-252">This method calls a handler specific to the event type, on an `Event` activity.</span></span> |
| <span data-ttu-id="18c5e-253">受信したトークン応答イベント アクティビティ</span><span class="sxs-lookup"><span data-stu-id="18c5e-253">Token-response event activity received</span></span> | `onTokenResponseEvent` | <span data-ttu-id="18c5e-254">このメソッドは、トークン応答イベントの処理に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-254">This method helps to handle token response events.</span></span> |
| <span data-ttu-id="18c5e-255">受信したその他のアクティビティの種類</span><span class="sxs-lookup"><span data-stu-id="18c5e-255">Other activity type received</span></span> | `onUnrecognizedActivityType` | <span data-ttu-id="18c5e-256">このメソッドは、それ以外の場合は未処理のアクティビティの種類を処理するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-256">This method helps to handle any activity type otherwise unhandled.</span></span> |

#### <a name="teams-specific-activity-handlers"></a><span data-ttu-id="18c5e-257">Teams 固有のアクティビティ ハンドラー</span><span class="sxs-lookup"><span data-stu-id="18c5e-257">Teams specific activity handlers</span></span>

<span data-ttu-id="18c5e-258">コア Bot Framework ハンドラー セクションのハンドラーの一覧を拡張して `TeamsActivityHandler` 、次の項目を含める。</span><span class="sxs-lookup"><span data-stu-id="18c5e-258">The `TeamsActivityHandler` extends the list of handlers in the core Bot Framework handlers section to include the following:</span></span>

| <span data-ttu-id="18c5e-259">イベント</span><span class="sxs-lookup"><span data-stu-id="18c5e-259">Event</span></span> | <span data-ttu-id="18c5e-260">ハンドラー</span><span class="sxs-lookup"><span data-stu-id="18c5e-260">Handler</span></span> | <span data-ttu-id="18c5e-261">説明</span><span class="sxs-lookup"><span data-stu-id="18c5e-261">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="18c5e-262">channelCreated</span><span class="sxs-lookup"><span data-stu-id="18c5e-262">channelCreated</span></span> | `OnTeamsChannelCreatedAsync` | <span data-ttu-id="18c5e-263">このメソッドは、作成中の Teams チャネルを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-263">This method can be overridden to handle a Teams channel being created.</span></span> <span data-ttu-id="18c5e-264">詳細については、「会話更新イベント[で作成されたチャネル](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created)[」を参照してください](https://aka.ms/azure-bot-subscribe-to-conversation-events)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-264">For more information, see [channel created](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="18c5e-265">channelDeleted</span><span class="sxs-lookup"><span data-stu-id="18c5e-265">channelDeleted</span></span> | `OnTeamsChannelDeletedAsync` | <span data-ttu-id="18c5e-266">このメソッドは、削除する Teams チャネルを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-266">This method can be overridden to handle a Teams channel being deleted.</span></span> <span data-ttu-id="18c5e-267">詳細については、「会話更新イベント[で削除されたチャネル](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted)[」を参照してください](https://aka.ms/azure-bot-subscribe-to-conversation-events)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-267">For more information, see [channel deleted](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="18c5e-268">channelRenamed</span><span class="sxs-lookup"><span data-stu-id="18c5e-268">channelRenamed</span></span> | `OnTeamsChannelRenamedAsync` | <span data-ttu-id="18c5e-269">このメソッドは、名前を変更する Teams チャネルを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-269">This method can be overridden to handle a Teams channel being renamed.</span></span> <span data-ttu-id="18c5e-270">詳細については、「会話の更新イベント[でチャネルの名前が変更](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed)[された」を参照してください](https://aka.ms/azure-bot-subscribe-to-conversation-events)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-270">For more information, see [channel renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="18c5e-271">teamRenamed</span><span class="sxs-lookup"><span data-stu-id="18c5e-271">teamRenamed</span></span> | `OnTeamsTeamRenamedAsync` | <span data-ttu-id="18c5e-272">`return Task.CompletedTask;` このメソッドは、名前を変更する Teams チームを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-272">`return Task.CompletedTask;` This method can be overridden to handle a Teams team being renamed.</span></span> <span data-ttu-id="18c5e-273">詳細については、「会話の更新イベント [でチームの名前を](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) 変更 [する」を参照してください](https://aka.ms/azure-bot-subscribe-to-conversation-events)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-273">For more information, see [team renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="18c5e-274">MembersAdded</span><span class="sxs-lookup"><span data-stu-id="18c5e-274">MembersAdded</span></span> | `OnTeamsMembersAddedAsync` | <span data-ttu-id="18c5e-275">このメソッドは、 で `OnMembersAddedAsync` メソッドを呼び出します `ActivityHandler` 。</span><span class="sxs-lookup"><span data-stu-id="18c5e-275">This method calls the `OnMembersAddedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="18c5e-276">このメソッドは、チームに参加しているメンバーを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-276">The method can be overridden to handle members joining a team.</span></span> <span data-ttu-id="18c5e-277">詳細については、「会話の更新 [イベントに追加されたチーム メンバー](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-added) [」を参照してください](https://aka.ms/azure-bot-subscribe-to-conversation-events)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-277">For more information, see [team members added](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-added) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="18c5e-278">MembersRemoved</span><span class="sxs-lookup"><span data-stu-id="18c5e-278">MembersRemoved</span></span> | `OnTeamsMembersRemovedAsync` | <span data-ttu-id="18c5e-279">このメソッドは、 で `OnMembersRemovedAsync` メソッドを呼び出します `ActivityHandler` 。</span><span class="sxs-lookup"><span data-stu-id="18c5e-279">This method calls the `OnMembersRemovedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="18c5e-280">このメソッドは、チームを離れるメンバーを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-280">The method can be overridden to handle members leaving a team.</span></span> <span data-ttu-id="18c5e-281">詳細については、「会話更新イベント [で削除されたチーム メンバー](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-removed) [」を参照してください](https://aka.ms/azure-bot-subscribe-to-conversation-events)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-281">For more information, see [team members removed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-removed) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |

#### <a name="teams-invoke-activities"></a><span data-ttu-id="18c5e-282">Teams がアクティビティを呼び出す</span><span class="sxs-lookup"><span data-stu-id="18c5e-282">Teams invoke activities</span></span>

<span data-ttu-id="18c5e-283">Teams アクティビティ ハンドラーから呼び出される Teams アクティビティ ハンドラーの `onInvokeActivity` 一覧には、次のものが含まれます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-283">The list of Teams activity handlers called from the `onInvokeActivity` Teams activity handler include the following:</span></span>

| <span data-ttu-id="18c5e-284">呼び出しの種類</span><span class="sxs-lookup"><span data-stu-id="18c5e-284">Invoke types</span></span>                    | <span data-ttu-id="18c5e-285">ハンドラー</span><span class="sxs-lookup"><span data-stu-id="18c5e-285">Handler</span></span>                              | <span data-ttu-id="18c5e-286">説明</span><span class="sxs-lookup"><span data-stu-id="18c5e-286">Description</span></span>                                                  |
| :-----------------------------  | :----------------------------------- | :----------------------------------------------------------- |
| <span data-ttu-id="18c5e-287">CardAction.Invoke</span><span class="sxs-lookup"><span data-stu-id="18c5e-287">CardAction.Invoke</span></span>               | `handleTeamsCardActionInvoke`       | <span data-ttu-id="18c5e-288">このメソッドは、カード アクションの呼び出しアクティビティがコネクタから受信されると呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-288">This method is invoked when a card action invoke activity is received from the connector.</span></span> |
| <span data-ttu-id="18c5e-289">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="18c5e-289">fileConsent/invoke</span></span>              | `handleTeamsFileConsentAccept`      | <span data-ttu-id="18c5e-290">このメソッドは、ユーザーがファイル同意カードを受け入れるときに呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-290">This method is invoked when a file consent card is accepted by the user.</span></span> |
| <span data-ttu-id="18c5e-291">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="18c5e-291">fileConsent/invoke</span></span>              | `handleTeamsFileConsent`            | <span data-ttu-id="18c5e-292">このメソッドは、ファイル同意カードのアクティビティがコネクタから受信されると呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-292">This method is invoked when a file consent card activity is received from the connector.</span></span> |
| <span data-ttu-id="18c5e-293">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="18c5e-293">fileConsent/invoke</span></span>              | `handleTeamsFileConsentDecline`     | <span data-ttu-id="18c5e-294">このメソッドは、ファイル同意カードがユーザーによって拒否された場合に呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-294">This method is invoked when a file consent card is declined by the user.</span></span> |
| <span data-ttu-id="18c5e-295">actionableMessage/executeAction</span><span class="sxs-lookup"><span data-stu-id="18c5e-295">actionableMessage/executeAction</span></span> | `handleTeamsO365ConnectorCardAction` | <span data-ttu-id="18c5e-296">このメソッドは、O365 コネクタ カードのアクション アクティビティがコネクタから受信されると呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-296">This method is invoked when a O365 connector card action activity is received from the connector.</span></span> |
| <span data-ttu-id="18c5e-297">signin/verifyState</span><span class="sxs-lookup"><span data-stu-id="18c5e-297">signin/verifyState</span></span>              | `handleTeamsSigninVerifyState`      | <span data-ttu-id="18c5e-298">このメソッドは、signIn verify state activity がコネクタから受信されると呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-298">This method is invoked when a signIn verify state activity is received from the connector.</span></span> |
| <span data-ttu-id="18c5e-299">task/fetch</span><span class="sxs-lookup"><span data-stu-id="18c5e-299">task/fetch</span></span>                      | `handleTeamsTaskModuleFetch`        | <span data-ttu-id="18c5e-300">このメソッドは、派生クラスでオーバーライドして、タスク モジュールのフェッチ時にロジックを提供できます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-300">This method can be overridden in a derived class to provide logic when a task module is fetched.</span></span> |
| <span data-ttu-id="18c5e-301">task/submit</span><span class="sxs-lookup"><span data-stu-id="18c5e-301">task/submit</span></span>                     | `handleTeamsTaskModuleSubmit`       | <span data-ttu-id="18c5e-302">このメソッドは、タスク モジュールの送信時にロジックを提供するために派生クラスでオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-302">This method can be overridden in a derived class to provide logic when a task module is submitted.</span></span> |

<span data-ttu-id="18c5e-303">このセクションに記載されている呼び出しアクティビティは、Teams の会話型ボット用です。</span><span class="sxs-lookup"><span data-stu-id="18c5e-303">The invoke activities listed in this section are for conversational bots in Teams.</span></span> <span data-ttu-id="18c5e-304">ボット フレームワーク SDK では、メッセージング拡張機能に固有の呼び出しアクティビティもサポートしています。</span><span class="sxs-lookup"><span data-stu-id="18c5e-304">The Bot Framework SDK also supports invoke activities specific to messaging extensions.</span></span> <span data-ttu-id="18c5e-305">詳細については、「メッセージング拡張機能 [について」を参照してください](https://aka.ms/azure-bot-what-are-messaging-extensions)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-305">For more information, see [what are messaging extensions](https://aka.ms/azure-bot-what-are-messaging-extensions).</span></span>

# <a name="python"></a>[<span data-ttu-id="18c5e-306">Python</span><span class="sxs-lookup"><span data-stu-id="18c5e-306">Python</span></span>](#tab/python)

#### <a name="core-bot-framework-handlers"></a><span data-ttu-id="18c5e-307">Core Bot Framework ハンドラー</span><span class="sxs-lookup"><span data-stu-id="18c5e-307">Core Bot Framework handlers</span></span>

>[!NOTE]
> <span data-ttu-id="18c5e-308">追加および削除 **されたメンバー** の **アクティビティ** を除き、このセクションで説明するアクティビティ ハンドラーはすべて、Teams 以外のボットと同様に機能し続ける。</span><span class="sxs-lookup"><span data-stu-id="18c5e-308">Except for the **added** and **removed** members' activities, all the activity handlers described in this section continue to work as they do with a non-Teams bot.</span></span>

<span data-ttu-id="18c5e-309">アクティビティ ハンドラーは、メッセージ スレッドの代わりに新しいメンバーがチームに追加されるチームのコンテキストでは異なります。</span><span class="sxs-lookup"><span data-stu-id="18c5e-309">Activity handlers are different in context of a team, where the new member is added to the team instead of a message thread.</span></span>

<span data-ttu-id="18c5e-310">定義されているハンドラーの一覧には `ActivityHandler` 、次のものが含まれます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-310">The list of handlers defined in `ActivityHandler` include the following:</span></span>

| <span data-ttu-id="18c5e-311">イベント</span><span class="sxs-lookup"><span data-stu-id="18c5e-311">Event</span></span> | <span data-ttu-id="18c5e-312">ハンドラー</span><span class="sxs-lookup"><span data-stu-id="18c5e-312">Handler</span></span> | <span data-ttu-id="18c5e-313">説明</span><span class="sxs-lookup"><span data-stu-id="18c5e-313">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="18c5e-314">受信したアクティビティの種類</span><span class="sxs-lookup"><span data-stu-id="18c5e-314">Any activity type received</span></span> | `on_turn` | <span data-ttu-id="18c5e-315">このメソッドは、受信したアクティビティの種類に基づいて、他のハンドラーのいずれかを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-315">This method calls one of the other handlers, based on the type of activity received.</span></span> |
| <span data-ttu-id="18c5e-316">受信したメッセージ アクティビティ</span><span class="sxs-lookup"><span data-stu-id="18c5e-316">Message activity received</span></span> | `on_message_activity` | <span data-ttu-id="18c5e-317">このメソッドは、アクティビティを処理するためにオーバーライド `Message` できます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-317">This method can be overridden to handle a `Message` activity.</span></span> |
| <span data-ttu-id="18c5e-318">会話の更新アクティビティの受信</span><span class="sxs-lookup"><span data-stu-id="18c5e-318">Conversation update activity received</span></span> | `on_conversation_update_activity` | <span data-ttu-id="18c5e-319">ボット以外のメンバーが会話に参加または離れた場合、このメソッドはハンドラーを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-319">This method calls a handler if members other than the bot join or leave the conversation.</span></span> |
| <span data-ttu-id="18c5e-320">ボット以外のメンバーが会話に参加しました</span><span class="sxs-lookup"><span data-stu-id="18c5e-320">Non-bot members joined the conversation</span></span> | `on_members_added_activity` | <span data-ttu-id="18c5e-321">このメソッドは、会話に参加するメンバーを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-321">This method can be overridden to handle members joining a conversation.</span></span> |
| <span data-ttu-id="18c5e-322">ボット以外のメンバーが会話を離した</span><span class="sxs-lookup"><span data-stu-id="18c5e-322">Non-bot members left the conversation</span></span> | `on_members_removed_activity` | <span data-ttu-id="18c5e-323">このメソッドは、会話を離れるメンバーを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-323">This method can be overridden to handle members leaving a conversation.</span></span> |
| <span data-ttu-id="18c5e-324">受信したイベント アクティビティ</span><span class="sxs-lookup"><span data-stu-id="18c5e-324">Event activity received</span></span> | `on_event_activity` | <span data-ttu-id="18c5e-325">このメソッドは、イベントの種類に固有のハンドラーを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-325">This method calls a handler specific to the type of event.</span></span> |
| <span data-ttu-id="18c5e-326">受信したトークン応答イベント アクティビティ</span><span class="sxs-lookup"><span data-stu-id="18c5e-326">Token-response event activity received</span></span> | `on_token_response_event` | <span data-ttu-id="18c5e-327">このメソッドは、トークン応答イベントを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-327">This method can be overridden to handle token response events.</span></span> |
| <span data-ttu-id="18c5e-328">トークン以外の応答イベント アクティビティの受信</span><span class="sxs-lookup"><span data-stu-id="18c5e-328">Non-token-response event activity received</span></span> | `on_event` | <span data-ttu-id="18c5e-329">このメソッドは、他の種類のイベントを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-329">This method can be overridden to handle other types of events.</span></span> |
| <span data-ttu-id="18c5e-330">受信したその他のアクティビティの種類</span><span class="sxs-lookup"><span data-stu-id="18c5e-330">Other activity types received</span></span> | `on_unrecognized_activity_type` | <span data-ttu-id="18c5e-331">このメソッドは、処理されない任意の種類のアクティビティを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-331">This method can be overridden to handle any type of activity that is not handled.</span></span> |

#### <a name="teams-specific-activity-handlers"></a><span data-ttu-id="18c5e-332">Teams 固有のアクティビティ ハンドラー</span><span class="sxs-lookup"><span data-stu-id="18c5e-332">Teams specific activity handlers</span></span>

<span data-ttu-id="18c5e-333">コアの Bot Framework ハンドラー セクションからハンドラーの一覧を拡張して `TeamsActivityHandler` 、次の項目を含める。</span><span class="sxs-lookup"><span data-stu-id="18c5e-333">The `TeamsActivityHandler` extends the list of handlers from the core Bot Framework handlers section to include the following:</span></span>

| <span data-ttu-id="18c5e-334">イベント</span><span class="sxs-lookup"><span data-stu-id="18c5e-334">Event</span></span> | <span data-ttu-id="18c5e-335">ハンドラー</span><span class="sxs-lookup"><span data-stu-id="18c5e-335">Handler</span></span> | <span data-ttu-id="18c5e-336">説明</span><span class="sxs-lookup"><span data-stu-id="18c5e-336">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="18c5e-337">channelCreated</span><span class="sxs-lookup"><span data-stu-id="18c5e-337">channelCreated</span></span> | `on_teams_channel_created` | <span data-ttu-id="18c5e-338">このメソッドは、作成中の Teams チャネルを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-338">This method can be overridden to handle a Teams channel being created.</span></span> <span data-ttu-id="18c5e-339">詳細については、「会話更新イベント[で作成されたチャネル](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created)[」を参照してください](https://aka.ms/azure-bot-subscribe-to-conversation-events)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-339">For more information, see [channel created](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="18c5e-340">channelDeleted</span><span class="sxs-lookup"><span data-stu-id="18c5e-340">channelDeleted</span></span> | `on_teams_channel_deleted` | <span data-ttu-id="18c5e-341">このメソッドは、削除する Teams チャネルを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-341">This method can be overridden to handle a Teams channel being deleted.</span></span> <span data-ttu-id="18c5e-342">詳細については、「会話更新イベント[で削除されたチャネル](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted)[」を参照してください](https://aka.ms/azure-bot-subscribe-to-conversation-events)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-342">For more information, see [channel deleted](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="18c5e-343">channelRenamed</span><span class="sxs-lookup"><span data-stu-id="18c5e-343">channelRenamed</span></span> | `on_teams_channel_renamed` | <span data-ttu-id="18c5e-344">このメソッドは、名前を変更する Teams チャネルを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-344">This method can be overridden to handle a Teams channel being renamed.</span></span> <span data-ttu-id="18c5e-345">詳細については、「会話の更新イベント[でチャネルの名前が変更](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed)[された」を参照してください](https://aka.ms/azure-bot-subscribe-to-conversation-events)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-345">For more information, see [channel renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="18c5e-346">teamRenamed</span><span class="sxs-lookup"><span data-stu-id="18c5e-346">teamRenamed</span></span> | `on_teams_team_renamed` | <span data-ttu-id="18c5e-347">`return Task.CompletedTask;` このメソッドは、名前を変更する Teams チームを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-347">`return Task.CompletedTask;` This method can be overridden to handle a Teams team being renamed.</span></span> <span data-ttu-id="18c5e-348">詳細については、「会話の更新イベント [でチームの名前を](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) 変更 [する」を参照してください](https://aka.ms/azure-bot-subscribe-to-conversation-events)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-348">For more information, see [team renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="18c5e-349">MembersAdded</span><span class="sxs-lookup"><span data-stu-id="18c5e-349">MembersAdded</span></span> | `on_teams_members_added` | <span data-ttu-id="18c5e-350">このメソッドは、 で `OnMembersAddedAsync` メソッドを呼び出します `ActivityHandler` 。</span><span class="sxs-lookup"><span data-stu-id="18c5e-350">This method calls the `OnMembersAddedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="18c5e-351">このメソッドは、チームに参加しているメンバーを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-351">The method can be overridden to handle members joining a team.</span></span> <span data-ttu-id="18c5e-352">詳細については、「会話の更新 [イベントに追加されたチーム メンバー](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-added) [」を参照してください](https://aka.ms/azure-bot-subscribe-to-conversation-events)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-352">For more information, see [team members added](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-added) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="18c5e-353">MembersRemoved</span><span class="sxs-lookup"><span data-stu-id="18c5e-353">MembersRemoved</span></span> | `on_teams_members_removed` | <span data-ttu-id="18c5e-354">このメソッドは、 で `OnMembersRemovedAsync` メソッドを呼び出します `ActivityHandler` 。</span><span class="sxs-lookup"><span data-stu-id="18c5e-354">This method calls the `OnMembersRemovedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="18c5e-355">このメソッドは、チームを離れるメンバーを処理するためにオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-355">The method can be overridden to handle members leaving a team.</span></span> <span data-ttu-id="18c5e-356">詳細については、「会話更新イベント [で削除されたチーム メンバー](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-removed) [」を参照してください](https://aka.ms/azure-bot-subscribe-to-conversation-events)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-356">For more information, see [team members removed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-members-removed) in [conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|

#### <a name="teams-invoke-activities"></a><span data-ttu-id="18c5e-357">Teams がアクティビティを呼び出す</span><span class="sxs-lookup"><span data-stu-id="18c5e-357">Teams invoke activities</span></span>

<span data-ttu-id="18c5e-358">Teams アクティビティ ハンドラーから呼び出される Teams アクティビティ ハンドラーの `on_invoke_activity` 一覧には、次のものが含まれます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-358">The list of Teams activity handlers called from the `on_invoke_activity` Teams activity handler include the following:</span></span>

| <span data-ttu-id="18c5e-359">呼び出しの種類</span><span class="sxs-lookup"><span data-stu-id="18c5e-359">Invoke types</span></span>                    | <span data-ttu-id="18c5e-360">ハンドラー</span><span class="sxs-lookup"><span data-stu-id="18c5e-360">Handler</span></span>                              | <span data-ttu-id="18c5e-361">説明</span><span class="sxs-lookup"><span data-stu-id="18c5e-361">Description</span></span>                                                  |
| :-----------------------------  | :----------------------------------- | :----------------------------------------------------------- |
| <span data-ttu-id="18c5e-362">CardAction.Invoke</span><span class="sxs-lookup"><span data-stu-id="18c5e-362">CardAction.Invoke</span></span>               | `on_teams_card_action_invoke`       | <span data-ttu-id="18c5e-363">このメソッドは、カード アクションの呼び出しアクティビティがコネクタから受信されると呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-363">This method is invoked when a card action invoke activity is received from the connector.</span></span> |
| <span data-ttu-id="18c5e-364">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="18c5e-364">fileConsent/invoke</span></span>              | `on_teams_file_consent_accept`      | <span data-ttu-id="18c5e-365">このメソッドは、ユーザーがファイル同意カードを受け入れるときに呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-365">This method is invoked when a file consent card is accepted by the user.</span></span> |
| <span data-ttu-id="18c5e-366">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="18c5e-366">fileConsent/invoke</span></span>              | `on_teams_file_consent`            | <span data-ttu-id="18c5e-367">このメソッドは、ファイル同意カードのアクティビティがコネクタから受信されると呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-367">This method is invoked when a file consent card activity is received from the connector.</span></span> |
| <span data-ttu-id="18c5e-368">fileConsent/invoke</span><span class="sxs-lookup"><span data-stu-id="18c5e-368">fileConsent/invoke</span></span>              | `on_teams_file_consent_decline`     | <span data-ttu-id="18c5e-369">このメソッドは、ファイル同意カードがユーザーによって拒否された場合に呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-369">This method is invoked when a file consent card is declined by the user.</span></span> |
| <span data-ttu-id="18c5e-370">actionableMessage/executeAction</span><span class="sxs-lookup"><span data-stu-id="18c5e-370">actionableMessage/executeAction</span></span> | `on_teams_o365_connector_card_action` | <span data-ttu-id="18c5e-371">このメソッドは、O365 コネクタ カードのアクション アクティビティがコネクタから受信されると呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-371">This method is invoked when a O365 connector card action activity is received from the connector.</span></span> |
| <span data-ttu-id="18c5e-372">signin/verifyState</span><span class="sxs-lookup"><span data-stu-id="18c5e-372">signin/verifyState</span></span>              | `on_teams_signin_verify_state`      | <span data-ttu-id="18c5e-373">このメソッドは、signIn verify state activity がコネクタから受信されると呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-373">This method is invoked when a signIn verify state activity is received from the connector.</span></span> |
| <span data-ttu-id="18c5e-374">task/fetch</span><span class="sxs-lookup"><span data-stu-id="18c5e-374">task/fetch</span></span>                      | `on_teams_task_module_fetch`        | <span data-ttu-id="18c5e-375">このメソッドは、派生クラスでオーバーライドして、タスク モジュールのフェッチ時にロジックを提供できます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-375">This method can be overridden in a derived class to provide logic when a task module is fetched.</span></span> |
| <span data-ttu-id="18c5e-376">task/submit</span><span class="sxs-lookup"><span data-stu-id="18c5e-376">task/submit</span></span>                     | `on_teams_task_module_submit`       | <span data-ttu-id="18c5e-377">このメソッドは、タスク モジュールの送信時にロジックを提供するために派生クラスでオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="18c5e-377">This method can be overridden in a derived class to provide logic when a task module is submitted.</span></span> |

<span data-ttu-id="18c5e-378">このセクションに記載されている呼び出しアクティビティは、Teams の会話型ボット用です。</span><span class="sxs-lookup"><span data-stu-id="18c5e-378">The invoke activities listed in this section are for conversational bots in Teams.</span></span> <span data-ttu-id="18c5e-379">ボット フレームワーク SDK では、メッセージング拡張機能に固有の呼び出しアクティビティもサポートしています。</span><span class="sxs-lookup"><span data-stu-id="18c5e-379">The Bot Framework SDK also supports invoke activities specific to messaging extensions.</span></span> <span data-ttu-id="18c5e-380">詳細については、「メッセージング拡張機能 [について」を参照してください](https://aka.ms/azure-bot-what-are-messaging-extensions)。</span><span class="sxs-lookup"><span data-stu-id="18c5e-380">For more information, see [what are messaging extensions](https://aka.ms/azure-bot-what-are-messaging-extensions).</span></span>

---

* * *

<span data-ttu-id="18c5e-381">ボット アクティビティ ハンドラーについて理解し、会話と受信または送信するメッセージに応じてボットの動作が異なる方法を確認します。</span><span class="sxs-lookup"><span data-stu-id="18c5e-381">Now that you have familiarized yourself with bot activity handlers, let us see how bots behave differently depending on the conversation and the messages it receives or sends.</span></span>

## <a name="next-step"></a><span data-ttu-id="18c5e-382">次の手順</span><span class="sxs-lookup"><span data-stu-id="18c5e-382">Next step</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="18c5e-383">会話の基本</span><span class="sxs-lookup"><span data-stu-id="18c5e-383">Conversation basics</span></span>](~/bots/how-to/conversations/conversation-basics.md)
