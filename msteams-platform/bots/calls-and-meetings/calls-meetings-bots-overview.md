---
title: 通話とオンライン会議ボット
description: Microsoft Graph API を使用して通話やオンライン会議を使用して、Microsoft Teams アプリが音声とビデオを使用してユーザーとやり取りする方法について説明します。
keywords: 通話通話オーディオ ビデオ IVR 音声オンライン会議
ms.openlocfilehash: 0fcf420ba8d698404d00bb2cab3d61cab2245f40
ms.sourcegitcommit: 49d1ecda14042bf3f368b14c1971618fe979b914
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/23/2021
ms.locfileid: "51034643"
---
# <a name="calls-and-online-meetings-bots"></a><span data-ttu-id="2c6ed-104">通話とオンライン会議ボット</span><span class="sxs-lookup"><span data-stu-id="2c6ed-104">Calls and online meetings bots</span></span>

<span data-ttu-id="2c6ed-105">通話やオンライン会議に [Microsoft Graph API](/graph/api/resources/communications-api-overview?view=graph-rest-beta&preserve-view=true)が追加されたので、Microsoft Teams アプリは音声とビデオを使用してユーザーと豊富なやり取りを行うことができます。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-105">With the addition of [Microsoft Graph APIs for calls and online meetings](/graph/api/resources/communications-api-overview?view=graph-rest-beta&preserve-view=true), Microsoft Teams apps can now interact with users in rich ways using voice and video.</span></span> <span data-ttu-id="2c6ed-106">これらの API を使用すると、対話型音声応答 (IVR)、通話制御、デスクトップやアプリ共有などの通話や会議のリアルタイムオーディオストリームやビデオ ストリームへのアクセスなどの新機能を追加できます。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-106">These APIs allow you to add new features such as interactive voice response (IVR), call control, and access to real-time audio and/or video streams for calls and meetings, including desktop and app sharing.</span></span>

<span data-ttu-id="2c6ed-107">Microsoft Teams アプリでこれらの Microsoft Graph API を使用するには、ボットを作成し、他の場所で説明する追加情報とアクセス許可を指定しますが、まず、いくつかの主要な概念、用語、および規則を理解することが重要です。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-107">To use these Microsoft Graph APIs in a Microsoft Teams app, you create a bot and specify some additional information and permissions which we'll describe elsewhere, but first, it's important to understand some core concepts, terminology, and conventions:</span></span>

* <span data-ttu-id="2c6ed-108">**音声/ビデオ通話。**</span><span class="sxs-lookup"><span data-stu-id="2c6ed-108">**Audio/video calls.**</span></span> <span data-ttu-id="2c6ed-109">Teams での呼び出しは、オーディオまたはオーディオ+ビデオです。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-109">Calls in Teams can be purely audio or audio+video.</span></span> <span data-ttu-id="2c6ed-110">一言で言えば、すべての場所で "音声/ビデオ通話" とは言わない。「呼び出し」と言うだけ。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-110">For brevity's sake, we don't say "audio/video call" everywhere; we just say "call."</span></span>
* <span data-ttu-id="2c6ed-111">**呼び出しの種類。**</span><span class="sxs-lookup"><span data-stu-id="2c6ed-111">**Call types.**</span></span> <span data-ttu-id="2c6ed-112">呼び出しは、ピアツーピア (ユーザーとボットの間) またはマルチパーティ (ボットとグループ通話の 2 つ以上のユーザー) のいずれかです。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-112">Calls are either peer-to-peer (between a person and your bot) or multiparty (your bot and two or more people in a group call).</span></span>
  <span data-ttu-id="2c6ed-113">![CallingTypes ](~/assets/images/calls-and-meetings/call-types.png) :</span><span class="sxs-lookup"><span data-stu-id="2c6ed-113">![CallingTypes](~/assets/images/calls-and-meetings/call-types.png):</span></span>
  * <span data-ttu-id="2c6ed-114">ユーザーは、ボットとのピアツーピア呼び出しを開始したり、ボットを既存のマルチパーティ通話に招待することができます (ただし、後者は Microsoft Teams UI でまだ有効になっていません)。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-114">A user may initiate a peer-to-peer call with your bot or invite your bot into an existing multiparty call (although the latter is not yet enabled in the Microsoft Teams UI).</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="2c6ed-115">ボットへのユーザーが開始した呼び出しは、現在 Microsoft Teams モバイル プラットフォームではサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-115">User initiated calls to a bot are currently not supported on Microsoft Teams mobile platform.</span></span> 
  
  * <span data-ttu-id="2c6ed-116">Microsoft Graph のアクセス許可は、ユーザーがボットとのピアツーピア通話を開始する必要は必要ありませんが、ボットがマルチパーティ通話に参加したり、ボットがユーザーとのピアツーピア通話を開始したりするには、追加のアクセス許可が必要です。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-116">Microsoft Graph permissions aren't necessary for a user to initiate a peer-to-peer call with your bot, but additional permissions are needed for your bot to participate in a multiparty call, or for your bot to initiate a peer-to-peer call with a user.</span></span>
  * <span data-ttu-id="2c6ed-117">通話はピアツーピアとして開始され、マルチパーティにエスカレートする場合があります。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-117">A call may start as peer-to-peer and escalate to multiparty.</span></span> <span data-ttu-id="2c6ed-118">ボットが適切なアクセス許可を持っている場合、ボットは他のユーザーを招待することで、このエスカレーションを開始できます。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-118">Your bot can initiate this escalation by inviting others, provided your bot has the proper permissions.</span></span> <span data-ttu-id="2c6ed-119">ボットにグループ通話に参加するためのアクセス許可が付与されていない場合、ある参加者が別のパーティを追加すると、ボットは呼び出しから削除されます。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-119">If your bot doesn't have permissions to participate in group calls and one participant adds another party, your bot is dropped from the call.</span></span>
* <span data-ttu-id="2c6ed-120">**シグナリング。**</span><span class="sxs-lookup"><span data-stu-id="2c6ed-120">**Signaling.**</span></span> <span data-ttu-id="2c6ed-121">信号には、着信呼び出しと通話の 2 種類があります。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-121">There are two types of signals — incoming call and in-call:</span></span>
  * <span data-ttu-id="2c6ed-122">着信呼び出しを受信するには、ボット設定でエンドポイントを指定します。このエンドポイントは、着信呼び出しが到着すると通知を受け取ります。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-122">To receive an incoming call, you specify an endpoint in your bot settings; this endpoint receives a notification when an incoming call arrives.</span></span> <span data-ttu-id="2c6ed-123">通話に応答したり、拒否したり、どこかまたは他のユーザーにリダイレクトすることができます。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-123">You can answer the call, reject it, or redirect it to somewhere or someone else.</span></span>
  <span data-ttu-id="2c6ed-124">![呼び出しの種類](~/assets/images/calls-and-meetings/call-handling.png)</span><span class="sxs-lookup"><span data-stu-id="2c6ed-124">![Call Types](~/assets/images/calls-and-meetings/call-handling.png)</span></span>
  * <span data-ttu-id="2c6ed-125">ボットが呼び出し中の場合、ミュートとミュート解除、および他の参加者とのビデオ/デスクトップ コンテンツの共有を開始/停止する API があります。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-125">When a bot is in a call, there are APIs for muting and unmuting itself and to start/stop sharing video/desktop content with the other participants.</span></span>
  * <span data-ttu-id="2c6ed-126">ボットは、参加者のリストにアクセスしたり、新しい参加者を招待したり、ミュートしたりできます。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-126">The bot can also access the list of participants, invite new participants, and mute them.</span></span>
* <span data-ttu-id="2c6ed-127">**通話とオンライン会議。**</span><span class="sxs-lookup"><span data-stu-id="2c6ed-127">**Calls and online meetings.**</span></span> <span data-ttu-id="2c6ed-128">Teams ユーザーの観点から見ると、オンライン会議には、アドホック会議とスケジュール済み会議の 2 種類があります。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-128">From a Teams user's perspective, there are two kinds of online meetings — ad hoc and scheduled.</span></span> <span data-ttu-id="2c6ed-129">ただし、ボットの観点からは、どちらも同じです。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-129">However, from a bot's perspective, both are the same.</span></span> <span data-ttu-id="2c6ed-130">ボットでは、オンライン会議は単なるマルチパーティ通話 (参加者のセット) に加えて、会議のメタデータとして考え得る "会議の座標" です。会議に関連付けられているもの、などです。 `botId` `chatId` `joinUrl` `startTime` / `endTime`</span><span class="sxs-lookup"><span data-stu-id="2c6ed-130">To a bot, an online meeting is just a multiparty call (the set of participants) plus "meeting coordinates," which you can think of as the metadata for the meeting: `botId`, `chatId` associated with the meeting, `joinUrl`, `startTime`/`endTime`, and more.</span></span>
* <span data-ttu-id="2c6ed-131">**リアルタイム メディア。**</span><span class="sxs-lookup"><span data-stu-id="2c6ed-131">**Real-time media.**</span></span> <span data-ttu-id="2c6ed-132">ボットが通話またはオンライン会議に参加している場合は、音声ストリームとビデオ ストリームを処理する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-132">When a bot is participating in a call or online meeting, it must deal with audio and video streams.</span></span> <span data-ttu-id="2c6ed-133">ユーザーが電話で話したり、Web カメラに自分自身を表示したり、会議で画面を表示したりすると、ボットはこれをオーディオストリームやビデオ ストリームとして 「見る」。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-133">When users talk on a call, show themselves on a webcam, or present their screens in a meeting, a bot "sees" this as audio and/or video streams.</span></span> <span data-ttu-id="2c6ed-134">ボットが何かを言いたい場合、または画面コンテンツを表示する場合は、オーディオストリームまたはビデオ ストリームが必要です。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-134">If a bot wants to say something or present screen content, that requires an audio or video stream.</span></span> <span data-ttu-id="2c6ed-135">ボットが「0 を押してオペレーターに到達する」という単純な操作でも、IVR (対話型音声応答) シナリオでは、 を再生します。WAV ファイル。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-135">Even something as simple as the bot saying, "press 0 to reach the operator" in an IVR (interactive voice response) scenario means playing a .WAV file.</span></span> <span data-ttu-id="2c6ed-136">これをメディアまたはリアルタイム メディアと総称します _(以前_ に録音したオーディオ/ビデオの再生とは対照的に、リアルタイムでメディアを処理する必要があるシナリオを参照する場合)。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-136">Collectively, we refer to this as _media_ or _real-time media_ (when referring to scenarios where media must be processed in real time, as opposed to playback of previously-recorded audio/video).</span></span> <span data-ttu-id="2c6ed-137">これまで、メディア ストリーム、特にリアルタイム メディア ストリームの処理は、開発者にとって非常に複雑でした。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-137">Historically, dealing with media streams, particularly real-time media streams, has been extremely complex for developers.</span></span> <span data-ttu-id="2c6ed-138">Microsoft は、 _これらの使用例_ を処理し、リアルタイム メディア処理の従来の "重い持ち上げ" の多くを可能な限りオフロードするために、リアルタイム メディア プラットフォームを作成しました。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-138">Microsoft has created the _Real-time Media Platform_ to handle these use cases and to offload as much of the traditional "heavy lifting" of real-time media processing as possible.</span></span>  <span data-ttu-id="2c6ed-139">ボットが着信通話に応答するか、新規通話または既存の通話に参加する場合、ボットは Real-time Media Platform に対しメディアの処理方法を通知する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-139">When the bot answers an incoming call, or joins a new or existing call, it needs to tell the Real-time Media Platform how media will be handled.</span></span> <span data-ttu-id="2c6ed-140">IVR アプリケーションを構築する場合は、高価なオーディオ処理を Microsoft にオフロードできます。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-140">If you're building an IVR application, you can offload the expensive audio processing to Microsoft.</span></span> <span data-ttu-id="2c6ed-141">または、ボットがメディア ストリームに直接アクセスする必要がある場合は、そのシナリオもサポートします。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-141">Alternatively, if your bot requires direct access to media streams, we support that scenario too.</span></span> <span data-ttu-id="2c6ed-142">メディア処理には、次の 2 種類があります。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-142">There are the two types of media processing:</span></span>
  * <span data-ttu-id="2c6ed-143">**サービスホスト型メディア。**</span><span class="sxs-lookup"><span data-stu-id="2c6ed-143">**Service-hosted media.**</span></span> <span data-ttu-id="2c6ed-144">ボットは、アプリケーション ワークフローの管理 (通話のルーティングなど) に重点を置き、オーディオ処理を Microsoft リアルタイム メディア プラットフォームにオフロードします。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-144">Bots focus on managing application workflow (e.g., routing calls) and offload audio processing to the Microsoft Real-time Media Platform.</span></span> <span data-ttu-id="2c6ed-145">サービスホスト型メディアでは、ボットを実装してホストするためのいくつかのオプションがあります。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-145">With service-hosted media, you have several options to implement and host your bot.</span></span> <span data-ttu-id="2c6ed-146">サービスホスト型メディア ボットは、ローカルでメディアを処理しなからないので、ステートレス サービスとして実装できます。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-146">A service-hosted media bot can be implemented as a stateless service since it doesn't process media locally.</span></span> <span data-ttu-id="2c6ed-147">サービスホスト型メディア ボットは、オーディオ クリップの再生、オーディオ クリップの録音、DTMF トーンのサブスクライブなどの API を使用できます (たとえば、ユーザーがオペレーターに到達するために 0 を押した場合を知るなど `PlayPrompt` `Record` `SubscribeToTone` )。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-147">Service-hosted media bots can use APIs such as `PlayPrompt` for playing an audio clip, `Record` for recording audio clips, or `SubscribeToTone` for subscribing to DTMF tones (e.g., knowing when a user has pressed 0 to reach the operator).</span></span>
  * <span data-ttu-id="2c6ed-148">**アプリケーションホスト型メディア。**</span><span class="sxs-lookup"><span data-stu-id="2c6ed-148">**Application-hosted media.**</span></span> <span data-ttu-id="2c6ed-149">ボットがメディアに直接アクセスするには、特定の Graph アクセス許可が必要ですが、ボットがそれを取得すると、リアルタイム[](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/)メディア ライブラリと Graph [Calling SDK](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/articles/index.html#graph-calling-sdk-and-stateful-client-builder)を使用すると、リッチでリアルタイムのメディアを構築し、ボットを呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-149">For a bot to get direct access to the media, it needs a specific Graph permission, but once your bot has it, the [Real-time Media Library](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) and the [Graph Calling SDK](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/articles/index.html#graph-calling-sdk-and-stateful-client-builder) helps you build rich, real-time media, calling bots.</span></span> <span data-ttu-id="2c6ed-150">アプリケーションホスト型ボットは、Windows 環境でホストされている必要があります。詳細については、こちらを参照 [してください](./requirements-considerations-application-hosted-media-bots.md)。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-150">An Application-hosted bot must be hosted in a Windows environment, as described in more detail [here](./requirements-considerations-application-hosted-media-bots.md).</span></span>

## <a name="further-reading"></a><span data-ttu-id="2c6ed-151">その他の読み取り</span><span class="sxs-lookup"><span data-stu-id="2c6ed-151">Further reading</span></span>

<span data-ttu-id="2c6ed-152">通話とオンライン会議ボットを作成およびテストする方法の詳細を次に示します。</span><span class="sxs-lookup"><span data-stu-id="2c6ed-152">Here's more information on how to create and test calls and online meetings bots:</span></span>

* [<span data-ttu-id="2c6ed-153">Graph API リファレンス</span><span class="sxs-lookup"><span data-stu-id="2c6ed-153">Graph API reference</span></span>](/graph/api/resources/communications-api-overview?view=graph-rest-beta&preserve-view=true)
* [<span data-ttu-id="2c6ed-154">サンプル アプリ</span><span class="sxs-lookup"><span data-stu-id="2c6ed-154">Sample apps</span></span>](https://github.com/microsoftgraph/microsoft-graph-comms-samples)
* <span data-ttu-id="2c6ed-155">[通話とオンライン会議と](./registering-calling-bot.md) Microsoft Graph の通話とオンライン会議ボットのアクセス許可をサポートするボット [を登録する](./registering-calling-bot.md#add-microsoft-graph-permissions)</span><span class="sxs-lookup"><span data-stu-id="2c6ed-155">[Registering a bot that supports calls and online meetings](./registering-calling-bot.md) and [Microsoft Graph permissions for calls and online meetings bots](./registering-calling-bot.md#add-microsoft-graph-permissions)</span></span>
* [<span data-ttu-id="2c6ed-156">ローカル PC で通話およびオンライン会議ボットを開発する方法</span><span class="sxs-lookup"><span data-stu-id="2c6ed-156">How to develop calling and online meeting bots on your local PC</span></span>](./debugging-local-testing-calling-meeting-bots.md)
* <span data-ttu-id="2c6ed-157">[リアルタイムメディア処理の詳細](./real-time-media-concepts.md)と、アプリケーションホスト型メディアをサポートするために [必要な情報](./requirements-considerations-application-hosted-media-bots.md)</span><span class="sxs-lookup"><span data-stu-id="2c6ed-157">[More information on real-time media processing](./real-time-media-concepts.md), and [what's needed to support application-hosted media](./requirements-considerations-application-hosted-media-bots.md)</span></span>
* [<span data-ttu-id="2c6ed-158">着信通知の処理に関する技術情報</span><span class="sxs-lookup"><span data-stu-id="2c6ed-158">Technical information on handling incoming call notifications</span></span>](./call-notifications.md)
