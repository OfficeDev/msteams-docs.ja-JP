---
title: 通話とオンライン会議のボット
description: Microsoft Teams アプリを使用して、Microsoft Graph Api を使用して通話やオンライン会議で音声とビデオを使用してユーザーと対話する方法について説明します。
keywords: 通話の音声ビデオ IVR 音声オンライン会議
ms.openlocfilehash: 03bd7e085908a49f070fe84aba87138ecabafb83
ms.sourcegitcommit: 4329a94918263c85d6c65ff401f571556b80307b
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/01/2020
ms.locfileid: "41674792"
---
# <a name="calls-and-online-meetings-bots"></a><span data-ttu-id="1e403-104">通話とオンライン会議のボット</span><span class="sxs-lookup"><span data-stu-id="1e403-104">Calls and online meetings bots</span></span>

<span data-ttu-id="1e403-105">Microsoft [Graph api を呼び出しとオンライン会議に](/graph/api/resources/communications-api-overview?view=graph-rest-beta)追加することで、microsoft Teams アプリは音声とビデオを使用してさまざまな方法でユーザーと対話できるようになりました。</span><span class="sxs-lookup"><span data-stu-id="1e403-105">With the addition of [Microsoft Graph APIs for calls and online meetings](/graph/api/resources/communications-api-overview?view=graph-rest-beta), Microsoft Teams apps can now interact with users in rich ways using voice and video.</span></span> <span data-ttu-id="1e403-106">これらの Api を使用すると、対話式音声応答 (IVR)、通話コントロール、通話と会議のリアルタイム音声またはビデオストリーム (デスクトップとアプリの共有など) などの新しい機能を追加できます。</span><span class="sxs-lookup"><span data-stu-id="1e403-106">These APIs allow you to add new features such as interactive voice response (IVR), call control, and access to real-time audio and/or video streams for calls and meetings, including desktop and app sharing.</span></span>

<span data-ttu-id="1e403-107">Microsoft Teams アプリでこれらの Microsoft Graph Api を使用するには、bot を作成し、別の場所で説明する追加情報とアクセス許可を指定します。最初に、中心概念、用語、および規則について理解することが重要です。</span><span class="sxs-lookup"><span data-stu-id="1e403-107">To use these Microsoft Graph APIs in a Microsoft Teams app, you create a bot and specify some additional information and permissions which we'll describe elsewhere, but first, it's important to understand some core concepts, terminology, and conventions:</span></span>

* <span data-ttu-id="1e403-108">**音声ビデオ通話。**</span><span class="sxs-lookup"><span data-stu-id="1e403-108">**Audio/video calls.**</span></span> <span data-ttu-id="1e403-109">Teams での通話は、完全に音声またはオーディオ + ビデオにすることができます。</span><span class="sxs-lookup"><span data-stu-id="1e403-109">Calls in Teams can be purely audio or audio+video.</span></span> <span data-ttu-id="1e403-110">簡潔にするために、「音声ビデオ通話」と言うことはありません。「call」と言っただけです。</span><span class="sxs-lookup"><span data-stu-id="1e403-110">For brevity's sake, we don't say "audio/video call" everywhere; we just say "call."</span></span>
* <span data-ttu-id="1e403-111">**通話の種類。**</span><span class="sxs-lookup"><span data-stu-id="1e403-111">**Call types.**</span></span> <span data-ttu-id="1e403-112">通話は、ピアツーピア (人物と bot の間) またはマルチパーティ (グループ呼び出しでのお客様のボットと2人以上のユーザー) のいずれかです。</span><span class="sxs-lookup"><span data-stu-id="1e403-112">Calls are either peer-to-peer (between a person and your bot) or multiparty (your bot and two or more people in a group call).</span></span>
  <span data-ttu-id="1e403-113">![通話の](~/assets/images/calls-and-meetings/call-types.png)種類:</span><span class="sxs-lookup"><span data-stu-id="1e403-113">![Call Types](~/assets/images/calls-and-meetings/call-types.png):</span></span>
  * <span data-ttu-id="1e403-114">ユーザーが bot とのピアツーピア通話を開始したり、既存のマルチパーティコールに bot を招待したりすることができます (後者は Microsoft Teams UI でまだ有効になっていません)。</span><span class="sxs-lookup"><span data-stu-id="1e403-114">A user may initiate a peer-to-peer call with your bot or invite your bot into an existing multiparty call (although the latter is not yet enabled in the Microsoft Teams UI).</span></span>
  * <span data-ttu-id="1e403-115">ユーザーが bot とのピアツーピア通話を開始するために、Microsoft Graph のアクセス許可は必要ありませんが、bot がマルチパーティ通話に参加するため、またはユーザーとのピアツーピア通話をボットで開始するために、追加のアクセス許可が必要です。</span><span class="sxs-lookup"><span data-stu-id="1e403-115">Microsoft Graph permissions aren't necessary for a user to initiate a peer-to-peer call with your bot, but additional permissions are needed for your bot to participate in a multiparty call, or for your bot to initiate a peer-to-peer call with a user.</span></span>
  * <span data-ttu-id="1e403-116">通話は、ピアツーピアとして開始し、マルチパーティにエスカレートできます。</span><span class="sxs-lookup"><span data-stu-id="1e403-116">A call may start as peer-to-peer and escalate to multiparty.</span></span> <span data-ttu-id="1e403-117">Bot は、適切なアクセス許可を持っていれば、他のユーザーを招待することでこのエスカレーションを開始することができます。</span><span class="sxs-lookup"><span data-stu-id="1e403-117">Your bot can initiate this escalation by inviting others, provided your bot has the proper permissions.</span></span> <span data-ttu-id="1e403-118">Bot がグループ通話に参加するためのアクセス許可を持っておらず、1人の参加者が別のパーティを追加した場合は、その呼び出しから bot が削除されます。</span><span class="sxs-lookup"><span data-stu-id="1e403-118">If your bot doesn't have permissions to participate in group calls and one participant adds another party, your bot is dropped from the call.</span></span>
* <span data-ttu-id="1e403-119">**リング.**</span><span class="sxs-lookup"><span data-stu-id="1e403-119">**Signaling.**</span></span> <span data-ttu-id="1e403-120">シグナルには、着信通話と通話中の2種類があります。</span><span class="sxs-lookup"><span data-stu-id="1e403-120">There are two types of signals — incoming call and in-call:</span></span>
  * <span data-ttu-id="1e403-121">着信呼び出しを受信するには、ボット設定でエンドポイントを指定します。このエンドポイントは、着信呼び出しが到着したときに通知を受信します。</span><span class="sxs-lookup"><span data-stu-id="1e403-121">To receive an incoming call, you specify an endpoint in your bot settings; this endpoint receives a notification when an incoming call arrives.</span></span> <span data-ttu-id="1e403-122">呼び出しに応答するか、拒否するか、または別の場所にリダイレクトすることができます。</span><span class="sxs-lookup"><span data-stu-id="1e403-122">You can answer the call, reject it, or redirect it to somewhere or someone else.</span></span>
  <span data-ttu-id="1e403-123">![通話の種類](~/assets/images/calls-and-meetings/call-handling.png)</span><span class="sxs-lookup"><span data-stu-id="1e403-123">![Call Types](~/assets/images/calls-and-meetings/call-handling.png)</span></span>
  * <span data-ttu-id="1e403-124">Bot が通話に参加している場合は、それ自体をミュートおよびミュート解除するための Api と、ビデオ/デスクトップコンテンツの共有を他の参加者との間で開始または停止することができます。</span><span class="sxs-lookup"><span data-stu-id="1e403-124">When a bot is in a call, there are APIs for muting and unmuting itself and to start/stop sharing video/desktop content with the other participants.</span></span>
  * <span data-ttu-id="1e403-125">Bot は、参加者のリストにアクセスしたり、新しい参加者を招待したり、ミュートしたりすることもできます。</span><span class="sxs-lookup"><span data-stu-id="1e403-125">The bot can also access the list of participants, invite new participants, and mute them.</span></span>
* <span data-ttu-id="1e403-126">**通話とオンライン会議。**</span><span class="sxs-lookup"><span data-stu-id="1e403-126">**Calls and online meetings.**</span></span> <span data-ttu-id="1e403-127">Teams ユーザーの観点から見ると、2種類のオンライン会議があります。</span><span class="sxs-lookup"><span data-stu-id="1e403-127">From a Teams user's perspective, there are two kinds of online meetings — ad hoc and scheduled.</span></span> <span data-ttu-id="1e403-128">ただし、bot の視点からは異なります。</span><span class="sxs-lookup"><span data-stu-id="1e403-128">However, from a bot's perspective, it's different.</span></span> <span data-ttu-id="1e403-129">Bot の場合、オンライン会議はマルチパーティの通話 (参加者のセット) と「ミーティングの座標`botId`」 (会議のメタデータとも呼ば`chatId`れます) と、会議に関連付けられ`joinUrl` `startTime` / `endTime`ていることを考えることができます。</span><span class="sxs-lookup"><span data-stu-id="1e403-129">To a bot, an online meeting is just a multiparty call (the set of participants) plus "meeting coordinates," which you can think of as the metadata for the meeting: `botId`, `chatId` associated with the meeting, `joinUrl`, `startTime`/`endTime`, and more.</span></span>
* <span data-ttu-id="1e403-130">**リアルタイムメディア。**</span><span class="sxs-lookup"><span data-stu-id="1e403-130">**Real-time media.**</span></span> <span data-ttu-id="1e403-131">Bot が通話またはオンライン会議に参加している場合は、音声およびビデオストリームを処理する必要があります。</span><span class="sxs-lookup"><span data-stu-id="1e403-131">When a bot is participating in a call or online meeting, it must deal with audio and video streams.</span></span> <span data-ttu-id="1e403-132">ユーザーが電話をかけたり、webcam で自分を表示したり、会議で自分の画面を表示したりすると、bot はこれを音声またはビデオストリームとして認識します。</span><span class="sxs-lookup"><span data-stu-id="1e403-132">When users talk on a call, show themselves on a webcam, or present their screens in a meeting, a bot "sees" this as audio and/or video streams.</span></span> <span data-ttu-id="1e403-133">Bot が何かを言ったり、画面の内容を表示したりしたい場合は、音声またはビデオストリームが必要です。</span><span class="sxs-lookup"><span data-stu-id="1e403-133">If a bot wants to say something or present screen content, that requires an audio or video stream.</span></span> <span data-ttu-id="1e403-134">「IVR (対話式音声応答)」のシナリオでは、bot が単純なものであっても、を再生することは、を再生することを意味します。WAV ファイル。</span><span class="sxs-lookup"><span data-stu-id="1e403-134">Even something as simple as the bot saying, "press 0 to reach the operator" in an IVR (interactive voice response) scenario means playing a .WAV file.</span></span> <span data-ttu-id="1e403-135">これは、_メディアまたは__リアルタイムメディア_として参照されています (以前録音された音声/ビデオを再生するのではなく、リアルタイムで処理する必要がある場合)。</span><span class="sxs-lookup"><span data-stu-id="1e403-135">Collectively, we refer to this as _media_ or _real-time media_ (when referring to scenarios where media must be processed in real time, as opposed to playback of previously-recorded audio/video).</span></span> <span data-ttu-id="1e403-136">従来、メディアストリーム (特にリアルタイムメディアストリーム) の処理は、開発者にとって非常に複雑になっていました。</span><span class="sxs-lookup"><span data-stu-id="1e403-136">Historically, dealing with media streams, particularly real-time media streams, has been extremely complex for developers.</span></span> <span data-ttu-id="1e403-137">Microsoft では、このようなユースケースを処理するために_リアルタイムメディアプラットフォーム_を作成し、リアルタイムメディア処理の従来の "大量発生" をできるだけオフロードするようにしています。</span><span class="sxs-lookup"><span data-stu-id="1e403-137">Microsoft has created the _Real-time Media Platform_ to handle these use cases and to offload as much of the traditional "heavy lifting" of real-time media processing as possible.</span></span>  <span data-ttu-id="1e403-138">ボットが着信通話に応答するか、新規通話または既存の通話に参加する場合、ボットは Real-time Media Platform に対しメディアの処理方法を通知する必要があります。</span><span class="sxs-lookup"><span data-stu-id="1e403-138">When the bot answers an incoming call, or joins a new or existing call, it needs to tell the Real-time Media Platform how media will be handled.</span></span> <span data-ttu-id="1e403-139">IVR アプリケーションを構築している場合は、高コストのオーディオ処理を Microsoft にオフロードすることができます。</span><span class="sxs-lookup"><span data-stu-id="1e403-139">If you're building an IVR application, you can offload the expensive audio processing to Microsoft.</span></span> <span data-ttu-id="1e403-140">または、ボットがメディアストリームへの直接アクセスを必要とする場合は、そのシナリオもサポートします。</span><span class="sxs-lookup"><span data-stu-id="1e403-140">Alternatively, if your bot requires direct access to media streams, we support that scenario too.</span></span> <span data-ttu-id="1e403-141">メディア処理には、次の2種類があります。</span><span class="sxs-lookup"><span data-stu-id="1e403-141">There are the two types of media processing:</span></span>
  * <span data-ttu-id="1e403-142">**サービスホストメディア。**</span><span class="sxs-lookup"><span data-stu-id="1e403-142">**Service-hosted media.**</span></span> <span data-ttu-id="1e403-143">Bot は、アプリケーションワークフロー (ルーティング呼び出しなど) を管理し、Microsoft のリアルタイムメディアプラットフォームへのオーディオ処理をオフロードすることに重点を置いています。</span><span class="sxs-lookup"><span data-stu-id="1e403-143">Bots focus on managing application workflow (e.g., routing calls) and offload audio processing to the Microsoft Real-time Media Platform.</span></span> <span data-ttu-id="1e403-144">サービスホスト型メディアでは、ボットを実装してホストするためのいくつかのオプションがあります。</span><span class="sxs-lookup"><span data-stu-id="1e403-144">With service-hosted media, you have several options to implement and host your bot.</span></span> <span data-ttu-id="1e403-145">サービスホスト型メディアボットは、メディアをローカルに処理しないため、ステートレスサービスとして実装できます。</span><span class="sxs-lookup"><span data-stu-id="1e403-145">A service-hosted media bot can be implemented as a stateless service since it doesn't process media locally.</span></span> <span data-ttu-id="1e403-146">サービスホスト型メディアのボットは、オーディオクリップ`PlayPrompt`の再生、 `Record`オーディオクリップの録音、または`SubscribeToTone` DTMF トーンの定期処理 (たとえば、ユーザーが0を押してオペレーターに到達した場合に知らせる) などの api を使用できます。</span><span class="sxs-lookup"><span data-stu-id="1e403-146">Service-hosted media bots can use APIs such as `PlayPrompt` for playing an audio clip, `Record` for recording audio clips, or `SubscribeToTone` for subscribing to DTMF tones (e.g., knowing when a user has pressed 0 to reach the operator).</span></span>
  * <span data-ttu-id="1e403-147">**アプリケーションホスト型メディア。**</span><span class="sxs-lookup"><span data-stu-id="1e403-147">**Application-hosted media.**</span></span> <span data-ttu-id="1e403-148">Bot がメディアに直接アクセスできるようにするためには、特定のグラフアクセス許可が必要ですが、bot がこれを持っていれば、[リアルタイムメディアライブラリ](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/)と[Graph 通話 SDK](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/articles/index.html#graph-calling-sdk-and-stateful-client-builder)を使用して、多機能なリアルタイムメディアを構築したり、ボットを呼び出したりすることができます。</span><span class="sxs-lookup"><span data-stu-id="1e403-148">For a bot to get direct access to the media, it needs a specific Graph permission, but once your bot has it, the [Real-time Media Library](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) and the [Graph Calling SDK](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/articles/index.html#graph-calling-sdk-and-stateful-client-builder) helps you build rich, real-time media, calling bots.</span></span> <span data-ttu-id="1e403-149">アプリケーションホストボットは、Windows 環境でホストされている必要があります。詳細については、[こちら](./requirements-considerations-application-hosted-media-bots.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="1e403-149">An Application-hosted bot must be hosted in a Windows environment, as described in more detail [here](./requirements-considerations-application-hosted-media-bots.md).</span></span>

## <a name="further-reading"></a><span data-ttu-id="1e403-150">参考資料</span><span class="sxs-lookup"><span data-stu-id="1e403-150">Further reading</span></span>

<span data-ttu-id="1e403-151">通話とオンライン会議のボットを作成およびテストする方法については、以下の情報を参照してください。</span><span class="sxs-lookup"><span data-stu-id="1e403-151">Here's more information on how to create and test calls and online meetings bots:</span></span>

* [<span data-ttu-id="1e403-152">Graph API リファレンス</span><span class="sxs-lookup"><span data-stu-id="1e403-152">Graph API reference</span></span>](/graph/api/resources/communications-api-overview?view=graph-rest-beta)
* [<span data-ttu-id="1e403-153">サンプルアプリ</span><span class="sxs-lookup"><span data-stu-id="1e403-153">Sample apps</span></span>](https://github.com/microsoftgraph/microsoft-graph-comms-samples)
* <span data-ttu-id="1e403-154">通話とオンライン会議の機能を[サポートするボットを登録](./registering-calling-bot.md)する、および[Microsoft Graph のアクセス許可を使用](/registering-calling-bot.md#add-microsoft-graph-permissions)する</span><span class="sxs-lookup"><span data-stu-id="1e403-154">[Registering a bot that supports calls and online meetings](./registering-calling-bot.md) and [Microsoft Graph permissions for calls and online meetings bots](/registering-calling-bot.md#add-microsoft-graph-permissions)</span></span>
* [<span data-ttu-id="1e403-155">ローカル PC で通話およびオンライン会議のボットを開発する方法</span><span class="sxs-lookup"><span data-stu-id="1e403-155">How to develop calling and online meeting bots on your local PC</span></span>](./debugging-local-testing-calling-meeting-bots.md)
* <span data-ttu-id="1e403-156">[リアルタイムメディア処理に関する詳細](./real-time-media-concepts.md)と、[アプリケーションホスト型メディアをサポートするために必要なもの](./requirements-considerations-application-hosted-media-bots.md)</span><span class="sxs-lookup"><span data-stu-id="1e403-156">[More information on real-time media processing](./real-time-media-concepts.md), and [what's needed to support application-hosted media](./requirements-considerations-application-hosted-media-bots.md)</span></span>
* [<span data-ttu-id="1e403-157">着信呼び出し通知の処理に関する技術情報</span><span class="sxs-lookup"><span data-stu-id="1e403-157">Technical information on handling incoming call notifications</span></span>](./call-notifications.md)
