---
title: 通話とオンライン会議ボット
description: Microsoft Graph API を使用して通話やオンライン会議を使用して、Microsoft Teams アプリが音声とビデオを使用してユーザーとやり取りする方法について説明します。
keywords: 通話通話オーディオ ビデオ IVR 音声オンライン会議
ms.openlocfilehash: 0fcf420ba8d698404d00bb2cab3d61cab2245f40
ms.sourcegitcommit: 49d1ecda14042bf3f368b14c1971618fe979b914
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/23/2021
ms.locfileid: "51034643"
---
# <a name="calls-and-online-meetings-bots"></a>通話とオンライン会議ボット

通話やオンライン会議に [Microsoft Graph API](/graph/api/resources/communications-api-overview?view=graph-rest-beta&preserve-view=true)が追加されたので、Microsoft Teams アプリは音声とビデオを使用してユーザーと豊富なやり取りを行うことができます。 これらの API を使用すると、対話型音声応答 (IVR)、通話制御、デスクトップやアプリ共有などの通話や会議のリアルタイムオーディオストリームやビデオ ストリームへのアクセスなどの新機能を追加できます。

Microsoft Teams アプリでこれらの Microsoft Graph API を使用するには、ボットを作成し、他の場所で説明する追加情報とアクセス許可を指定しますが、まず、いくつかの主要な概念、用語、および規則を理解することが重要です。

* **音声/ビデオ通話。** Teams での呼び出しは、オーディオまたはオーディオ+ビデオです。 一言で言えば、すべての場所で "音声/ビデオ通話" とは言わない。「呼び出し」と言うだけ。
* **呼び出しの種類。** 呼び出しは、ピアツーピア (ユーザーとボットの間) またはマルチパーティ (ボットとグループ通話の 2 つ以上のユーザー) のいずれかです。
  ![CallingTypes ](~/assets/images/calls-and-meetings/call-types.png) :
  * ユーザーは、ボットとのピアツーピア呼び出しを開始したり、ボットを既存のマルチパーティ通話に招待することができます (ただし、後者は Microsoft Teams UI でまだ有効になっていません)。
  
  > [!NOTE]
  > ボットへのユーザーが開始した呼び出しは、現在 Microsoft Teams モバイル プラットフォームではサポートされていません。 
  
  * Microsoft Graph のアクセス許可は、ユーザーがボットとのピアツーピア通話を開始する必要は必要ありませんが、ボットがマルチパーティ通話に参加したり、ボットがユーザーとのピアツーピア通話を開始したりするには、追加のアクセス許可が必要です。
  * 通話はピアツーピアとして開始され、マルチパーティにエスカレートする場合があります。 ボットが適切なアクセス許可を持っている場合、ボットは他のユーザーを招待することで、このエスカレーションを開始できます。 ボットにグループ通話に参加するためのアクセス許可が付与されていない場合、ある参加者が別のパーティを追加すると、ボットは呼び出しから削除されます。
* **シグナリング。** 信号には、着信呼び出しと通話の 2 種類があります。
  * 着信呼び出しを受信するには、ボット設定でエンドポイントを指定します。このエンドポイントは、着信呼び出しが到着すると通知を受け取ります。 通話に応答したり、拒否したり、どこかまたは他のユーザーにリダイレクトすることができます。
  ![呼び出しの種類](~/assets/images/calls-and-meetings/call-handling.png)
  * ボットが呼び出し中の場合、ミュートとミュート解除、および他の参加者とのビデオ/デスクトップ コンテンツの共有を開始/停止する API があります。
  * ボットは、参加者のリストにアクセスしたり、新しい参加者を招待したり、ミュートしたりできます。
* **通話とオンライン会議。** Teams ユーザーの観点から見ると、オンライン会議には、アドホック会議とスケジュール済み会議の 2 種類があります。 ただし、ボットの観点からは、どちらも同じです。 ボットでは、オンライン会議は単なるマルチパーティ通話 (参加者のセット) に加えて、会議のメタデータとして考え得る "会議の座標" です。会議に関連付けられているもの、などです。 `botId` `chatId` `joinUrl` `startTime` / `endTime`
* **リアルタイム メディア。** ボットが通話またはオンライン会議に参加している場合は、音声ストリームとビデオ ストリームを処理する必要があります。 ユーザーが電話で話したり、Web カメラに自分自身を表示したり、会議で画面を表示したりすると、ボットはこれをオーディオストリームやビデオ ストリームとして 「見る」。 ボットが何かを言いたい場合、または画面コンテンツを表示する場合は、オーディオストリームまたはビデオ ストリームが必要です。 ボットが「0 を押してオペレーターに到達する」という単純な操作でも、IVR (対話型音声応答) シナリオでは、 を再生します。WAV ファイル。 これをメディアまたはリアルタイム メディアと総称します _(以前_ に録音したオーディオ/ビデオの再生とは対照的に、リアルタイムでメディアを処理する必要があるシナリオを参照する場合)。 これまで、メディア ストリーム、特にリアルタイム メディア ストリームの処理は、開発者にとって非常に複雑でした。 Microsoft は、 _これらの使用例_ を処理し、リアルタイム メディア処理の従来の "重い持ち上げ" の多くを可能な限りオフロードするために、リアルタイム メディア プラットフォームを作成しました。  ボットが着信通話に応答するか、新規通話または既存の通話に参加する場合、ボットは Real-time Media Platform に対しメディアの処理方法を通知する必要があります。 IVR アプリケーションを構築する場合は、高価なオーディオ処理を Microsoft にオフロードできます。 または、ボットがメディア ストリームに直接アクセスする必要がある場合は、そのシナリオもサポートします。 メディア処理には、次の 2 種類があります。
  * **サービスホスト型メディア。** ボットは、アプリケーション ワークフローの管理 (通話のルーティングなど) に重点を置き、オーディオ処理を Microsoft リアルタイム メディア プラットフォームにオフロードします。 サービスホスト型メディアでは、ボットを実装してホストするためのいくつかのオプションがあります。 サービスホスト型メディア ボットは、ローカルでメディアを処理しなからないので、ステートレス サービスとして実装できます。 サービスホスト型メディア ボットは、オーディオ クリップの再生、オーディオ クリップの録音、DTMF トーンのサブスクライブなどの API を使用できます (たとえば、ユーザーがオペレーターに到達するために 0 を押した場合を知るなど `PlayPrompt` `Record` `SubscribeToTone` )。
  * **アプリケーションホスト型メディア。** ボットがメディアに直接アクセスするには、特定の Graph アクセス許可が必要ですが、ボットがそれを取得すると、リアルタイム[](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/)メディア ライブラリと Graph [Calling SDK](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/articles/index.html#graph-calling-sdk-and-stateful-client-builder)を使用すると、リッチでリアルタイムのメディアを構築し、ボットを呼び出すことができます。 アプリケーションホスト型ボットは、Windows 環境でホストされている必要があります。詳細については、こちらを参照 [してください](./requirements-considerations-application-hosted-media-bots.md)。

## <a name="further-reading"></a>その他の読み取り

通話とオンライン会議ボットを作成およびテストする方法の詳細を次に示します。

* [Graph API リファレンス](/graph/api/resources/communications-api-overview?view=graph-rest-beta&preserve-view=true)
* [サンプル アプリ](https://github.com/microsoftgraph/microsoft-graph-comms-samples)
* [通話とオンライン会議と](./registering-calling-bot.md) Microsoft Graph の通話とオンライン会議ボットのアクセス許可をサポートするボット [を登録する](./registering-calling-bot.md#add-microsoft-graph-permissions)
* [ローカル PC で通話およびオンライン会議ボットを開発する方法](./debugging-local-testing-calling-meeting-bots.md)
* [リアルタイムメディア処理の詳細](./real-time-media-concepts.md)と、アプリケーションホスト型メディアをサポートするために [必要な情報](./requirements-considerations-application-hosted-media-bots.md)
* [着信通知の処理に関する技術情報](./call-notifications.md)
