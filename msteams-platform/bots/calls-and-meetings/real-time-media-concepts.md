---
title: Microsoft Teams とのリアルタイムのメディア通話とオンライン会議
description: リアルタイムの音声およびビデオ通話やオンライン会議を行うボットを構築する上での重要な概念を理解します。
ms.topic: conceptual
localization_priority: Normal
keywords: オーディオ ストリーム ビデオ ストリーム オーディオ/ビデオ通話会議リアルタイム メディア アプリケーションホスト型メディア サービスホスト型メディア
ms.openlocfilehash: deedc47f67fe6848cf7f84457247d2271257e3f0
ms.sourcegitcommit: 825abed2f8784d2bab7407ba7a4455ae17bbd28f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/26/2021
ms.locfileid: "52020156"
---
# <a name="real-time-media-calls-and-meetings-with-microsoft-teams"></a><span data-ttu-id="664a7-104">Microsoft Teams とのリアルタイムのメディア通話と会議</span><span class="sxs-lookup"><span data-stu-id="664a7-104">Real-time media calls and meetings with Microsoft Teams</span></span>

<span data-ttu-id="664a7-105">リアルタイム メディア プラットフォームを使用すると、ボットはリアルタイムの音声、ビデオ、画面共有を使用して Microsoft Teams の通話や会議を操作できます。</span><span class="sxs-lookup"><span data-stu-id="664a7-105">The Real-time Media Platform enables bots to interact with Microsoft Teams calls and meetings using real-time voice, video, and screen sharing.</span></span> <span data-ttu-id="664a7-106">これは、ボットが音声およびビデオ コンテンツ フレームをフレーム別に送受信できる高度な機能です。</span><span class="sxs-lookup"><span data-stu-id="664a7-106">This is an advanced capability that allows the bot to send and receive voice and video content frame by frame.</span></span> <span data-ttu-id="664a7-107">ボットは、音声、ビデオ、および画面共有メディア ストリームへの生のアクセス権を持っています。</span><span class="sxs-lookup"><span data-stu-id="664a7-107">The bot has raw access to the voice, video, and screen sharing media streams.</span></span> <span data-ttu-id="664a7-108">すべてのメディア処理に対してリアルタイム メディア プラットフォームに依存する、サービスホスト型メディア ボットが簡単です。</span><span class="sxs-lookup"><span data-stu-id="664a7-108">There are simpler service-hosted media bots that rely on the Real-time Media Platform for all media processing.</span></span> <span data-ttu-id="664a7-109">メディア自体を処理するボットは、アプリケーションホスト型メディア ボットと呼ばれる。</span><span class="sxs-lookup"><span data-stu-id="664a7-109">Bots that process media themselves are called application-hosted media bots.</span></span>

<span data-ttu-id="664a7-110">たとえば、ボットを使用した 1:1 の呼び出しでは、ユーザーが話す通り、ボットは 1 秒あたり 50 のオーディオ フレームを受信し、各フレームには 20 ミリ秒 (ms) のオーディオが含まれる。</span><span class="sxs-lookup"><span data-stu-id="664a7-110">For example, in a 1:1 call with a bot, as the user speaks, the bot receives 50 audio frames per second, with each frame containing 20 milliseconds (ms) of audio.</span></span> <span data-ttu-id="664a7-111">アプリケーションホスト型メディア ボットは、音声フレームの受信時にリアルタイムの音声認識を実行できます。ユーザーが話し始めた後に録音を待つ必要が生じなくなった場合。</span><span class="sxs-lookup"><span data-stu-id="664a7-111">An application-hosted media bot can perform real-time speech recognition as the audio frames are received, rather than having to wait for a recording after the user has stopped speaking.</span></span> <span data-ttu-id="664a7-112">ボットは、ビデオ ベースの画面共有コンテンツを含む高解像度ビデオを送受信できます。</span><span class="sxs-lookup"><span data-stu-id="664a7-112">The bot can also send and receive high-definition-resolution video, including video-based screen sharing content.</span></span>

<span data-ttu-id="664a7-113">プラットフォームは、ボットがメディアを送受信する単純なソケットのような API を提供します。</span><span class="sxs-lookup"><span data-stu-id="664a7-113">The platform provides a simple socket-like API for the bot to send and receive media.</span></span> <span data-ttu-id="664a7-114">オーディオ用の SILK や G.722、ビデオ用 H.264 などのコーデックを使用して、オーディオまたはビデオ パケットのリアルタイム エンコードとデコードを処理します。</span><span class="sxs-lookup"><span data-stu-id="664a7-114">It handles the real-time encoding and decoding of audio or video packets using codecs such as SILK and G.722 for audio and H.264 for video.</span></span> <span data-ttu-id="664a7-115">プラットフォームでは、すべてのメディア パケットの暗号化または復号化、およびパケット ネットワークの送信も自動的に処理されます。</span><span class="sxs-lookup"><span data-stu-id="664a7-115">The platform also handles all media packet encryption or decryption and packet network transmission automatically.</span></span> <span data-ttu-id="664a7-116">ボットは、実際のオーディオまたはビデオ コンテンツにのみ関係します。</span><span class="sxs-lookup"><span data-stu-id="664a7-116">The bot is only concerned with the actual audio or video content.</span></span> <span data-ttu-id="664a7-117">リアルタイムのメディア ボットは、1:1 の呼び出しと複数の参加者との会議に参加します。</span><span class="sxs-lookup"><span data-stu-id="664a7-117">A real-time media bot participates in 1:1 calls as well as meetings with multiple participants.</span></span>

## <a name="media-session"></a><span data-ttu-id="664a7-118">メディア セッション</span><span class="sxs-lookup"><span data-stu-id="664a7-118">Media session</span></span>

<span data-ttu-id="664a7-119">リアルタイム メディア ボットが着信呼び出しに応答するか、Teams 会議に参加する場合、サポートする必要があるモダリティを宣言する必要があります。</span><span class="sxs-lookup"><span data-stu-id="664a7-119">When a real-time media bot answers an incoming call or joins a Teams meeting, it must declare what modalities it must support.</span></span> <span data-ttu-id="664a7-120">サポートされているモダリティごとに、ボットはメディアの送受信、受信のみ、または送信のみ可能かどうかを宣言します。</span><span class="sxs-lookup"><span data-stu-id="664a7-120">For each supported modality, the bot declares whether it can send and receive media, receive only, or send only.</span></span> <span data-ttu-id="664a7-121">たとえば、1:1 Teams 呼び出しを処理するように設計されたボットでは、音声の送受信の両方が必要ですが、呼び出し元のビデオを受信する必要はなさらないのでビデオのみを送信します。</span><span class="sxs-lookup"><span data-stu-id="664a7-121">For example, a bot designed to handle 1:1 Teams calls, requires to both send and receive audio, but only send video as it does not require to receive the video of the caller.</span></span> <span data-ttu-id="664a7-122">ボットと Teams の発信者または会議の間に確立された一連の音声およびビデオモダリティは、メディア セッションと呼ばれる。</span><span class="sxs-lookup"><span data-stu-id="664a7-122">The set of audio and video modalities established between the bot and the Teams caller or meeting is called the media session.</span></span>

<span data-ttu-id="664a7-123">メイン ビデオとビデオ ベースの画面共有という 2 種類のビデオ モダリティがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="664a7-123">Two types of video modalities are supported, main video and video-based screen sharing.</span></span> <span data-ttu-id="664a7-124">メイン ビデオは、ユーザーの Web カメラからビデオを転送するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="664a7-124">The main video is used to transport the video from a user's webcam.</span></span> <span data-ttu-id="664a7-125">ビデオ ベースの画面共有を使用すると、ユーザーは自分の画面をビデオ ストリームとして共有できます。</span><span class="sxs-lookup"><span data-stu-id="664a7-125">The video-based screen sharing allows a user to share his or her screen as a video stream.</span></span> <span data-ttu-id="664a7-126">このプラットフォームを使用すると、ボットは両方の種類のビデオを送受信できます。</span><span class="sxs-lookup"><span data-stu-id="664a7-126">The platform allows a bot to send and receive both video types.</span></span>

<span data-ttu-id="664a7-127">Teams 会議に参加すると、ボットはメディア セッションごとに最大 10 個までの複数のメイン ビデオ ストリームを同時に受信できます。</span><span class="sxs-lookup"><span data-stu-id="664a7-127">When joined to a Teams meeting, a bot can receive multiple main video streams simultaneously up to ten per media session.</span></span> <span data-ttu-id="664a7-128">これにより、ボットは会議に複数の参加者を表示できます。</span><span class="sxs-lookup"><span data-stu-id="664a7-128">This allows the bot to see more than one participant in the meeting.</span></span>

<span data-ttu-id="664a7-129">次のセクションでは、一連のフレームとしてメディアを送受信するボットの詳細について説明します。</span><span class="sxs-lookup"><span data-stu-id="664a7-129">The next section provides details about the bot sending and receiving media as a sequence of frames.</span></span>

## <a name="frames-and-frame-rate"></a><span data-ttu-id="664a7-130">フレームとフレーム レート</span><span class="sxs-lookup"><span data-stu-id="664a7-130">Frames and frame rate</span></span>

<span data-ttu-id="664a7-131">リアルタイム メディア ボットは、メディア セッションのオーディオモダリティとビデオ モダリティを直接操作します。</span><span class="sxs-lookup"><span data-stu-id="664a7-131">A real-time media bot interacts directly with the audio and video modalities of a media session.</span></span> <span data-ttu-id="664a7-132">つまり、ボットは一連のフレームとしてメディアを送受信しています。各フレームはコンテンツの単位を表します。</span><span class="sxs-lookup"><span data-stu-id="664a7-132">This means the bot is sending and receiving media as a sequence of frames, where each frame represents a unit of content.</span></span> <span data-ttu-id="664a7-133">オーディオの 1 秒は 50 フレームのシーケンスとして送信され、各フレームには 1 秒の音声コンテンツの 1/50 分の 1 である 20 ミリ秒が含まれる。</span><span class="sxs-lookup"><span data-stu-id="664a7-133">One second of audio is transmitted as a sequence of 50 frames, with each frame containing 20 ms that is 1/50th of a second of speech content.</span></span> <span data-ttu-id="664a7-134">ビデオの 1 秒は 30 の画像のシーケンスとして送信され、それぞれが次のビデオ フレームが表示される前に 1/30 秒の 33.3 ミリ秒だけ表示される予定です。</span><span class="sxs-lookup"><span data-stu-id="664a7-134">One second of video is transmitted as a sequence of 30 still images, each intended to be viewed for just 33.3 ms that is 1/30th of a second before the next video frame is displayed.</span></span> <span data-ttu-id="664a7-135">1 秒あたりに送信またはレンダリングされるフレームの数をフレーム レートと呼ぶ。</span><span class="sxs-lookup"><span data-stu-id="664a7-135">The number of frames transmitted or rendered per second is called the frame rate.</span></span>

<span data-ttu-id="664a7-136">次のセクションでは、リアルタイムのメディア通話と会議で使用されるオーディオとビデオの形式の詳細について説明します。</span><span class="sxs-lookup"><span data-stu-id="664a7-136">The next section provides details about the audio and video format used in real-time media calls and meetings.</span></span>

## <a name="audio-and-video-format"></a><span data-ttu-id="664a7-137">オーディオとビデオの形式</span><span class="sxs-lookup"><span data-stu-id="664a7-137">Audio and video format</span></span>

<span data-ttu-id="664a7-138">オーディオ形式では、オーディオの各秒は 16,000 サンプルとして表され、各サンプルには 16 ビットのデータが含まれています。</span><span class="sxs-lookup"><span data-stu-id="664a7-138">In audio format, each second of audio is represented as 16,000 samples, with each sample containing 16-bits of data.</span></span> <span data-ttu-id="664a7-139">20 ミリ秒のオーディオ フレームには、640 バイトのデータである 320 サンプルが含まれます。</span><span class="sxs-lookup"><span data-stu-id="664a7-139">A 20 ms audio frame contains 320 samples that is 640 bytes of data.</span></span>

<span data-ttu-id="664a7-140">ビデオ形式では、複数の形式がサポートされています。</span><span class="sxs-lookup"><span data-stu-id="664a7-140">In video format, several formats are supported.</span></span> <span data-ttu-id="664a7-141">ビデオ形式の 2 つの主要なプロパティは、そのフレーム サイズと色の形式です。</span><span class="sxs-lookup"><span data-stu-id="664a7-141">Two key properties of a video format are its frame size and color format.</span></span> <span data-ttu-id="664a7-142">サポートされるフレーム サイズには、360 ピクセルの 640x360、720 ピクセルの 1280x720、1920x1080 (1080 ピクセル) が含まれます。</span><span class="sxs-lookup"><span data-stu-id="664a7-142">Supported frame sizes include 640x360 that is 360 pixels, 1280x720 that is 720 pixels, and 1920x1080 that is 1080 pixels.</span></span> <span data-ttu-id="664a7-143">サポートされるカラー形式には、1 ピクセルあたり 12 ビットの NV12 と、1 ピクセルあたり 24 ビットの RGB24 が含まれます。</span><span class="sxs-lookup"><span data-stu-id="664a7-143">Supported color formats include NV12 that is 12 bits per pixel and RGB24 that is 24 bits per pixel.</span></span>

<span data-ttu-id="664a7-144">720p ビデオ フレームには、1280 回 720 の 921,600 ピクセルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="664a7-144">A 720p video frame contains 921,600 pixels that is 1280 times 720.</span></span> <span data-ttu-id="664a7-145">RGB24 カラー形式では、各ピクセルは 3 バイトとして表され、各ピクセルは、赤、緑、青の各色コンポーネントの 1 バイトで構成される 24 ビットです。</span><span class="sxs-lookup"><span data-stu-id="664a7-145">In the RGB24 color format, each pixel is represented as 3 bytes that is 24-bits comprised of one byte each of red, green, and blue color components.</span></span> <span data-ttu-id="664a7-146">したがって、1 つの 720p RGB24 ビデオ フレームには、1 ピクセルあたり 921,600 ピクセルの 3 バイトの 2,764,800 バイトのデータが必要です。</span><span class="sxs-lookup"><span data-stu-id="664a7-146">Therefore, a single 720p RGB24 video frame requires 2,764,800 bytes of data that is 921,600 pixels times 3 bytes per pixel.</span></span> <span data-ttu-id="664a7-147">フレーム レートが 30 fps の場合、720p RGB24 ビデオ フレームを送信すると、約 80 MB/秒のコンテンツが処理され、ネットワーク伝送前に H.264 ビデオ コーデックによって実質的に圧縮されます。</span><span class="sxs-lookup"><span data-stu-id="664a7-147">At a frame rate of 30 fps, sending 720p RGB24 video frames means processing approximately 80 megabytes per second of content, which is substantially compressed by the H.264 video codec before network transmission.</span></span>

<span data-ttu-id="664a7-148">プラットフォームの高度な機能により、ボットはエンコードされた H.264 フレームとしてビデオを送受信できます。</span><span class="sxs-lookup"><span data-stu-id="664a7-148">An advanced capability of the platform allows a bot to send or receive video as encoded H.264 frames.</span></span> <span data-ttu-id="664a7-149">これは、独自の H.264 エンコーダーまたはデコーダーを提供するボット、または RAW RGB24 または NV12 ビットマップにデコードされたビデオ ストリームを必要としないボットをサポートします。</span><span class="sxs-lookup"><span data-stu-id="664a7-149">This supports bots which provide their own H.264 encoder or decoder, or do not require the video stream decoded into raw RGB24 or NV12 bitmaps.</span></span>

<span data-ttu-id="664a7-150">次のセクションでは、どの会議参加者が話しているのか、どの会議参加者がアクティブで優勢なスピーカーかについて詳しくは説明します。</span><span class="sxs-lookup"><span data-stu-id="664a7-150">The next section provides details about which meeting participants are speaking that is which are active and dominant speakers.</span></span>

## <a name="active-and-dominant-speakers"></a><span data-ttu-id="664a7-151">アクティブスピーカーとドミナント スピーカー</span><span class="sxs-lookup"><span data-stu-id="664a7-151">Active and dominant speakers</span></span>

<span data-ttu-id="664a7-152">複数の参加者で構成される Teams 会議に参加すると、ボットはどの会議参加者が現在話しているのか識別できます。</span><span class="sxs-lookup"><span data-stu-id="664a7-152">When joined to a Teams meeting consisting of multiple participants, a bot can identify which meeting participants are currently speaking.</span></span> <span data-ttu-id="664a7-153">アクティブなスピーカーは、受信した各オーディオ フレームで聞こえる参加者を識別します。</span><span class="sxs-lookup"><span data-stu-id="664a7-153">Active speakers identify which participants are being heard in each received audio frame.</span></span> <span data-ttu-id="664a7-154">主要なスピーカーは、すべてのオーディオ フレームで音声が聞こえない場合でも、グループ会話で現在最もアクティブまたは支配的な参加者を識別します。</span><span class="sxs-lookup"><span data-stu-id="664a7-154">Dominant speakers identify which participants are currently most active or dominant in the group conversation, even though their voice is not heard in every audio frame.</span></span> <span data-ttu-id="664a7-155">参加者が交代で話すので、一連の優勢なスピーカーが変わる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="664a7-155">The set of dominant speakers can change as different participants take turns speaking.</span></span>

<span data-ttu-id="664a7-156">次のセクションでは、ボットによって行われたビデオ サブスクリプション要求の詳細を示します。</span><span class="sxs-lookup"><span data-stu-id="664a7-156">The next section provides details about video subscription requests made by a bot.</span></span>

## <a name="video-subscription"></a><span data-ttu-id="664a7-157">ビデオサブスクリプション</span><span class="sxs-lookup"><span data-stu-id="664a7-157">Video subscription</span></span>

<span data-ttu-id="664a7-158">1:1 呼び出しでは、ボットがビデオの受信を有効にしている場合、ボットは発信者のビデオを自動的に受信します。</span><span class="sxs-lookup"><span data-stu-id="664a7-158">In a 1:1 call, the bot automatically receives the video of the caller if the bot is enabled to receive the video.</span></span> <span data-ttu-id="664a7-159">Teams 会議では、ボットはプラットフォームに対して、表示する参加者を示す必要があります。</span><span class="sxs-lookup"><span data-stu-id="664a7-159">In a Teams meeting, the bot must indicate to the platform which participants it wants to see.</span></span> <span data-ttu-id="664a7-160">ビデオ サブスクリプションは、ボットが参加者のメイン ビデオまたは画面共有コンテンツを受信する要求です。</span><span class="sxs-lookup"><span data-stu-id="664a7-160">A video subscription is a request by the bot to receive a participant’s main video or screen-sharing content.</span></span> <span data-ttu-id="664a7-161">会議の参加者が会話を行う中で、ボットは、主要なスピーカー セットの更新や、現在画面共有中の参加者を示す通知に基づいて、目的のビデオ サブスクリプションを変更します。</span><span class="sxs-lookup"><span data-stu-id="664a7-161">As the participants in the meeting conduct their conversation, the bot modifies its desired video subscriptions based on updates of the dominant speaker set or notifications indicating which participant is currently screen sharing.</span></span>

<span data-ttu-id="664a7-162">次のセクションでは、インストールする必要がある内容と、アプリケーションホスト型メディア ボットを開発する要件の詳細について説明します。</span><span class="sxs-lookup"><span data-stu-id="664a7-162">The next section provides details about what you must install and the requirements to develop an application-hosted media bot.</span></span>

## <a name="developer-resources"></a><span data-ttu-id="664a7-163">開発者向けリソース</span><span class="sxs-lookup"><span data-stu-id="664a7-163">Developer resources</span></span>

<span data-ttu-id="664a7-164">アプリケーションホスト型メディア ボットを開発するには [、Microsoft.Graph.Calls.Media .NET](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) ライブラリ NuGet パッケージをプロジェクト内にインストールVisual Studioがあります。</span><span class="sxs-lookup"><span data-stu-id="664a7-164">To develop an application-hosted media bot, you must install the [Microsoft.Graph.Calls.Media .NET library](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) NuGet package within your Visual Studio project.</span></span>

<span data-ttu-id="664a7-165">アプリケーションホスト型メディア ボットには、.NET または windows Server C#が必要です。</span><span class="sxs-lookup"><span data-stu-id="664a7-165">Application-hosted media bots require .NET or C# and Windows Server.</span></span> <span data-ttu-id="664a7-166">詳細については、「アプリケーションホスト型メディア ボットの要件と考慮事項 [」を参照してください](requirements-considerations-application-hosted-media-bots.md#c-or-net-and-windows-server-for-development)。</span><span class="sxs-lookup"><span data-stu-id="664a7-166">For more information, see [requirements and considerations for application-hosted media bots](requirements-considerations-application-hosted-media-bots.md#c-or-net-and-windows-server-for-development).</span></span>

## <a name="next-step"></a><span data-ttu-id="664a7-167">次の手順</span><span class="sxs-lookup"><span data-stu-id="664a7-167">Next step</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="664a7-168">通話ボットを登録する</span><span class="sxs-lookup"><span data-stu-id="664a7-168">Register a calling bot</span></span>](~/bots/calls-and-meetings/registering-calling-bot.md)
