---
title: リアルタイムのメディア通話とオンライン会議 (Microsoft Teams
description: リアルタイムの音声およびビデオ通話やオンライン会議を行うボットを構築する上での重要な概念を理解します。
ms.topic: conceptual
localization_priority: Normal
keywords: オーディオ ストリーム ビデオ ストリーム オーディオ/ビデオ通話会議リアルタイム メディア アプリケーションホスト型メディア サービスホスト型メディア
ms.openlocfilehash: 0cfb8f345702f03ae356789d8dad1573902dcfb4
ms.sourcegitcommit: 6a41c529a423c81a184c7a79125dbaaed0179788
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/26/2021
ms.locfileid: "53585950"
---
# <a name="real-time-media-calls-and-meetings-with-microsoft-teams"></a>リアルタイムのメディア通話と会議と会議Microsoft Teams

リアルタイム メディア プラットフォームを使用すると、ボットはリアルタイムの音声、ビデオ、および画面共有を使用して、Microsoft Teams通話や会議を操作できます。 リアルタイム メディア プラットフォームは、ボットが音声およびビデオ コンテンツ フレームをフレーム別に送受信できる高度な機能です。 ボットは、音声、ビデオ、および画面共有メディア ストリームへの生のアクセス権を持っています。 すべてのメディア処理に対してリアルタイム メディア プラットフォームに依存する、サービスホスト型メディア ボットが簡単です。 メディア自体を処理するボットは、アプリケーションホスト型メディア ボットと呼ばれる。

たとえば、ボットとの 1:1 呼び出しでは、ユーザーが話す通り、ボットは 1 秒あたり 50 のオーディオ フレームを受け取ります。 ボットは、各フレームが 20 ミリ秒 (ms) のオーディオ フレームを受信します。 アプリケーションホスト型メディア ボットは、オーディオ フレームの受信時にリアルタイムの音声認識を実行できます。 ユーザーが発言を停止した後、録音を待つ必要はありません。 ボットは、ビデオ ベースの画面共有コンテンツを含む高解像度ビデオを送受信できます。

プラットフォームは、ボットがメディアを送受信する単純なソケットのような API を提供します。 オーディオまたはビデオ パケットのリアルタイム エンコードとデコードを処理します。 オーディオには SILK や G.722、ビデオには H.264 などのコーデックを使用します。 プラットフォームは、すべてのメディア パケットの暗号化または復号化、およびパケット ネットワークの送信も処理します。 ボットは、実際のオーディオまたはビデオ コンテンツにのみ関係します。 リアルタイムのメディア ボットは、1:1 の通話と複数の参加者との会議に参加します。

## <a name="media-session"></a>メディア セッション

リアルタイム メディア ボットは、サポートする必要があるモダリティを宣言する必要があります。 リアルタイム メディア ボットは、着信呼び出しに応答するか、会議に参加するときにサポートを宣言Teamsがあります。 サポートされているモダリティごとに、ボットはメディアの送受信、受信のみ、または送信のみ可能かどうかを宣言します。 たとえば、1:1 通話を処理するように設計Teams、音声の送受信の両方が必要です。 ただし、ボットは呼び出し元のビデオを受信する必要がなか、ビデオのみを送信する必要があります。 ボットと呼び出し元または会議の間に確立Teamsビデオモダリティのセットは、メディア セッションと呼ばれる。

メイン ビデオとビデオ ベースの画面共有という 2 種類のビデオ モダリティがサポートされています。 メイン ビデオは、ユーザーの Web カメラからビデオを転送するために使用されます。 ビデオベースの画面共有を使用すると、ユーザーは画面を共有できます。 このプラットフォームを使用すると、ボットは両方の種類のビデオを送受信できます。

会議に参加するとTeams、ボットはメディア セッションごとに最大 10 の複数のメイン ビデオ ストリームを同時に受信できます。 ボットは会議に複数の参加者を表示できます。

次のセクションでは、一連のフレームとしてメディアを送受信するボットの詳細について説明します。

## <a name="frames-and-frame-rate"></a>フレームとフレーム レート

リアルタイム メディア ボットは、メディア セッションのオーディオモダリティとビデオ モダリティを直接操作します。 ボットは一連のフレームとしてメディアを送受信し、各フレームはコンテンツ ユニットです。 1 秒のオーディオは、50 フレームのシーケンスとして送信されます。 各フレームには、1 秒の音声コンテンツの 1/50 分の 1 である 20 ミリ秒が含まれる。 ビデオの 1 秒は、30 の画像のシーケンスとして送信されます。 各画像は、次のビデオ フレームの 1/30 秒前のわずか 33.3 ミリ秒で表示されます。 1 秒あたりに送信またはレンダリングされるフレームの数をフレーム レートと呼ぶ。

次のセクションでは、リアルタイムのメディア通話と会議で使用されるオーディオとビデオの形式の詳細について説明します。

## <a name="audio-and-video-format"></a>オーディオとビデオの形式

オーディオ形式では、オーディオの各秒は 16,000 サンプルとして表され、各サンプルには 16 ビットのデータが含まれています。 20 ミリ秒のオーディオ フレームには、640 バイトのデータである 320 サンプルが含まれます。

ビデオ形式では、複数の形式がサポートされています。 ビデオ形式の 2 つの主要なプロパティは、そのフレーム サイズと色の形式です。 サポートされるフレーム サイズには、360 ピクセルの 640x360、720 ピクセルの 1280x720、1920x1080 (1080 ピクセル) が含まれます。 サポートされるカラー形式には、1 ピクセルあたり 12 ビットの NV12 と、1 ピクセルあたり 24 ビットの RGB24 が含まれます。

720-p ビデオ フレームには、1280 回 720 の 921,600 ピクセルが含まれています。 RGB24 カラー形式では、各ピクセルは 3 バイトとして表され、24 ビット (赤、緑、青の各色コンポーネントの 1 バイトを含む) として表されます。 1 つの 720p RGB24 ビデオ フレームには、1 ピクセルあたり 921,600 ピクセルの 3 バイトの 2,764,800 バイトのデータが必要です。 可変フレーム レートでは、720p RGB24 ビデオ フレームを送信すると、約 80 MB/秒のコンテンツが処理されます。 80 メガバイトは、ネットワーク伝送前に H.264 ビデオ コーデックによって実質的に圧縮されます。

プラットフォームの高度な機能により、ボットはエンコードされた H.264 フレームとしてビデオを送受信できます。 独自の H.264 エンコーダーまたはデコーダーを提供するボットがサポートされています。または、RAW RGB24 または NV12 ビットマップにデコードされたビデオ ストリームは必要ありません。

次のセクションでは、どの会議参加者が話しているのか、どの会議参加者がアクティブで優勢なスピーカーかについて詳しくは説明します。

## <a name="active-and-dominant-speakers"></a>アクティブスピーカーとドミナント スピーカー

複数の参加者で構成Teams会議に参加すると、ボットはどの会議参加者が現在話しているのか識別できます。 アクティブなスピーカーは、受信した各オーディオ フレームで聞こえる参加者を識別します。 ドミナントスピーカーは、グループ会話で現在最もアクティブまたは支配的な参加者を識別しますが、すべてのオーディオ フレームで音声が聞こえない場合があります。 参加者が交代で話すので、一連の優勢なスピーカーが変わる可能性があります。

次のセクションでは、ボットによって行われたビデオ サブスクリプション要求の詳細を示します。

## <a name="video-subscription"></a>ビデオサブスクリプション

1:1 呼び出しでは、ボットがビデオの受信を有効にしている場合、ボットは発信者のビデオを自動的に受信します。 会議のTeams、ボットはプラットフォームに表示する参加者を示す必要があります。 ビデオ サブスクリプションは、ボットが参加者のメイン ビデオまたは画面共有コンテンツを受信する要求です。 会議の参加者が会話を行う際に、ボットは必要なビデオ サブスクリプションを変更します。 ボットは、主要なスピーカー セットの更新や、現在画面共有中の参加者を示す通知に基づいてビデオ サブスクリプションを変更します。

次のセクションでは、インストールする必要がある内容と、アプリケーションホスト型メディア ボットを開発する要件の詳細について説明します。

## <a name="developer-resources"></a>開発者向けリソース

アプリケーションホスト型メディア ボットを開発するには[、Microsoft.Graph をインストールする必要があります。Calls.Media .NET ライブラリは、NuGet](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/)内のパッケージVisual Studioします。

アプリケーションホスト型メディア ボットでは、.NET またはサーバー C#サーバー Windows必要です。 詳細については、「アプリケーションホスト型メディア ボットの要件と考慮事項 [」を参照してください](requirements-considerations-application-hosted-media-bots.md#c-or-net-and-windows-server-for-development)。

## <a name="next-step"></a>次の手順

> [!div class="nextstepaction"]
> [通話ボットを登録する](~/bots/calls-and-meetings/registering-calling-bot.md)
