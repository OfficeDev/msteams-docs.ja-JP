### YamlMime:Tutorial
title: Teams コネクタを構築する
metadata:
  title: Teams コネクタを構築する
  description: このラーニング モジュールでは、Microsoft Teams アプリ用のコネクタを構成してテストする方法について説明します。
  audience: Developer
  level: Beginner
  ms.date: 02/14/2022
  ms.topic: interactive-tutorial
  nextTutorialHref: webhooks-and-connectors/how-to/connectors-creating.md
  nextTutorialTitle: Webhook とコネクタの詳細
  ms.custom: mvc
  ms.localizationpriority: none
  ms.openlocfilehash: 4dfa99f45d5840d9d344b9255cb63671c7fb4049
  ms.sourcegitcommit: ac59d469b823b80e65ee6f7be11ec5c365977a1c
  ms.translationtype: MT
  ms.contentlocale: ja-JP
  ms.lasthandoff: 10/06/2022
  ms.locfileid: "68490989"
items:
- durationInMinutes: 1
  content: "Microsoft Teams コネクタは、Model-View-Controller (MVC) サンプル タスク管理アプリケーションであり、ASP.NET Web アプリケーション テンプレートを使用して生成されます。 ほとんどのコードは、基本的な MVC 構成またはタスク管理システムに関連しています。 既存のOffice 365 コネクタを追加したり、Teams 内で新しいコネクタを作成したりできます。\n\n**コネクタ コードの種類**\n\n  * **ConnectorController.cs**: アクションを設定して保存します。\n  * **TaskController.cs**: アクションを作成して更新します。\n  \n**Microsoft Teams コネクタの主な機能**\n\n  * 実際のタスク管理システムをシミュレートします。\n  * ユーザーがタスクを作成して表示できるようにします。\n  * コンテンツをランダムに生成します。 \n  * Microsoft Teams チャネルに送信される通知をシミュレートします。 \n\nこのステップ バイ ステップ ガイドは、Microsoft Teams でコネクタを作成してテストするのに役立ちます。 次の出力が表示されます。\n   \n:::image type=\"content\" source=\"../msteams-platform/assets/images/sbs-meetings-stage-view/mobile.png\" alt-text=\"概要イメージ\":::\n   \n"
- title: 前提条件
  durationInMinutes: 1
  content: "次のツールをインストールし、開発環境をセットアップしてください。 \n\n | &nbsp; | インストール | 使用するには... |\n | --- | --- | --- |\n | **必須** | &nbsp; | &nbsp; |\n | &nbsp; | [Microsoft Teams](https://www.microsoft.com/microsoft-teams/download-app) | Microsoft Teams は、チャット、会議、通話、すべて 1 か所のアプリを通じて、共同作業するすべてのユーザーと共同作業を行います。|\n | &nbsp; | [Visual Studio 2022 バージョン 17.3](https://visualstudio.microsoft.com)<br> 次の 2 つのワークロードのいずれかをインストールします。<br> • **ASP.NET と Web 開発** <br> • **.NET Core クロスプラットフォーム開発** | Visual Studio 2022 でエンタープライズ バージョンをインストールし、ワークロードをインストールできます。 |\n | &nbsp; | [ngrok](https://ngrok.com/download) | Teams アプリの機能 (会話ボット、メッセージ拡張機能、受信 Webhook) には、受信接続が必要です。 トンネルは、開発システムを Teams に接続します。 タブのみを含むアプリでは必須ではありません。 このパッケージはプロジェクト ディレクトリ内にインストールされます (npm `devDependencies` を使用)。 |\n\n  > [!NOTE]\n  > ngrok をダウンロードしたら、サインアップして [authtoken](https://ngrok.com/download) をインストールします。\n"
- title: ローカル環境を設定する
  durationInMinutes: 1
  content: "\n1. [Microsoft Teams のサンプルを](https://github.com/OfficeDev/Microsoft-Teams-Samples)開きます。\n1. [ **コード**] を選択します。\n1. ドロップダウン メニューから[ **Open with GitHub Desktop]\\(GitHub Desktop で開く\\**) を選択します。\n\n   :::image type=\"content\" source=\"../msteams-platform/assets/images/sbs-meetings-stage-view/clone-repository_1.png\" alt-text=\"リポジトリを複製する\":::\n\n1. [ **複製**] を選択します。 \n"
- title: 開発者向けプレビューを有効にする
  durationInMinutes: 1
  content: "\n1. テナントの管理コンソールでアプリのアップロードを有効にします。\n    1. 管理者の資格情報で [Microsoft 365 管理センター](https://admin.microsoft.com/Adminportal/Home?source=applauncher#/homepage#/)にサインインします。\n    1. 左側のパネルで、[ **すべて表示**] を選択します。\n    1. [ **Teams] を選択します**。\n\n       :::image type=\"content\" source=\"./assets/images/meeting-token-generator/meeting-token-generator-admincenter_1.png\" alt-text=\"管理センター メニュー\":::\n\n1.  左側のパネルで、[ **Teams アプリ**] を選択します。\n   \n1.  **[セットアップ ポリシー] を選択します**。\n\n       :::image type=\"content\" source=\"~/assets/images/meeting-token-generator/meeting-token-generator-setuppolicies_1.png\" alt-text=\"セットアップ ポリシー\":::\n\n1.  **[グローバル] (組織全体の既定値)** を選択します。\n\n      :::image type=\"content\" source=\"~/assets/images/sbs-connector/Global_1.png\" alt-text=\"Global\":::\n\n1.   **[カスタム アプリのアップロード****] を [オン]** の位置に切り替えます。\n\n      :::image type=\"content\" source=\"~/assets/images/meeting-token-generator/meeting-token-generator-toggleOn_1.png\" alt-text=\"オンに切り替える\":::\n\n1.   **[保存]** を選択します。\n   \n      テスト テナントで、カスタムアプリのサイドローディングができるようになりました。\n\n      > [!TIP]\n      > サイドローディングがアクティブになるまでに時間がかかります。\n\n1.   **Microsoft Teams** に移動します。\n\n1.   Teams インターフェイス `...`の右上隅にある [ .\n\n1.   **[バージョン情報]** を選びます。\n\n1.   **[開発者プレビュー**] を選択します。\n\n      :::image type=\"content\" source=\"~/assets/images/meeting-token-generator/meeting-token-generator-devpreview_1.png\" alt-text=\"開発者向けプレビュー\":::\n\n1.   [ **開発者向けプレビューに切り替える**] を選択します。\n"
- title: コネクタを構成する
  durationInMinutes: 1
  content: "\n1. 複製されたリポジトリの **TeamsToDoAppconnector.sln** に移動します。\n\n   :::image type=\"content\" source=\"~/assets/images/sbs-connector/sln_1.png\" alt-text=\"Sln\":::\n\n2. ngrok またはコマンド プロンプトを使用して、ローカルで実行されている Web サーバーのパブリックに利用可能な HTTPS エンドポイントへのトンネルを作成します。 ngrok で次のコマンドを実行します。\n\n    ```bash\n    ngrok http --host-header=localhost 3978\n    ``` \n   > [!TIP]\n   > **ERR_NGROK_4018** が発生した場合は、コマンド プロンプトに表示されている手順に従って、サインアップして ngrok を認証します。 `ngrok http --host-header=localhost 3978` コマンドを実行します。\n\n   :::image type=\"content\" source=\"~/assets/images/sbs-connector/ngrok1_1.png\" alt-text=\"ngrok1\":::\n\n3. [コネクタ開発者ポータル](https://outlook.office.com/connectors/publish)に移動します。\n4. **[新しいコネクタ]** を選択します。\n \n   :::image type=\"content\" source=\"~/assets/images/sbs-connector/connector_1.png\" alt-text=\"新しいコネクタを追加する\":::\n  \n5. 次の詳細を入力して、新しいコネクタを登録します。\n\n   * コネクタ名\n   * ロゴ\n   * アプリの簡単な説明 (10 語以下)\n   * コネクタの動作の詳細な説明 (3 ~ 5 文)\n   * 会社の Web サイト\n   * コネクタの [構成] ページ `https://[BASE_URI]/connector/setup`\n   * 有効なドメイン `https Base URL`\n   * [ **はい** ] を選択して、コネクタ カードでアクションを有効にします\n   * アクション URL as `https://[BASE_URI]/Task/Update`\n   * **[アプリ開発者契約の使用条件に同意する**] を選択します\n   * **[保存]** を選びます。\n\n   :::image type=\"content\" source=\"~/assets/images/sbs-connector/basicdetails_1.png\" alt-text=\"basicdetails\":::\n\n   新しいコネクタが正常に登録されました。 ウィンドウに登録済みのコネクタ ID が表示されます。\n\n   :::image type=\"content\" source=\"~/assets/images/sbs-connector/output_1.png\" alt-text=\"出力\":::\n  \n   > [!TIP]\n   > 今後の参照用にコネクタ ID を保存します。\n\n6. **TeamsToDoAppConnector フォルダーから TeamsToDoAppConnector.csproj** ファイル **を選択します**。\n\n   :::image type=\"content\" source=\"~/assets/images/sbs-connector/web_1.png\" alt-text=\"web\"::: \n\n7. Visual Studio で開きます。 \n\n8. 変数`ngrok https forwarding url`を `configuration.appSettings.BaseUrl` .\n   \n   :::image type=\"content\" source=\"~/assets/images/sbs-connector/manifest_1.png\" alt-text=\"マニフェスト\"::: \n\n9. **F5** キーを押してプロジェクトを実行します。\n   Web ページが開きます。 \n\n   ![Local-host](~\\assets\\images/sbs-connector/local-host.png)    \n"
- title: Microsoft Teams のテスト コネクタ
  durationInMinutes: 5
  content: "\n1. 複製されたリポジトリで、 **TeamsToDoAppConnector > TeamsAppPackages > csharp に移動します**。\n\n1. **マニフェスト** フォルダーに存在する次のファイルを含む.zipを作成します。 \n   * manifest.json\n   * icon-outline.png\n   * icon-color.png\n\n   :::image type=\"content\" source=\"~/assets/images/sbs-connector/zip_1.png\" alt-text=\"マニフェストの場所\":::\n\n1. **Microsoft Teams** に移動します。\n1. 左側のパネルで、[**アプリ** > の管理] を選択 **します**。\n\n   :::image type=\"content\" source=\"~/assets/images/sbs-connector/manageapp_1.png\" alt-text=\"manageapp\":::\n\n1. **[カスタム アプリをアップロードする]** を選択します。\n\n   :::image type=\"content\" source=\"~/assets/images/sbs-connector/upload_1.png\" alt-text=\"アップロード\":::\n  \n1. **[開く]** を選択して、**マニフェスト** フォルダーに作成した.zip ファイルをアップロードします。\n\n   :::image type=\"content\" source=\"~/assets/images/sbs-connector/open_1.png\" alt-text=\"マニフェスト\":::\n\n1. **[チームに追加] を選択します**。\n\n   :::image type=\"content\" source=\"~/assets/images/sbs-connector/addtoteam_1.png\" alt-text=\"アプリを追加する\":::\n\n1. 一覧からチーム名またはチャネル名を選択します。\n\n   :::image type=\"content\" source=\"~/assets/images/sbs-connector/channel_1.png\" alt-text=\"チャネルを選択する\":::\n\n1. [ **コネクタのセットアップ] を選択します**。\n\n1. 左側のパネルで、検索バー **で Teams ToDo 通知** コネクタを検索し、[構成] を選択 **します**。\n\n   :::image type=\"content\" source=\"~/assets/images/sbs-connector/configure_1.png\" alt-text=\"構成\":::\n\n1. 登録ページで **[作成済み]** または [ **更新済** み] を選択し、[保存] を選択 **します**。\n\n   :::image type=\"content\" source=\"~/assets/images/sbs-connector/create_1.png\" alt-text=\"select\":::\n\n   構成後、チャネルに通知が表示され、 **タスク マネージャー ポータル** へのリンクが表示されます。\n\n   ![通知メッセージ](~/assets/images/sbs-connector/notification.png)\n\n12. **タスク マネージャー ポータル** に移動します。\n\n    :::image type=\"content\" source=\"~/assets/images/sbs-connector/taskportal_1.png\" alt-text=\"タスク マネージャー ポータル\":::\n\n13. [ **新規作成**] を選択します。\n   \n    :::image type=\"content\" source=\"~/assets/images/sbs-connector/tasks_1.png\" alt-text=\"新しいタスクを作成する\":::\n   \n14. 新しいタスクの詳細を入力します。\n\n    * Title\n    * 説明\n    * 割り当て対象\n\n    :::image type=\"content\" source=\"~/assets/images/sbs-connector/details_1.png\" alt-text=\"details\":::\n\n15. **[保存]** を選択します。 \n  \n    メッセージ カードは、登録済みの Teams チャネルに表示されます。\n   \n    ![メッセージ](~/assets/images/sbs-connector/messagecard.png)\n\n    > [!TIP]\n    > メッセージ カードで使用可能な操作可能なボタンを試すことができます。\n"
- title: 課題の完了
  durationInMinutes: 1
  content: >
    このようなものを思いついたのですか?


    :::image type="content" source="../msteams-platform/assets/images/sbs-meetings-stage-view/mobile.png" alt-text="最終的な出力":::
- content: '**Microsoft Teams コネクタ** の使用を開始するためのチュートリアルを完了しました。'
