### YamlMime:Tutorial
title: 会議のコンテンツ バブルを生成する
metadata:
  title: 会議のコンテンツ バブルを生成する
  description: このラーニング モジュールでは、Teams のボットと出席者を使用して会議コンテンツ バブルに返信を送信する方法について説明します。
  audience: Developer
  level: Beginner
  ms.date: 12/03/2021
  ms.topic: interactive-tutorial
  nextTutorialHref: apps-in-teams-meetings/enable-and-configure-your-app-for-teams-meetings.md
  nextTutorialTitle: 会議用のアプリを有効にして構成する方法の詳細
  ms.custom: mvc
  ms.localizationpriority: high
  ms.openlocfilehash: c7efecb5f0313344ac9a70c6b632727ce086daf5
  ms.sourcegitcommit: 4eeede81a0ae8ec985c6a1ad4f608df58371402f
  ms.translationtype: MT
  ms.contentlocale: ja-JP
  ms.lasthandoff: 07/14/2022
  ms.locfileid: "66793090"
items:
- durationInMinutes: 1
  content: "Teams は、ボットを使用してコンテンツ バブルを生成し、対話するのに役立ちます。\n\n**会議コンテンツ バブルの主な機能**:\n\n* アダプティブ カードに一覧表示されている議題項目を表示します。\n* 特定の議題で任意のオプションを選択します。\n* チャットで送信されたコンテンツ バブルまたはアダプティブ カードにフィードバックを送信します。\n\n> [!NOTE]\n> 会議コンテンツ バブルは、Azure AD ユーザーでのみ使用でき、匿名ユーザーには使用できません。\n\nこのステップ バイ ステップ ガイドは、Teams 会議のボットと出席者を使用して会議コンテンツバブルを生成するのに役立ちます。 次の出力が表示されます。\n\n  :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/desktop-and-mobile-image-final.png\" alt-text=\"会議コンテンツバブルの概要\":::\n\n \n"
- title: 前提条件
  durationInMinutes: 1
  content: "次のツールをインストールし、開発環境を設定してください。  \n\n* 有効なアカウントを持つ [Microsoft Teams](https://teams.microsoft.com/)\n* [.NET Core SDK の最新バージョン](https://dotnet.microsoft.com/download) \n* [Visual Studio の最新バージョン](https://visualstudio.microsoft.com/downloads/)\n* 最新[バージョンの ngrok](https://ngrok.com/download) (devbox テストまたは同等のトンネリング ソリューションのみ)\n\n  > [!NOTE]\n  > ngrok をダウンロードしたら、サインアップして [authtoken](https://ngrok.com/download) をインストールします。\n\n[C#](/dotnet/csharp/fundamentals/tutorials/how-to-display-command-line-arguments) に関する実用的な知識があることを確認します。\n"
- title: ローカル環境を設定する
  durationInMinutes: 1
  content: "\n1. [Microsoft Teams のサンプルを](https://github.com/OfficeDev/Microsoft-Teams-Samples)開きます。\n1. [ **コード**] を選択します。\n1. ドロップダウン メニューから[ **Open with GitHub Desktop]\\(GitHub Desktop で開く\\**) を選択します。\n\n   :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-token-generator-clonerepository.png\" alt-text=\"リポジトリを複製する\":::\n\n1. [ **複製**] を選択します。 \n"
- title: ボットを作成して登録する
  durationInMinutes: 5
  content: "次の手順は、ボットを作成してAzure portalに登録するのに役立ちます。\n\n* Azure bot リソースを作成して、Azure Bot Serviceにボットを登録します。\n* ボットの SSO 認証を有効にするクライアント シークレットを作成します。\n* ボットをデプロイする Teams チャネルを追加します。\n* ngrok を使用して、Web サーバーのエンドポイントへのトンネルを作成します。\n* 作成した ngrok トンネルにメッセージング エンドポイントを追加します。\n\n**Azure Bot リソースを作成するには**\n\n1. [Azure portal](https://portal.azure.com/) にアクセスします。\n1. **[リソースの作成]** を選択します。\n1. 検索ボックスに「 **Azure Bot**」と入力します。\n1. **Enter** キーを押します。\n1. **Azure Bot** を選択します。\n\n    :::image type=\"content\" source=\"./assets/images/azure-bot.png\" alt-text=\"Azure ボット。\":::\n\n1. **[作成]** を選択します。\n1. ボット ハンドルに必要な **ボット ハンドル** 名を入力します。\n1. ドロップダウン リストから **[サブスクリプション]** を選択します。\n1. ドロップダウン リストから **[リソース グループ]** を選択します。\n \n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-token-generator-review-plus-create.png\" alt-text=\"リソース Azure ボットを作成する\":::\n\n   新しいリソース グループを作成することもできます ([新しいリソースの **作成** ] を選択>、リソース名を入力> **[OK**] を選択します)。\n\n1. 新しいリソース グループを作成した場合は、[新しいリソース グループの場所] ドロップダウン リストから必要な **場所を** 選択します。\n\n     :::image type=\"content\" source=\"~/assets/images/bots/newresource.png\" alt-text=\"リソース Azure ボットを作成する\":::\n\n1. **[Microsoft アプリ ID**] セクションでは、既定で [**新しい Microsoft アプリ ID の作成]** が選択されています。 \n\n   [ **既存のアプリの登録を使用** する] を選択し、 **既存のアプリ ID** と **既存のアプリ パスワード** を入力するか、[ **新しい Microsoft アプリ ID の作成**] を選択します。\n\n   > [!NOTE]\n   > 同じ **Microsoft アプリ ID** を持つ複数のボットを作成することはできません。\n\n1. [**マルチテナント** としての **アプリの種類**] を選択します。\n\n1. **[確認 + 作成]** を選びます。\n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/Review-create.png\" alt-text=\"作成を確認する\":::\n\n1. 検証に合格した場合は、**[作成]** を選択します。\n\n    ボット サービスがプロビジョニングされるまで少し時間がかかります。\n\n1. [**リソースに移動**] を選びます。 \n\n     :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-token-generator-botdeployment.png\" alt-text=\"アプリをデプロイする\":::\n    \n    Azure ボットが作成されます。\n\n     :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-content-bubble-creating-resource-group.png\" alt-text=\"Azure ボット リソースが作成されました\":::\n\n**クライアント シークレットを作成するには**\n\n  新しい **Microsoft アプリ ID** を作成した場合は、次の手順を実行します。\n\n1. 左側のパネルで、[構成] を選択 **します**。 \n\n   > [!TIP]\n   > 今後参照できるように **、Microsoft アプリ ID** または **クライアント ID を** 保存します。      \n\n1. **Microsoft アプリ ID** の横にある [**管理**] を選択します。\n\n   :::image type=\"content\" source=\"~/assets/images/manage-bot-label.png\" alt-text=\"管理\":::\n\n1. [ **クライアント シークレット** ] セクションで、[ **新しいクライアント シークレット**] を選択します。 \n\n     :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-token-generator-newclientsecret.png\" alt-text=\"新しいクライアント シークレット\":::\n    \n   [ **クライアント シークレットの追加]** ウィンドウが表示されます。  \n\n1. **「説明」と入力します**。\n\n1. **[追加]** を選択します。\n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-token-generator-clientsecret.png\" alt-text=\"クライアント シークレットをアプリに追加する\":::\n\n1. [ **値** ] 列で、[ **クリップボードにコピー**] を選択します。\n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-content-bubble-client-secret.png\" alt-text=\"クライアント シークレットの値\":::\n   \n   > [!TIP]\n   > 今後参照できるように **、クライアント シークレットの** 値またはアプリ パスワードを保存します。\n\n**Teams チャネルを追加するには**\n\n1. [**ホーム**] を選択します。\n\n1. **最近使用したリソース** からボットを選択します。\n\n1. 左側のウィンドウで **[チャネル**] を選択し、**Microsoft Teams** を選択します。 <img src=\"~/assets/images/bots/teamsicon.png\" alt=\"Teams icon\" width=\"20\"/>.\n\n    :::image type=\"content\" source=\"~/assets/images/adaptive-cards/channel-teams.png\" alt-text=\"チャネルで Teams を選択する\":::\n\n1. **Microsoft Teams を選択する** <img src=\"~/assets/images/bots/teamsicon.png\" alt=\"Teams icon\" width=\"20\"/>.\n\n1. [ **利用規約**] に同意するには、チェック ボックスをオンにします。\n\n1. **[同意する**] を選択します。\n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-token-generator-terms.png\" alt-text=\"利用規約\":::\n\n1. **[適用]** を選択します。\n\n**ローカル Web サーバーのトンネルを作成するには**\n\nngrok またはコマンド プロンプトを使用して、ローカルで実行されている Web サーバーのパブリックに利用可能な HTTPS エンドポイントへのトンネルを作成します。 ngrok で次のコマンドを実行します。\n\n ```bash\n ngrok http -host-header=localhost 3978\n ```\n\n > [!NOTE]\n > ngrok トンネルの作成中に、コマンド **ライン** を選択してアプリを実行する代わりに`3978`使用`localhost 5000`します。\n \n > [!TIP]\n > **ERR_NGROK_4018** が発生した場合は、コマンド プロンプトに記載されている手順に従って、ngrok にサインアップして認証します。 `ngrok http -host-header=localhost 3978` コマンドを実行します。\n\n\n**メッセージング エンドポイントを追加するには**\n\n1. ngrok から HTTPS URL をコピーします。\n\n   :::image type=\"content\" source=\"../msteams-platform/assets/images/ngrok-url.png\" alt-text=\"ngrok HTTPS URL\":::\n\n    > [!NOTE]\n    > ngrok の HTTPS URL は、完全修飾ドメイン名です。\n    > は `WebAppDomain` 、完全修飾ドメイン名であり、ドメイン名には含 `https://` まれません。\n\n1. 作成した Azure ボットの **設定** で、[構成] を選択 **します**。\n\n1. **メッセージング エンドポイント** で、ngrok から入手できる HTTPS URL を使用し、URL の最後に **/api/messages** を追加します。\n\n     :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-content-bubble-config-messaging-end-point.png\" alt-text=\"メッセージング エンドポイント\":::\n\n1. **[適用]** を選択します。\n\n    Azure Bot Serviceでボットが正常に設定されました。\n"
- title: Azure AD アプリの登録を更新する
  durationInMinutes: 1
  content: "\n1. [Azure portal](https://portal.azure.com/) にアクセスします。\n\n1. **Azure Active Directory** を選択します。\n\n1. 左側のナビゲーション パネルで、[ **アプリの登録**] を選択します。\n\n1. ボットを選択します。\n\n1. [**管理**] で [**API の公開**] を選択します。\n\n1. [ **設定**] を選択します。\n\n1. **アプリケーション ID URI を** 次の`api://your ngrok/botid-{AppID}`形式で設定します。\n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-content-bubble-set-api.png\" alt-text=\"リンクを設定する\":::\n\n   次の図は、ドメイン名を示しています。\n    \n     :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-content-bubble-exposeapi.png\" alt-text=\"アプリ ID URI\":::\n\n    > [!NOTE]\n    > ngrok などのトンネリング サービスを使用している場合は、ngrok サブドメインが変更されるたびに値を更新してください。\n    > `For example: api://f631****.ngrok.io/92c11075-c629-4a1e-ab58-02b4fd4204c2`は、新しい ngrok サブドメイン名です `f631****.ngrok.io` 。\n\n1. **[スコープの追加]** を選択します。 \n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/selectscope.png\" alt-text=\"スコープの追加\":::\n        \n1. 表示されるパネルで、**スコープ名** として入力`access_as_user`します。\n\n1. **[同意できるユーザー] を** `Admins and users`[ .\n\n1. スコープの適切な値を使用して管理者とユーザーの同意プロンプトを `access_as_user` 構成するには、フィールドに次の情報を入力します。</br>\n\n     * **同意表示名管理** 入力`Teams can access the user’s profile`します。\n\n     * **同意の説明管理** 入力`Allows Teams to call the app’s web APIs as the current user`します。\n\n     * **ユーザー同意表示名** として入力`Teams can access the user profile and make requests on the user’s behalf`します。\n\n     * **ユーザーの同意の説明** として入力`Enable Teams to call this app’s APIs with the same rights as the user`します。\n\n   次の図は、フィールドと値を示しています。\n\n      :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-content-bubble-access-as-user.png\" alt-text=\"スコープを追加する\":::\n\n1. **[状態]** が **[有効]** に設定されていることを確認してください。\n\n1. [保存 **するスコープの追加]** を選択します。\n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/add-scope.png\" alt-text=\"スコープを追加する\":::\n\n   > [!NOTE]\n   > **スコープ名** は、最後に追加された **アプリケーション ID** URI と`/access_as_user`一致する必要があります。</br>\n       `api://****.ngrok.io/00000000-0000-0000-0000-000000000000/access_as_user`\n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-content-bubble-add-scope.png\" alt-text=\"スコープ\":::\n\n1. **[承認済みのクライアント アプリケーション]** セクションで、アプリの Web アプリケーションに対して承認するアプリケーションを特定します。 \n\n1. **[クライアント アプリケーションの追加]** を選択します。 \n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-token-generator-selectclientapp.png\" alt-text=\"クライアント アプリを追加する\":::\n\n1. **クライアント ID を** 入力します。 `1fec8e78-bce4-4aaf-ab1b-5451cc387264` Teams モバイルアプリケーションまたはデスクトップ アプリケーションの場合。 \n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-token-generator-addclientapp1.png\" alt-text=\"クライアント アプリケーションを追加する 1\":::\n\n   Teams Web アプリケーションの **クライアント ID:**`5e3ce6c0-2b1f-4285-8d4b-75ee78787346` を入力できます。\n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-token-generator-addclientapp2.png\" alt-text=\"クライアント アプリケーションの追加 2\":::\n\n1. [ **承認されたスコープ]** を選択します。\n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-content-bubble-add-client-app.png\" alt-text=\"クライアント アプリケーションを追加する\":::\n\n   次の図は、クライアント ID を表示します。\n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-content-bubble-client-applications.png\" alt-text=\"クライアント アプリケーション\":::\n\n1. 左側のパネルで、[ **API アクセス許可**] を選択します。 \n\n   > [!NOTE]\n   > ユーザーは、Azure AD アプリが別のテナントに登録されている場合にのみ、これらのアクセス許可に同意する必要があります。\n\n1. [**アクセス許可を追加**] を選択します。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/addpermission.png\" alt-text=\"アクセス許可を追加する\":::\n\n1. **[Microsoft Graph]** を選択します。\n\n1. [**委任されたアクセス許可**] を選択します。\n\n1. 以下のアクセス許可を追加します。</br>\n     * **email**\n     * **offline_access**\n     * **Openid**\n     * **profile**\n     * **User.Read**\n\n1. **[アクセス許可の追加]** を選択します。\n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-token-generator-otherpermissions.png\" alt-text=\"その他のアクセス許可\":::\n\n1. 左側のパネルで [ **認証** ] を選択してリダイレクト URI を設定します。 \n\n   > [!NOTE]\n   > アプリに IT 管理者の同意が付与されていない場合、ユーザーはアプリを初めて使用する際に同意を提供する必要があります。\n           \n     1. **[プラットフォームの追加]** を選択します。\n     1. **[Web]** を選びます。\n\n         :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-content-bubble-platform-web.png\" alt-text=\"Web\":::\n\n     1. 完全修飾ドメイン名に追加して、アプリの `auth-end` リダイレクト URI を入力します。</br> \n       `https://your ngrok/auth-end`. </br>\n\n     1. 次のチェック ボックスをオンにして **、暗黙的な許可フローとハイブリッド フロー** を有効にします。\n         * **ID トークン**\n         * **アクセス トークン**\n\n     1. **[構成]** を選択します。\n\n         :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-content-bubble-config-web.png\" alt-text=\"Auth-end\":::\n"
- title: アプリの設定を設定する
  durationInMinutes: 1
  content: "1. 複製されたリポジトリで **appsettings.json** に移動します。\n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/navigate-to-meeting-content-bubble-repo.png\" alt-text=\"アプリ設定の場所\":::\n\n1. Visual Studio で **appsettings.json を** 開き、次の情報を更新します。  \n\n     * ボットの **Microsoft アプリ ID に** 設定`\"MicrosoftAppId\"`します。\n     * ボットのクライアント シークレット ID 値に設定 `\"MicrosoftAppPassword\"` します。\n     * に設定 `\"BaseURL\"` します `webAppDomain`。\n\n      :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/appsettings-json1.png\" alt-text=\"アプリの設定\":::\n"
- title: マニフェスト ファイルを設定する
  durationInMinutes: 1
  content: >
    1. 複製されたリポジトリで **manifest.json** に移動します。


    1. Visual Studio で **manifest.json を** 開き、次の変更を加えます。

         * **Microsoft アプリ ID** に設定`id`します。
         * **Microsoft アプリ ID** に設定`botId`します。
         * **[Web アプリ ドメイン名]** に設定`validDomains`します。

          > [!NOTE]
          > `WebAppDomain` は ngrok ドメインです。

         :::image type="content" source="~/assets/images/meeting-content-bubble/manifest-set.png" alt-text="マニフェスト イメージ 1":::
- title: サービスをビルドして実行する
  durationInMinutes: 1
  content: "**Visual Studio を使用してサービスをビルドして実行するには**\n\n   1. **Visual Studio を開きます**。\n   1. **ファイル** > **を開く** > **プロジェクト/ソリューション** に移動します。\n\n       :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/meeting-token-generator-VSopenfile.png\" alt-text=\"ファイルを開く\":::\n\n   1. **ContentBubbleBot.sln ファイルを** 開きます。\n\n       :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/proj-sln.png\" alt-text=\"ファイルを開く\":::\n\n   1. **F5** キーを押してプロジェクトを実行します。\n\n      Web ページが開き、メッセージが表示されます **。ボットの準備は完了です。**\n\n       :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/your-bot-is-ready.png\" alt-text=\"アプリの準備完了\"::: \n"
- title: Teams に会議コンテンツ バブル アプリを追加する
  durationInMinutes: 1
  content: "\n1. 複製されたリポジトリで、 **csharp > リソース > マニフェスト** に移動します。\n\n1. **マニフェスト** フォルダーに存在する次のファイルを含む.zipを作成します。 \n   * manifest.json\n   * icon-outline.png\n   * icon-color.png\n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/create-manifest-zip.png\" alt-text=\"Zip ファイル\"::: \n\n1. 発表者と出席者を含む会議を作成します。\n\n1. 会議が作成されたら、[**アプリの追加]** を選択します **+**。\n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/add-an-app.png\" alt-text=\"アプリの追加\"::: \n\n1. ポップアップ ウィンドウで、[ **アプリの管理**] を選択します。\n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/manage-apps.png\" alt-text=\"アプリを管理する\"::: \n\n1. **[カスタム アプリをアップロードする]** を選択します。 \n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/upload-custom-app.png\" alt-text=\"カスタム アプリをアップロードする\"::: \n\n1. **[開く]** を選択して、**マニフェスト** フォルダーに作成した.zip ファイルをアップロードします。\n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/Zip-file.png\" alt-text=\"zip アプリをアップロードする\":::\n\n1. **[追加]** を選択します。\n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/content-bubble-demo.png\" alt-text=\"アプリを追加する\"::: \n\n1. [ **アプリの管理]** セクションには、アプリケーションの一覧が表示されます。\n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/Manage.png\" alt-text=\"アプリを管理する\"::: \n\n1. Teams 会議チャットに移動します。\n\n1. **Content Bubble Demo** アプリは、会議チャットに自動応答を送信します。\n\n     :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/content-bubble-demo-first-reply.png\" alt-text=\"Content Bubble Demo reply\"::: \n\n1. **Hello** メッセージをボットに送信します。\n\n     :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/content-bubble-demo-second-reply.png\" alt-text=\"ボットのメンション\"::: \n\n1. ボットから、アダプティブ カードに一覧表示されている議題項目が送信されます。\n\n1. 任意のオプションを選択し、[ **プッシュ 議題** ] を選択して返信を送信します。\n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/push-agenda.png\" alt-text=\"ボットからアダプティブ カードが送信される\"::: \n\n1. ボットは **フィードバック** アダプティブ カードを送信します。\n\n1. [ **はい**] または [ **いいえ**] を選択します。\n\n1. **[送信]** を選択します。\n\n    :::image type=\"content\" source=\"~/assets/images/meeting-content-bubble/content-bubble-feedback.png\" alt-text=\"ボットからフィードバック カードが送信される\"::: \n\n    ボットからフィードバック メッセージが送信されます。\n  \n"
- title: チャレンジを完了する
  durationInMinutes: 1
  content: >
    このようなことを思い付いたのですか?

     :::image type="content" source="~/assets/images/meeting-content-bubble/desktop-and-mobile-image-final.png" alt-text="Content Bubble Demo デスクトップとモバイル":::
- content: 会議コンテンツバブルアプリの生成を開始するためのチュートリアルを完了しました。
