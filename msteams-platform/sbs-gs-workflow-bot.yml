### YamlMime:Tutorial
title: Teams ワークフロー ボットを作成する
metadata:
  title: Teams ワークフロー ボットを作成する
  description: この学習モジュールでは、アダプティブ カード アクション ハンドラー機能を使用して、Microsoft Teams でワークフロー ボットを作成する方法について説明します。
  audience: Developer
  level: Beginner
  ms.date: 28/09/2022
  ms.topic: interactive-tutorial
  nextTutorialHref: toolkit/add-capability.md
  nextTutorialTitle: Teams アプリに機能を追加する
  ms.custom: mvc
  ms.localizationpriority: none
  ms.openlocfilehash: 39ffa9600836fe58f243140c8a5379006df339eb
  ms.sourcegitcommit: 6926cf5eee55d5047c11ca13afc7f6f23e270396
  ms.translationtype: MT
  ms.contentlocale: ja-JP
  ms.lasthandoff: 10/27/2022
  ms.locfileid: "68741009"
items:
- durationInMinutes: 1
  content: >
    ワークフロー ボットを使用すると、ユーザーはワークフロー ボット アプリのアダプティブ カード アクション ハンドラー機能によって有効になっているアダプティブ カードと対話できます。 トリガーされたアダプティブ カード アクションに応答すると、シーケンシャル ワークフローが完了します。

    アダプティブ カードを取得すると、入力用のカードに 1 つ以上のボタンが表示されます。 また、API を呼び出し、カード アクションに応答して会話で別のアダプティブ カードを送信することもできます。

    このチュートリアルでは以下を学習します。
      * Teams Toolkit を使用してワークフロー ボットを構築する方法。
      * アプリのディレクトリ構造について。
      * アダプティブ カード応答を使用してボットのインストールをカスタマイズします。

    次の出力を確認できます。


    :::image type="content" source="./assets/images/sbs-workflow-bot/sbs-workflow-bot-final-output.png" alt-text="ワークフロー ボットの出力。":::
- title: 前提条件
  durationInMinutes: 1
  content: "アプリをビルドして展開するために必要なツールの一覧を次に示します。\n\n| &nbsp; | インストール | を使用する場合 |\n| --- | --- | --- |\n| **必須** | &nbsp; | &nbsp; |\n| &nbsp; | [Visual Studio Code](https://code.visualstudio.com/download) | JavaScript または TypeScript、ビルド環境。 最新バージョンを使用します。 |\n| &nbsp; | [Teams ツールキット](#install-the-teams-toolkit) | アプリのプロジェクト スキャフォールディングを作成する Microsoft Visual Studio Code 拡張機能。 バージョン 4.0.0 を使用します。|\n| &nbsp; | [Node.js](https://nodejs.org/en/download/) | バックエンド JavaScript ランタイム環境。 バージョン 14 または 16 を使用します。|\n| &nbsp; | [Microsoft Teams](https://www.microsoft.com/microsoft-teams/download-app) | Microsoft Teams は、チャット、会議、通話、すべてのアプリを通じて作業するすべてのユーザーと 1 か所で共同作業を行います。|\n| &nbsp; | [Microsoft&nbsp;Edge](https://www.microsoft.com/edge) (推奨) または [Google Chrome](https://www.google.com/chrome/) | 開発者ツールを備えたブラウザー。 |\n| &nbsp; | [Microsoft 365 開発者アカウント](/microsoftteams/platform/concepts/build-and-test/prepare-your-o365-tenant) | アプリをインストールするための適切なアクセス許可を持つ Teams アカウントにアクセスします。 |\n> [!NOTE]\n> このガイドは、Teams Toolkit バージョン 4.0.0 および Nodejs バージョン 14 および 16 でテストされています。 このガイドの手順は他のバージョンで動作する可能性がありますが、テストされていません。\n\n## <a name=\"prepare-development-environment\"></a>開発環境を準備する\n必要なツールをインストールしたら、開発環境を設定します。\n\n### <a name=\"install-the-teams-toolkit\"></a>Teams Toolkit をインストールする\nTeams Toolkit を使用すると、アプリのクラウド リソースのプロビジョニングとデプロイ、Teams ストアへの公開などを行うツールにより、開発プロセスを簡略化できます。 \n\nツールキットは、 という `TeamsFx`Visual Studio Code または CLI (コマンド ライン インターフェイス) で使用できます。\n\n# <a name=\"visual-studio-code\"></a>[Visual Studio Code](#tab/vscode)\n\n1. Visual Studio Code を開き、[ **拡張機能** ] を選択します (**Ctrl + Shift + X** / **⌘⇧-X** または **[> 拡張機能の表示**] )。\n1. 検索ボックスに、「**Teams Toolkit**」と入力します。\n1. Teams Toolkit の横にある **[インストール]** を選択します。\n   :::image type=\"content\" source=\"~/assets/images/sbs-command-bot/teams-toolkit.png\" alt-text=\"図は、Teams Toolkit 拡張機能のインストールを示しています。\":::\n\nTeams ツールキット :::image type=\"content\" source=\"~/assets/images/teams-toolkit-v2/prerequisites/hw-teams-toolkit-sidebar-icon.png\" alt-text=\"の図には、Visual Studio Code サイド バーの Teams Toolkit アイコンが表示されます。\"::: アイコンは、インストール後に Visual Studio Code サイド バーに表示されます。\n    \nTeams Toolkit は、[Visual Studio Code Marketplace](https://marketplace.visualstudio.com/items?itemName=TeamsDevApp.ms-teams-vscode-extension) にもあります。\n\n# <a name=\"command-line\"></a>[コマンド ライン](#tab/cli)\nTeamsFx CLI をインストールするには、`npm` パッケージ マネージャーを使用します。\n``` bash\nnpm install -g @microsoft/teamsfx-cli\n```\n構成によっては、CLI をインストールするために `sudo` を使用しなければならないこともあります。\n``` bash\nsudo npm install -g --unsafe-perm @microsoft/teamsfx-cli\n```\nLinux および macOS システムではより一般的です。\nnpm グローバル キャッシュが PATH に追加されていることを確認します。 この手順は通常、Node.js インストーラーの一部として行われます。  \nCLI で `teamsfx` コマンドを指定して使用できます。 `teamsfx -h` を実行して、このコマンドが動作していることを確認します。\n\n> [!NOTE]\n> PowerShell ターミナルで TeamsFx を実行する前に、PowerShell の **リモート署名付き** 実行ポリシーを有効にしてください。\n\n## <a name=\"set-up-your-teams-development-tenant\"></a>Teams 開発テナントを設定する\n**テナント** は、Teams でチャット、ファイルの共有、組織の会議の実行を行うスペースやコンテナーのようなものです。 アプリをサイドロードしてテストすることもできます。\n### <a name=\"check-for-sideloading-option\"></a>サイドローディング オプションを確認する\nアプリを作成したら、アプリを配布せずに Teams に読み込む必要があります。 これはサイドローディングと呼ばれます。 このオプションを表示するには、Microsoft 365 アカウントにサインインします。\n> [!NOTE]\n> サイドローディングは、Teams のローカル環境でアプリをプレビューおよびテストするために必要です。 サイドローディングを有効にして、Teams でアプリをローカルでプレビューしてテストします。\n\n既にテナントがあり、管理者アクセス権がありますか? 実際にあるかどうかを確認しましょう。\nTeams でアプリのサイドロードを確認するには:\n1. Teams クライアントで、[ストア] を選択 **します** 。\n1. **[アプリの管理]** を選択します。\n1. [**アプリ の発行**] を選択します。\n1. **[カスタム アプリのアップロード]** オプションを探します。 オプションが表示された場合は、アプリのサイドローディングが有効です。\n    :::image type=\"content\" source=\"~/assets/images/teams-toolkit-v2/prerequisites/upload-custom-app.png\" alt-text=\"図は、Teams でカスタム アプリをアップロードするオプションを示しています。\":::\n    > [!NOTE]\n    > カスタム アプリをアップロードするオプションがない場合は、Teams 管理者に問い合わせてください。\n### <a name=\"create-a-free-teams-developer-tenant-optional\"></a>無料の Teams 開発者テナントを作成する (省略可能)\nTeams 開発者アカウントをお持ちでない場合は、無料で取得できます。 Microsoft 365 開発者プログラムに参加します。\n1. [Microsoft 365 開発者プログラム](https://developer.microsoft.com/microsoft-365/dev-program)に移動します。\n1. **[今すぐ参加]** を選択し、画面の指示に従います。\n1. ようこそ画面から [ **セットアップ E5 サブスクリプション** ] を選択します。\n1. 管理者アカウントを設定します。 完了すると、次の画面が表示されます。\n   :::image type=\"content\" source=\"~/assets/images/teams-toolkit-v2/prerequisites/microsoft-365.png\" alt-text=\"Microsoft\":::\n1. 新しい管理者アカウントを使用して Teams にサインインします。 これで、[ **カスタム アプリのアップロード** ] オプションが表示されます。\n"
- title: ワークフロー ボットを構築する
  durationInMinutes: 5
  content: "Visual Studio Code を使用してワークフロー ボットを構築するには、次の手順を実行します。\n1. Visual Studio Code を開きます。\n1. Visual Studio Code サイド バーの **[Teams Toolkit**:::image type=\"icon\" source=\"../msteams-platform/assets/images/teams-toolkit-v2/teams-toolkit-sidebar-icon.png\":::] アイコンを選択します。\n1. [ **新しい Teams アプリの作成] を** 選択します。\n  \n    :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-create.png\" alt-text=\"サイド パネルに新しい Teams アプリを作成します。\":::\n\n1. [ **新しい Teams アプリの作成** ] オプションを選択して、Teams Toolkit を使用してアプリを作成します。\n\n    :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-teams-app.png\" alt-text=\" オプションを選択して、新しい Teams アプリを作成します。\":::\n\n1. [ **シナリオ ベースの Teams アプリ**] で、アプリでビルドする機能として [ **ワークフロー ボット** ] を選択します。\n\n    :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-capabilities-workflow.png\" alt-text=\" 機能の [ワークフロー ボット] オプションを選択する\" lightbox=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-capabilities-workflow.png\":::\n\n1. プログラミング言語として **[TypeScript** ] を選択します。\n\n    :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-program-lang.png\" alt-text=\" プログラミング言語のオプションの種類スクリプトを選択する\":::\n\n1. **[既定のフォルダー]** を選択して、プロジェクトのルート フォルダーを既定の場所に格納します。\n  \n    > [!NOTE]\n    > [参照]を選択して、既定の場所を変更することもできます **。**\n    \n    :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-workspace-folder.png\" alt-text=\" 選択してワークスペース フォルダーを追加する\":::\n   \n1. アプリケーション名としてワークフロー ボットなど、アプリに適した名前を入力します。\n    > [!NOTE]\n    > アプリケーション名には英数字のみを使用してください。\n    \n    :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-app-name.png\" alt-text=\"アプリケーション名を入力する\":::\n\n1. **Enter** キーを押します。\n    \n1. ワークフロー ボットは数秒で作成され、スキャフォールディングを確認できます。\n    \n    :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-scaffolding1.png\" alt-text=\"サイド パネルにスキャフォールディングが表示された状態でアプリが作成される\":::\n\n1. Visual Studio Code サイド バーの [**実行とデバッグ**:::image type=\"icon\" source=\"../msteams-platform/assets/images/teams-toolkit-v2/run-debug-icon.png\":::] アイコンを選択します。\n\n1. ドロップダウン リストから **[デバッグ (Edge)]** または **[デバッグ (Chrome)]** を選択します。\n\n   :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-local-debug1.png\" alt-text=\"サイド パネルにスキャフォールディングが表示された状態でアプリが作成される\":::    \n\n1. [ **デバッグの開始] を選択します**。\n\n1. **[追加]** を選択します。\n    :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-add-app.png\" alt-text=\"[追加] を選択してワークフロー ボット アプリを追加する\":::\n### <a name=\"take-tour-of-source-code\"></a>ソース コードのツアーを見る\nTeams Toolkit には、アプリをビルドするためのコンポーネントが用意されています。 プロジェクトを作成したら、Visual Studio Code for JavaScript/TypeScript の [エクスプローラー] 領域でプロジェクト のフォルダーとファイルを表示できます。 \n\n:::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-scaffolding2.png\" alt-text=\"[追加] を選択してワークフロー ボット アプリを追加する\":::\n\n\n作成されたボットは、次のフォルダーを含む通常の TeamsFx プロジェクトです。\n\n| フォルダー | コンテンツ |\n|   ---  |   ---   |\n|`.fx`   | プロジェクト レベルの設定、構成、環境情報。|\n|`.vscode`| ローカル デバッグ用の Visual Studio Code ファイル |\n|`bot`   | ワークフロー ボット Teams アプリケーションのソース コード。|\n|`templates`| Teams アプリケーション マニフェストと Azure リソースをプロビジョニングするためのテンプレート。|\n\nTeams ボットのコア実装はフォルダー内 `bot/` にあります。 フォルダーの下にある `bot/` 次のファイルは、ワークフロー ボットのビジネス ロジックを提供します。\nこれらのファイルは、ビジネス ロジックの要件に合わせて更新できます。 既定の実装では、開始に役立つ出発点が提供されます。\n\n| フォルダー | コンテンツ |\n|   ---  |   ---   |\n|`src/index.js(ts)` | ワークフロー ボットのアプリケーション エントリ ポイントと `restify` ハンドラー。|\n|`src/adaptiveCards/helloworldCommand.json` | Teams に送信される生成されたアダプティブ カード。 |\n|`src/commands/helloworldCommandHandler.js(ts)` | コマンド メッセージに応答します。|\n|`src/cardActions/doStuffActionHandler.js(ts)` | カード アクションに `doStuff` 応答します。|\n|`src/cardModels.js(ts)` | 既定のアダプティブ カード データ モデル。|\n\n次のファイルは Bot Framework にコア ワークフロー ボットを実装します。通常、このファイルをカスタマイズする必要はありません。\n\n| ファイル/フォルダー | コンテンツ |\n|   ---  |   ---   |\n| `src/internal/initialize.js(ts)`| アプリケーションの初期化とボット メッセージ処理。|\n\n次のファイルはプロジェクト関連のファイルです。通常、これらのファイルをカスタマイズする必要はありません。\n\n| ファイル/フォルダー | コンテンツ |\n|   ---  |   ---   |\n| `.gitignore` | Git ignore file|\n| `package.json` | NPM パッケージ ファイル|\n"
- title: ワークフロー ボットとの対話
  durationInMinutes: 2
  content: "helloWorld コマンドを送信することで、Teams でボットと対話できます。 このテンプレートを実行すると、応答が表示され、 **ワークフロー ボット** と **Enter** が選択されます。\n :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-action-response.png\" alt-text=\"[追加] を選択してワークフロー ボット アプリを追加する\":::\n\nアダプティブ カードで次のコマンド応答を受け取ります。 :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-debug-output1.png\" alt-text=\"[追加] を選択してワークフロー ボット アプリを追加します\":::\n\n次に、[ **DoStuff** ] ボタンを選択してアクションを呼び出します。これは、更新されたアダプティブ カードで応答します。 :::image type=\"content\" source=\"./assets/images/sbs-workflow-bot/sbs-workflow-bot-debug-output2.png\" alt-text=\"[追加] を選択してワークフロー ボット アプリを追加します\":::\n   \n"
- title: 課題の完了
  durationInMinutes: 1
  content: >
    このようなものを思いついたのですか?


    :::image type="content" source="./assets/images/sbs-workflow-bot/sbs-workflow-bot-debug-output2.png" alt-text="[追加] を選択してワークフロー ボット アプリを追加する":::
- content: Microsoft Teams のワークフロー ボットの使用を開始するためのチュートリアルを完了しました。
